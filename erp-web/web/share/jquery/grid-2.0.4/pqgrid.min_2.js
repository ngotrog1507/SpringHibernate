/**
 * ParamQuery Pro
 * 
 * Copyright (c) 2012-2016 Paramvir Dhindsa (http://paramquery.com)
 * Released under Evaluation license
 * http://paramquery.com/pro/license/evaluate
 * 
 */
(function(l){var p=l.ui.autocomplete.prototype,f=p._renderMenu,b=p._renderItem;p._renderMenu=function(a,c){f.call(this,a,c);var e=this.options.selectItem;if(e&&e.on){var e=e.cls,e=void 0===e?"ui-state-highlight":e,b=this.element.val();b&&e&&l("a",a).filter(function(){return l(this).text()===b}).addClass(e)}};p._renderItem=function(a,c){var e=b.call(this,a,c),h=this.options.highlightText;if(h&&h.on){var m=this.element.val();if(m){var m=new RegExp("("+m+")","i"),k=c.label;if(m.test(k)){var q=h.style,
h=h.cls,k=k.replace(m,"<span style='"+(void 0===q?"font-weight:bold;":q)+"' class='"+(void 0===h?"":h)+"'>$1</span>");e.find("a").html(k)}}}return e};var p=l.paramquery=l.paramquery||{},a=function(a,c,e,b){c=c.slice();for(var m=[],k=0,q=c.length;k<q;k++){var g=c[k],n=g.cb,B=g.one;if(B){if(g._oncerun)continue;g._oncerun=!0}!1===n.call(a,e,b)&&(e.preventDefault(),e.stopPropagation());B&&m.push(k);if(e.isImmediatePropagationStopped())break}if(m.length)for(k=m.length-1;0<=k;k--)c.splice(m[k],1)};p._trigger=
function(d,c,e){var b,m,k=this.listeners,q=k[d],g=this.options,n=g.allEvents,B=g.bubble,t=this.element,r=g[d];e=e||{};c=l.Event(c);c.type=this.widgetName+":"+d;c.target=t[0];if(m=c.originalEvent)for(b in m)b in c||(c[b]=m[b]);n&&"function"==typeof n&&n.call(this,c,e);if(q&&q.length&&(a(this,q,c,e),c.isImmediatePropagationStopped())||g.trigger&&(t[B?"trigger":"triggerHandler"](c,e),c.isImmediatePropagationStopped()))return!c.isDefaultPrevented();r&&!1===r.call(this,c,e)&&(c.preventDefault(),c.stopPropagation());
(q=k[d+"Done"])&&q.length&&a(this,q,c,e);return!c.isDefaultPrevented()};p.on=function(){var a=arguments;if("boolean"==typeof a[0])var c=a[0],e=a[1],b=a[2],a=a[3];else e=a[0],b=a[1],a=a[2];for(var e=e.split(" "),m=0;m<e.length;m++){var k=e[m];if(k){var q=b,g=a,n=c,B=this.listeners[k];B||(B=this.listeners[k]=[]);B[n?"unshift":"push"]({cb:q,one:g})}}return this};p.one=function(){for(var a=arguments.length,c=[],e=0;e<a;e++)c[e]=arguments[e];c[a]=!0;return this.on.apply(this,c)};p.off=function(a,c){for(var e=
a.split(" "),b=0;b<e.length;b++){var m=e[b];if(m){var k=m;if(m=c){if(k=this.listeners[k]){for(var q=[],g=0,n=k.length;g<n;g++)m==k[g].cb&&q.push(g);if(q.length)for(g=q.length-1;0<=g;g--)k.splice(q[g],1)}}else delete this.listeners[k]}}return this};l.widget("paramquery.pqTooltip",l.ui.tooltip,{options:{items:"td.pq-has-tooltip,td[title]",position:{my:"center top",at:"center bottom"},content:function(){var a=l(this),c=a.closest(".pq-grid").pqGrid("getInstance").grid,e=c.getCellIndices({$td:a});return(c=
c.data({rowIndx:e.rowIndx,dataIndx:e.dataIndx,data:"pq_valid"}).data)?(a=c.icon,c=c.msg,(""==a?"":"<span class='ui-icon "+a+" pq-tooltip-icon'></span>")+(null!=c?c:"")):a.attr("title")}},_create:function(){this._super();var a=this.element,c=this.eventNamespace;a.on("pqtooltipopen"+c,function(c,a){var d=l(c.target),b=l(c.originalEvent.target);b.on("remove",function(g){d.pqTooltip("close",g,!0)});a.tooltip.css("zIndex",b.zIndex()+5);if(d.is(".pq-grid")){var q=d.pqGrid("getCellIndices",{$td:b}),g=q.dataIndx,
n;(n=d.pqGrid("getRowData",{rowIndx:q.rowIndx}))&&(n=n.pq_celldata)&&(n=n[g])&&(n=n.pq_valid)&&(g=n,q=g.style,a.tooltip.addClass(g.cls),g=a.tooltip.attr("style"),a.tooltip.attr("style",g+";"+q));d.find("div.pq-sb-horiz,div.pq-sb-vert").on("pqscrollbardrag",function(g,n){g.currentTarget=b[0];d.pqTooltip("close",g,!0)})}});a.on("pqtooltipclose"+c,function(c,a){var d=l(c.target);l(c.originalEvent.target).off("remove");d.is(".pq-grid")&&d.find("div.pq-sb-horiz,div.pq-sb-vert").off("pqscrollbardrag")})}})})(jQuery);
(function(l){var p=window.pq=p||{},f=l.paramquery;p.arrayUnique=function(c,e){var a=[],d,b=c.length,q,g={},n;for(d=0;d<b;d++)q=c[d],n=e?q[e]:q,g.hasOwnProperty(n)||(g[n]=1,a.push(q));return a};f.select=function(c){var e=c.options,a=c.groupIndx,d=c.labelIndx,b=c.valueIndx,q=null!=d&&null!=b,g=null!=a,n=c.prepend,B=c.dataMap,t,r,u;c=["<select ",c.attr," >"];if(n)for(var v in n)c.push('<option value="',v,'">',n[v],"</option>");if(e&&e.length){for(var n=0,f=e.length;n<f;n++){var l=e[n];if(q){var z=l[b],
A=l.pq_disabled?'disabled="disabled" ':"",p=l.pq_selected?'selected="selected" ':"";if(null!=z){if(B){t={};for(u=0;u<B.length;u++){var s=B[u];t[s]=l[s]}t="data-map='"+JSON.stringify(t)+"'"}else t="";u=t;g&&(s=l.pq_disabled_group?'disabled="disabled" ':"",t=l[a],r!=t&&(null!=r&&c.push("</optgroup>"),c.push('<optgroup label="',t,'" ',s," >"),r=t));d==b?c.push("<option ",p,A,u,">",z,"</option>"):c.push("<option ",p,A,u,' value="',z,'">',l[d],"</option>")}}else if("object"==typeof l)for(v in l)c.push('<option value="',
v,'">',l[v],"</option>");else c.push("<option>",l,"</option>")}g&&c.push("</optgroup>")}c.push("</select>");return c.join("")};l.fn.pqval=function(c){if(c){if(c.incr)return c=this.data("pq_value"),this.prop("indeterminate",!1),c?(c=!1,this.prop("checked",!1)):!1===c?(c=null,this.prop("indeterminate",!0),this.prop("checked",!1)):(c=!0,this.prop("checked",!0)),this.data("pq_value",c),c;c=c.val;this.data("pq_value",c);this.prop("indeterminate",!1);null==c?(this.prop("indeterminate",!0),this.prop("checked",
!1)):c?this.prop("checked",!0):this.prop("checked",!1);return this}return this.data("pq_value")};f.xmlToArray=function(c,e){var a=e.itemParent,d=e.itemNames,b=[];l(c).find(a).each(function(c,g){var n=l(g),B=[];l(d).each(function(g,c){B.push(n.find(c).text().replace(/\r|\n|\t/g,""))});b.push(B)});return b};f.xmlToJson=function(c,e){var a=e.itemParent,d=e.itemNames,b=[];l(c).find(a).each(function(c,g){for(var n=l(g),B={},e=0,a=d.length;e<a;e++){var h=d[e];B[h]=n.find(h).text().replace(/\r|\n|\t/g,"")}b.push(B)});
return b};f.tableToArray=function(c){var e=[],a=[];c=l(c).children("tbody").children("tr");var d=c.length?l(c[0]):l(),b=1<c.length?l(c[1]):l();d.children("th,td").each(function(c,g){var n=l(g),B=n.html(),n=n.width(),a="left";if(b.length)var d=b.find("td:eq("+c+")").attr("align"),a=d?d:a;e.push({title:B,width:n,dataType:"string",align:a,dataIndx:c})});c.each(function(c,g){if(0!=c){var n=[];l(g).children("td").each(function(g,c){n.push(l.trim(l(c).html()))});a.push(n)}});return{data:a,colModel:e}};
var b={};f.formatCurrency=function(c,e){var a=parseFloat(c);if(!isNaN(a)){var d=0>a,k;a:{var q=e,g,n;if(q){q=q.split(":");q=d&&1<q.length?q[1]:q[0];if(g=b[q]){k=g;break a}n=/^([^#]*|&#[^#]*)?[\,\.#0]*?([\,\s\.]?)([#0]*)([\,\s\.]?)([0]*?)(\s*[^#^0]*|&#[^#]*)?$/;(n=q.match(n))&&n.length&&(g={symbol:n[1]||"",thouSep:n[2],thousand:n[3].length,decSep:n[4],decimal:n[5].length,symbolEnd:n[6]||""},b[q]=g)}k=g=g||{symbol:"",symbolEnd:"",thouSep:",",thousand:3,decSep:".",decimal:2}}q=k.symbol;g=k.symbolEnd;
n=k.thousand;var B=k.thouSep,t=k.decSep,r=k.decimal,a=a.toFixed(r);k=a.length;var u=r+t.length,r=a.substring(0,k-u),a=a.substring(k-u+t.length,k);k=r.match(/\d/g).reverse();r=[];for(u=0;u<k.length;u++)0<u&&0==u%n&&r.push(B),r.push(k[u]);r=r.reverse();r=r.join("");return(d?"-":"")+q+r+t+a+g}};p.formatNumber=f.formatCurrency;p.validation={is:function(c,e){if("string"==c||!c)return!0;c=c.substring(0,1).toUpperCase()+c.substring(1,c.length);return this["is"+c](e)},isFloat:function(c){var e=parseFloat(c);
return isNaN(e)||e!=c?!1:!0},isInteger:function(c){var e=parseInt(c);return isNaN(e)||e!=c?!1:!0},isDate:function(c){c=Date.parse(c);return isNaN(c)?!1:!0}};var a=[],d=f.toLetter=function(c){var e=a[c];if(!e){c++;var b=c%26,e=c/26|0,b=b?String.fromCharCode(64+b):(--e,"Z"),e=e?d(e-1)+b:b;c--;a[c]=e}return e};f.generateData=function(c,e){for(var a=[],b=0;b<e;b++)a[b]=d(b);for(var k=[],b=0;b<c;b++)for(var q=k[b]=[],g=0;g<e;g++)q[g]=a[g]+(b+1);return k}})(jQuery);
(function(l){function p(c,a,d){return c?l("<span tabindex='0' rel='tooltip' data-placement='top' title='"+a+"' class='btn btn-xs "+d+"'></span>"):l("<span class='pq-ui-button ui-widget-header' tabindex='0' rel='tooltip' title='"+a+"'><span class='ui-icon ui-icon-"+d+"'></span></span>")}function f(c,a){c.bind("click keydown",function(c){if("keydown"!=c.type||c.keyCode==l.ui.keyCode.ENTER)return a.call(this,c)})}function b(c,a,d){a[d?"addClass":"removeClass"]("disabled").css("pointer-events",d?"none":
"").attr("tabindex",d?"":"0")}var a={options:{bootstrap:{on:!1,pager:"",nextIcon:"glyphicon glyphicon-forward",prevIcon:"glyphicon glyphicon-backward",firstIcon:"glyphicon glyphicon-step-backward",lastIcon:"glyphicon glyphicon-step-forward",refreshIcon:"glyphicon glyphicon-refresh"},curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20},_regional:{strDisplay:"Displaying {0} to {1} of {2} items.",strFirstPage:"First Page",strLastPage:"Last Page",strNextPage:"Next Page",
strPage:"Page {0} of {1}",strPrevPage:"Previous Page",strRefresh:"Refresh",strRpp:"Records per page:{0}"}};l.extend(a.options,a._regional);a._create=function(){var c=this,a=this.options,d=this.element,b=a.bootstrap,k=b.on;this.listeners={};d.addClass("pq-pager "+(k?b.pager:""));this.first=p(k,a.strFirstPage,k?b.firstIcon:"seek-first").appendTo(d);f(this.first,function(d){1<a.curPage&&c._onChange(d,1)});this.prev=p(k,a.strPrevPage,k?b.prevIcon:"seek-prev").appendTo(d);f(this.prev,function(d){1<a.curPage&&
c._onChange(d,a.curPage-1)});l("<span class='pq-separator'></span>").appendTo(d);this.pageHolder=l("<span class='pq-page-placeholder'></span>").appendTo(d);l("<span class='pq-separator'></span>").appendTo(d);this.next=p(k,a.strNextPage,k?b.nextIcon:"seek-next").appendTo(d);f(this.next,function(d){a.curPage<a.totalPages&&c._onChange(d,a.curPage+1)});this.last=p(k,a.strLastPage,k?b.lastIcon:"seek-end").appendTo(d);f(this.last,function(d){a.curPage!==a.totalPages&&c._onChange(d,a.totalPages)});l("<span class='pq-separator'></span>").appendTo(d);
this.rPPHolder=l("<span class='pq-page-placeholder'></span>").appendTo(d);this.$refresh=p(k,a.strRefresh,k?b.refreshIcon:"refresh").appendTo(d);f(this.$refresh,function(a){if(!1===c._trigger("beforeRefresh",a))return!1;c._trigger("refresh",a)});l("<span class='pq-separator'></span>").appendTo(d);this.$msg=l("<span class='pq-pager-msg'></span>").appendTo(d);this._refresh()};a._destroy=function(){this.element.empty().removeClass("pq-pager").enableSelection()};a._setOption=function(c,a){if("curPage"==
c||"totalPages"==c)a*=1;this._super(c,a)};a._setOptions=function(c){var a,d=!1,b=this.options;for(a in c){var k=c[a],q=typeof k;"string"==q||"number"==q?k!=b[a]&&(this._setOption(a,k),d=!0):"function"==typeof k.splice||l.isPlainObject(k)?JSON.stringify(k)!=JSON.stringify(b[a])&&(this._setOption(a,k),d=!0):k!=b[a]&&(this._setOption(a,k),d=!0)}d&&this._refresh();return this};l.widget("paramquery.pqPager",a);pq.pager=function(c,a){var d=l(c).pqPager(a);return d.data("paramqueryPqPager")||d.data("paramquery-pqPager")};
var d=l.paramquery;d.pqPager.regional={};d.pqPager.regional.en=a._regional;a=d.pqPager.prototype;d.pqPager.defaults=a.options;a._refreshPage=function(){var c=this;this.pageHolder.empty();for(var a=this.options,d=a.bootstrap,b=a.strPage.split(" "),k=[],q=0,g=b.length;q<g;q++){var n=b[q];"{0}"==n?k.push("<input type='text' tabindex='0' class='pq-pager-input ",d.on?"":"ui-corner-all","' />"):"{1}"==n?k.push("<span class='total'></span>"):k.push("<span>",n,"</span>")}d=k.join("");d=l(d).appendTo(this.pageHolder);
this.page=d.filter("input").bind("change",function(g){var n=l(this),d=n.val();if(isNaN(d)||1>d)return n.val(a.curPage),!1;d=parseInt(d);if(d>a.totalPages||!1===c._onChange(g,d))return n.val(a.curPage),!1});this.$total=d.filter("span.total")};a._onChange=function(c,a){if(!1===this._trigger("beforeChange",c,{curPage:a})||!1===this._trigger("change",c,{curPage:a}))return!1;this.option({curPage:a})};a._refresh=function(){this._refreshPage();var c=this,a=this.options,d=a.bootstrap;this.rPPHolder.empty();
if(a.strRpp){var m=a.rPPOptions,k=a.strRpp;if(-1!=k.indexOf("{0}")){for(var d=["<select class='",d.on?"":"ui-corner-all","'>"],q=0,g=m.length;q<g;q++){var n=m[q];d.push('<option value="',n,'">',n,"</option>")}d.push("</select>");m=d.join("");k=k.replace("{0}","</span>"+m);k="<span>"+k+"<span class='pq-separator'></span>"}else k="<span>"+k+"</span><span class='pq-separator'></span>";this.$rPP=l(k).appendTo(this.rPPHolder).filter("select").val(a.rPP).change(function(g){var n=l(this),a=n.val();if(!1===
c._trigger("beforeChange",g,{rPP:a}))return n.val(c.options.rPP),!1;!1!==c._trigger("change",g,{rPP:a})&&(c.options.rPP=a)})}k=a.bootstrap.on;m=a.curPage>=a.totalPages;b(k,this.next,m);b(k,this.last,m);m=1>=a.curPage;b(k,this.first,m);b(k,this.prev,m);this.page.val(a.curPage);this.$total.text(a.totalPages);0<this.options.totalRecords?(k=a.rPP,m=a.curPage,d=a.totalRecords,q=m*k,q>d&&(q=d),a=a.strDisplay,a=a.replace("{0}",(m-1)*k+1),a=a.replace("{1}",q),a=a.replace("{2}",d),this.$msg.html(a)):this.$msg.html("")};
a.getInstance=function(){return{pager:this}};a._trigger=d._trigger;a.on=d.on;a.one=d.one;a.off=d.off})(jQuery);
(function(l){function p(a,c){return a?"<div class='"+c+"'></div>":"<div class='ui-icon ui-icon-"+c+"'></div>"}var f=l.paramquery,b={options:{length:200,num_eles:3,trigger:!1,cur_pos:0,ratio:0,timeout:350,pace:"optimum",direction:"vertical",bootstrap:{on:!1,slider:"btn btn-default",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",left:"glyphicon glyphicon-chevron-left",right:"glyphicon glyphicon-chevron-right"},theme:!1},_destroy:function(){l(document).off("."+this.eventNamespace);
this.element.removeClass("pq-sb pq-sb-vert pq-sb-vert-t pq-sb-vert-wt").enableSelection().removeClass("pq-sb-horiz pq-sb-horiz-t pq-sb-horiz-wt").unbind("click.pq-scrollbar").empty();this.element.removeData()},_create:function(){this.listeners={};this._createLayout()},_setOption:function(a,c){var e=this.options;"disabled"==a?(this._super(a,c),!0==c?this.$slider.draggable("disable"):this.$slider.draggable("enable")):"theme"==a?(e[a]=c,this._createLayout()):"ratio"==a?0<=c&&1>=c&&(e[a]=c):e[a]=c},_setOptions:function(){this._super.apply(this,
arguments);this.refresh()}};l.widget("paramquery.pqScrollBar",b);pq.scrollbar=function(a,c){var e=l(a).pqScrollBar(c);return e.data("paramqueryPqScrollBar")||e.data("paramquery-pqScrollBar")};b=f.pqScrollBar.prototype;f.pqScrollBar.defaults=b.options;b._createLayout=function(){var a=this,c=this.options,e=c.bootstrap,b=e.on,m=c.direction,k=this.eventNamespace,q=c.theme,g=this.element.empty();"vertical"==m?(g.removeClass("pq-sb-vert-t pq-sb-vert-wt").addClass("pq-sb pq-sb-vert"),q?(g.addClass("pq-sb-vert-t"),
g[0].innerHTML=["<div class='top-btn pq-sb-btn ",b?"":"ui-state-default ui-corner-top","'>",p(b,b?e.up:"triangle-1-n"),"</div><div class='pq-sb-slider ",b?e.slider:"ui-corner-all ui-state-default","'></div><div class='bottom-btn pq-sb-btn ",b?"":"ui-state-default ui-corner-bottom","'>",p(b,b?e.down:"triangle-1-s"),"</div>"].join("")):(g.addClass("pq-sb-vert-wt"),g[0].innerHTML="<div class='top-btn pq-sb-btn'></div><div class='pq-sb-slider'><div class='vert-slider-top'></div><div class='vert-slider-bg'></div><div class='vert-slider-center'></div><div class='vert-slider-bg'></div><div class='vert-slider-bottom'></div></div><div class='bottom-btn pq-sb-btn'></div>")):
(g.removeClass("pq-sb-horiz-t pq-sb-horiz-wt").addClass("pq-sb pq-sb-horiz"),q?(g.addClass("pq-sb-horiz-t"),g[0].innerHTML=["<div class='left-btn pq-sb-btn ",b?"":"ui-state-default ui-corner-left","'>",p(b,b?e.left:"triangle-1-w"),"</div><div class='pq-sb-slider pq-sb-slider-h ",b?e.slider:"ui-state-default ui-corner-all","'></div><div class='right-btn pq-sb-btn ",b?"":"ui-state-default ui-corner-right","'>",p(b,b?e.right:"triangle-1-e"),"</div>"].join("")):(g.addClass("pq-sb-horiz-wt"),g.width(this.width),
g[0].innerHTML="<div class='left-btn pq-sb-btn'></div><div class='pq-sb-slider pq-sb-slider-h'><span class='horiz-slider-left'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-center'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-right'></span></div><div class='right-btn pq-sb-btn'></div>"));g.disableSelection().unbind(".pq-scrollbar").on("mousedown.pq-scrollbar",function(g){if(!c.disabled&&!a.$slider.is(":hidden"))if(l(document).off("."+k).on("mouseup."+
k,function(g){a._mouseup(g)}),"vertical"==m){var B=g.pageY,e=a.element.offset().top,b=e+c.length,h=a.$slider,q=h.offset().top,f=h.height(),h=q+f;B<q&&B>e+17?a._setTimerPageLeft(B,f,g,0):B>h&&B<b-17&&a._setTimerPageRight(B,f,g,0)}else B=g.pageX,e=a.element.offset().left,b=e+c.length,q=a.$slider.offset().left,h=q+a.$slider.width(),B<q&&B>e+17?(a.$slider.css("left",B-a.element.offset().left),a._updateCurPosAndTrigger(g)):B>h&&B<b-17&&(a.$slider.css("left",B-a.element.offset().left-a.$slider.width()),
a._updateCurPosAndTrigger(g))});e=this.$slider=l("div.pq-sb-slider",this.element);e.attr("tabindex","0");this._bindSliderEvents(e);this.$top_btn=l("div.top-btn,div.left-btn",this.element).click(function(g){if(!a.options.disabled)return a.decr_cur_pos(g),!1}).mousedown(function(g){if(!a.options.disabled)return a.mousedownTimeout=setTimeout(function(){a.mousedownInterval=setInterval(function(){a.decr_cur_pos(g)},0)},a.options.timeout),!1}).bind("mouseup mouseout",function(g){a._mouseup(g)});this.$bottom_btn=
l("div.bottom-btn,div.right-btn",this.element).click(function(g){if(!a.options.disabled)return a.incr_cur_pos(g),!1}).mousedown(function(g){if(!a.options.disabled)return a.mousedownTimeout=setTimeout(function(){a.mousedownInterval=setInterval(function(){a.incr_cur_pos(g)},0)},a.options.timeout),!1}).bind("mouseup mouseout",function(g){a._mouseup(g)});this.refresh()};var a=0;b._setTimerPageLeft=function(d,c,e,b){var m=this,k=m.options;this.mousedownTimeout=window.setTimeout(function(){if(d>=m.$slider.offset().top)m._mouseup();
else{m._pageLeft(e);var b=a?0:k.timeout;a++;m._setTimerPageLeft(d,c,e,b)}},b)};b._setTimerPageRight=function(d,c,e,b){var m=this;this.mousedownTimeout=window.setTimeout(function(){if(d<=m.$slider.offset().top+c)m._mouseup();else{m._pageRight(e);var b=a?0:m.options.timeout;a++;m._setTimerPageRight(d,c,e,b)}},b)};b._bindSliderEvents=function(a){var c=this,e="x";"vertical"==this.options.direction&&(e="y");a.draggable({axis:e,helper:function(a,d){c._setDragLimits();return this},start:function(a){c.topWhileDrag=
null;c.dragging=!0},drag:function(a){c.dragging=!0;var d=c.options.pace;"optimum"==d?c._setNormalPace(a):"fast"==d&&c._updateCurPosAndTrigger(a)},stop:function(a){"fast"!=c.options.pace&&c._updateCurPosAndTrigger(a);c.dragging=!1;c.refresh()}}).on("keydown.pq-scrollbar",function(a){var d=a.keyCode,e=c.options,b=e.cur_pos,g=e.ratio,n=e.num_eles,B=l.ui.keyCode;null==c.keydownTimeout&&(c.keydownTimeout=window.setTimeout(function(){d==B.DOWN||d==B.RIGHT?c.incr_cur_pos(a):d==B.UP||d==B.LEFT?c.decr_cur_pos(a):
d==B.HOME?e.steps?0<b&&(e.cur_pos=0,c.updateSliderPos(),c.scroll(a)):0<g&&(e.ratio=0,c.updateSliderPos(),c.drag(a)):d==B.END?e.steps?b<n&&(e.cur_pos=n,c.updateSliderPos(),c.scroll(a)):1>g&&(e.ratio=1,c.updateSliderPos(),c.drag(a)):"vertical"==e.direction&&(d==B.PAGE_DOWN?c._pageRight(a):d==B.PAGE_UP&&c._pageLeft(a));c.keydownTimeout=null},0));if(d==B.DOWN||d==B.RIGHT||d==B.UP||d==B.LEFT||d==B.PAGE_DOWN||d==B.PAGE_UP||d==B.HOME||d==B.END)return a.preventDefault(),!1})};b.decr_cur_pos=function(a){var c=
this.options;if(c.steps)0<c.cur_pos&&(c.cur_pos--,this.updateSliderPos(),this.scroll(a));else if(0<c.ratio){var e=c.ratio-1/(c.num_eles-1);0>e&&(e=0);c.ratio=e;this.updateSliderPos();this.drag(a)}};b.incr_cur_pos=function(a){var c=this.options;if(c.steps)c.cur_pos<c.num_eles-1&&c.cur_pos++,this.updateSliderPos(),this.scroll(a);else{if(1>c.ratio){var e=c.ratio+1/(c.num_eles-1);1<e&&(e=1);c.ratio=e}this.updateSliderPos();this.drag(a)}};b._mouseup=function(d){this.options.disabled||(a=0,window.clearTimeout(this.mousedownTimeout),
this.mousedownTimeout=null,window.clearInterval(this.mousedownInterval),this.mousedownInterval=null)};b._setDragLimits=function(){var a=this.options;if("vertical"==a.direction){var c=this.element.offset().top+17,a=c+a.length-34-this.slider_length;this.$slider.draggable("option","containment",[0,c,0,a])}else c=this.element.offset().left+17,a=c+a.length-34-this.slider_length,this.$slider.draggable("option","containment",[c,0,a,0])};b._validateCurPos=function(){var a=this.options;a.cur_pos>=a.num_eles&&
(a.cur_pos=a.num_eles-1);0>a.cur_pos&&(a.cur_pos=0)};b._updateSliderPosRatio=function(){var a=this.options,c=a.direction,e=a.ratio,b=this.$slider[0],a=a.length-34-this.slider_length;if(null==e)throw"updateSliderPosRatio ratio N/A";e=e*a+17;"vertical"==c?b.style.top=e+"px":b.style.left=e+"px"};b._updateSliderPosCurPos=function(){var a=this.options,c=this.$slider[0],e=this.scroll_space*a.cur_pos/(a.num_eles-1);"vertical"==a.direction?c.style.top=17+e+"px":c.style.left=17+e+"px"};b.updateSliderPos=function(){var a=
this.options;if(void 0===a.steps)throw"updateSliderPos. steps N/A";a.steps?this._updateSliderPosCurPos():this._updateSliderPosRatio()};b.scroll=function(a){var c=this.options;this._trigger("scroll",a,{cur_pos:c.cur_pos,num_eles:c.num_eles})};b.drag=function(a){this._trigger("drag",a,{ratio:this.options.ratio})};b._pageRight=function(a){this._trigger("pageRight",a,null)};b._pageLeft=function(a){this._trigger("pageLeft",a,null)};b._setSliderBgLength=function(){var a=this.options,c=a.theme,e=this.$slider,
b=a.length,b=Math.round(((b-34)*b/(40*a.num_eles+b)-14)/2);1>b&&(b=1);var m=14+2*b;this.scroll_space=a.length-34-m;if(m!==this.slider_length)if(this.slider_length=m,a="vertical"===a.direction?{dim:"height",cls:".vert-slider-bg"}:{dim:"width",cls:".horiz-slider-bg"},c)e[a.dim](m-2);else l(a.cls,this.element)[a.dim](b),e[a.dim](m)};b._updateCurPosAndTrigger=function(a,c){var e=this.options,b=e.direction,m=this.$slider;null==c&&(c=parseInt(m[0].style["vertical"===b?"top":"left"]));b=(c-17)/(e.length-
34-this.slider_length);if(e.steps){if(b*=e.num_eles-1,b=Math.round(b),e.cur_pos!=b){if(this.dragging){if(null!=this.topWhileDrag&&(this.topWhileDrag<c&&e.cur_pos>b||this.topWhileDrag>c&&e.cur_pos<b))return;this.topWhileDrag=c}this.options.cur_pos=b;this.scroll(a)}}else e.ratio=b,this.drag(a)};b._setNormalPace=function(a){this.timer&&(window.clearInterval(this.timer),this.timer=null);var c=this,e=this.options.direction;c.timer=window.setInterval(function(){var b=parseInt(c.$slider[0].style["vertical"===
e?"top":"left"]);c.prev_top===b&&(c._updateCurPosAndTrigger(a,b),window.clearInterval(c.timer),c.timer=null);c.prev_top=b},20)};b.refresh=function(){var a=this.options,c=this.$slider[0],e=this.element;1>=a.num_eles?e[0].style.display="none":(e[0].style.display="",this._validateCurPos(),this.dragging||(e["vertical"===a.direction?"height":"width"](a.length),this._setSliderBgLength(),c.style.display=4>this.scroll_space||1>=a.num_eles?"none":""),this.updateSliderPos())};b._trigger=f._trigger;b.on=f.on;
b.one=f.one;b.off=f.off})(jQuery);
(function(l){l.paramquery=l.paramquery||{};l.paramquery.onResize=function(p,f){var b=l(p);"static"===b.css("position")&&b.css("position","relative");var a=l('<iframe type="text/html" src="about:blank" class="pq-resize-iframe" style="display:block;width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;overflow: hidden; pointer-events: none;" />').appendTo(b);a[0].data="about:blank";a.css("opacity","0");for(var d=0;d<b.length;d++)l(a[d].contentWindow).on("resize",function(a){f()})}})(jQuery);
(function(l){function p(g){return"<span class='btn btn-xs glyphicon glyphicon-"+g+"' ></span>"}function f(g){return"<span class='ui-widget-header pq-ui-button'><span class='ui-icon ui-icon-"+g+"'></span></span>"}var b=function(){};b.prototype.belongs=function(g){if(g.target==this.that.element[0])return!0};var a=l.paramquery;a.cClass=b;var d=function(g){this.that=g;var n=this.options=g.options,a=this;a.odd=[];if(null!=n.postRenderInterval)g.on("refresh",function(){a.prColDef.length&&a.postRenderAll()}).on("refreshRow",
function(g,n){a.prColDef.length&&a.postRenderRow(n)}).on("refreshCell",function(g,n){n.column.postRender&&a.postRenderRow(n)}).on("refreshColumn",function(g,n){n.column.postRender&&a.setTimerPostRender(0,n.colIndx,n.column)});if(!n.mergeModel.flex)g.on("refresh refreshCell refreshRow refreshColumn",a.onRefreshMerge(g))};a.cGenerateView=d;b=d.prototype=new b;b.onRefreshMerge=function(g){return function(){for(var n=g.$cont.find(".pq-merge-cell-div"),a,c,e,b,d=n.length,k=[],h=[];d--;)a=n[d],a=a.parentNode,
c||(c=2*parseInt(l(a).css("paddingTop")),e=2*parseInt(l(a).css("paddingLeft"))),b=Math.max(a.offsetHeight,28),b-=c,a=a.offsetWidth-e,k[d]=b-1+"px",h[d]=a+"px";for(d=n.length;d--;)a=n[d],a.style.height=k[d],a.style.width=h[d]}};b.generateView=function(g){g=g||{};var n=this.that,B=n.options,c="flex"===B.width,e="flex"===B.height,b=B.cls,d=b.cont_inner,k=b.cont_inner_b,h,m,q=n.initH,f=n.finalH,l=n.pqpanes;if(g.$cont)h=this._generateTables(null,null,g),b=g.$cont,b.empty(),b[0].innerHTML=l.v?["<div class='",
d,"'>",h,"</div><div class='",d,"'>",h,"</div>"].join(""):["<div class='",d,"'>",h,"</div>"].join(""),B=b.children("div").children("table"),n.tables[0]={$tbl:B,$cont:b};else{h=n.initV;m=n.finalV;var y=n.pdata,b=n.$cont;null!=B.editModel.indices&&n.blurEditor({force:!0});q={pageData:y,initV:h,finalV:m,initH:q,finalH:f,source:g.source};n._trigger("beforeTableView",null,q);h=this._generateTables(h,m,g);b.empty();0===n.totalVisibleRows?b.append("<div class='"+d+" pq-grid-norows' >"+B.strNoRows+"</div>"):
(g=e||c?"style='position:relative;'":"",b[0].innerHTML=l.h&&l.v?["<div class='",d,"'>",h,"</div><div class='",d,"'>",h,"</div><div class='",d," ",k,"'>",h,"</div><div class='",d," ",k,"'>",h,"</div>"].join(""):l.v?["<div class='",d,"' ",g," >",h,"</div><div class='",d,"' >",h,"</div>"].join(""):l.h?["<div class='",d,"' style='position:static;' >",h,"</div><div class='",d," ",k,"' style='position:static;' >",h,"</div>"].join(""):["<div class='",d,"' ",g," >",h,"</div>"].join(""));n.$tbl=b.children("div").children("table");
if(B.scrollModel.flexContent&&n.$tbl[0])a.onResize(n.$tbl[0],function(){var g=n.iRefresh;g.ignoreTResize||g.softRefresh()});this.setPaneEvents();n._trigger("refresh",null,q)}this.setPanes()};b.postRenderRow=function(g){var n=this.that,a=this.prColDef,c=n.iMerge,b=g.rowIndx,e;null!=g.colIndx&&(a=[{colIndx:g.colIndx,column:g.column}]);for(var d=0,k=a.length;d<k;d++)g=a[d],e=g.column.postRender,g=g.colIndx,c.ismergedCell(b,g)?c.isRootCell(b,g,"a")&&(g=c.getRootCell(b,g),e.call(n,g)):(g=n.normalize({rowIndx:b,
colIndx:g}),e.call(n,g))};b.setTimerPostRender=function(g,n,a){var c=this.that,b=this,e=c.pdata,d=function(g){return-1==c.options.postRenderInterval?g():setTimeout(g,0)};e&&e.length&&(b.postRenderTimeoutID=d(function(){var d=c.initV,k=c.options.freezeRows;g<d&&g>=k&&(g=d);e[g].pq_hidden||b.postRenderRow({column:a,colIndx:n,rowIndx:g+c.rowIndxOffset});g++;g<=c.finalV&&b.setTimerPostRender(g)}))};b.postRenderAll=function(){var g=this.that,n=this,a=g.pdata,c=g.options.postRenderInterval,g=function(g){return-1==
c?g():setTimeout(g,c)};a&&a.length&&(clearTimeout(n.postRenderTimeoutID),n.postRenderTimeoutID=g(function(){n.setTimerPostRender(0)}))};b.scrollView=function(){var g=this.that,n=this.options,a=n.virtualY;n.virtualX||g.hscroll.drag();a||g.vscroll.drag()};b.setPaneEvents=function(){var g=this.that,n=g.pqpanes,a=g.$cont.children("div"),c=g.iMouseSelection;if((g=g.$tbl)&&g.length)if(n.h&&n.v){var n=l(a[0]),g=l(a[1]),b=l(a[2]),a=l(a[3]);n.on("scroll",function(g){this.scrollLeft=this.scrollTop=0});g.on("scroll",
function(g){this.scrollTop=0;this.scrollLeft=c.getScrollLeft(!0)});b.on("scroll",function(g){this.scrollTop=c.getScrollTop(!0);this.scrollLeft=0});a.on("scroll",function(g){this.scrollTop=c.getScrollTop(!0);this.scrollLeft=c.getScrollLeft(!0)})}else if(n.v)n=l(a[0]),a=l(a[1]),n.on("scroll",function(g){this.scrollTop=c.getScrollTop(!0);this.scrollLeft=0}),a.on("scroll",function(g){this.scrollTop=c.getScrollTop(!0);this.scrollLeft=c.getScrollLeft(!0)});else if(n.h)n=l(a[0]),a=l(a[1]),n.on("scroll",
function(g){this.scrollTop=0;this.scrollLeft=c.getScrollLeft(!0)}),a.on("scroll",function(g){this.scrollTop=c.getScrollTop(!0);this.scrollLeft=c.getScrollLeft(!0)});else a.on("scroll",function(g){this.scrollTop=c.getScrollTop(!0);this.scrollLeft=c.getScrollLeft(!0)})};b.setPanes=function(){var g=this.that,n=g.pqpanes,a=g.$cont.children("div"),c=g.iRefresh,b=g.$tbl,e=g.options,d=g.calcWidthCols(-1,1*e.freezeCols)+1,k="flex"!==e.width||e.maxWidth?c.getEContWd():"";if(g.tables.length){var h=g.tables[0].$tbl,
m=g.tables[0].$cont,q=h.parent("div");n.v?(l(q[0]).css({width:d}),l(q[1]).css({left:d,width:k-d}),l(h[1]).css({left:-1*d})):l(q[0]).css({width:k});m.height(h[0].scrollHeight-1);c.setContHeight()}if(b&&b.length)if(c="flex"!==e.height||e.maxHeight?c.getEContHt():"",n.h&&n.v){var h=l(a[0]),m=l(a[1]),q=l(b[1]),f=l(a[2]),s=l(b[2]),a=l(a[3]),y=l(b[3]),b=g.calcHeightFrozenRows();h.css({width:d,height:b});m.css({left:d,width:k-d,height:b});q.css({left:-1*d});f.css({width:d,top:b,height:c-b});s.css({marginTop:-(b+
1)});a.css({left:d,width:k-d,top:b,height:c-b});y.css({marginTop:-(b+1),left:-1*d})}else n.v?(h=l(a[0]),a=l(a[1]),b=l(b[1]),h.css({width:d,height:c}),a.css({left:d,width:k-d,height:c}),b.css({left:-1*d})):n.h?(h=l(a[0]),a=l(a[1]),m=l(b[1]),b=g.calcHeightFrozenRows(),h.css({height:b,width:k}),a.css({width:k,top:b,height:c-b}),m.css({marginTop:-(b+1)})):a.css({width:k,height:c});e.showHeader&&(n.vH?(g.$header_left.css({width:d}),g.$header_right.css({left:d,width:k-d}),g.$header_right_inner.css({left:-d})):
g.$header_left.css({width:k}))};b.createColDefs=function(){for(var g=this.that,n=g.colModel,a=g.initH,c=g.finalH,g=g.options.freezeCols,b=[],e=[],d=0;d<=c;d++){if(d<a&&d>=g&&(d=a,d>c))throw"initH>finalH";var k=n[d];k.hidden||(b.push({column:k,colIndx:d}),k.postRender&&"function"==typeof k.postRender&&e.push({column:k,colIndx:d}))}this.colDef=b;this.prColDef=e};b._generateTables=function(g,n,a){a=a||{};var c=this.that,b=c.options,e=b.bootstrap,d=b.numberCell,k=!0,h=1*b.freezeRows,m=0,q=a.other,f=this.odd;
n=q?a.data.length-1:n;q?a=a.data:(a=c.pdata,this.setFrozenRip(a,h));if(q||null!=g&&null!=n){m=["pq-grid-table"];e.on&&m.push(e.tbody);b.columnBorders&&m.push("pq-td-border-right");b.rowBorders&&m.push("pq-td-border-top");m.push(b.wrap?"pq-wrap":"pq-no-wrap");b=["<table class='"+m.join(" ")+"' >"];b.push("<tr class='pq-row-hidden'>");if(d.show){var l=d.width;b.push("<td style='width:"+l+"px;' ></td>")}m=this.colDef;d=0;for(e=m.length;d<e;d++)l=m[d],c=l.colIndx,l=l.column.outerWidth,b.push("<td style='width:",
l,"px;' pq-col-indx='",c,"'></td>");b.push("</tr>");for(m=0;m<=n;m++)m<g&&m>=h&&(m=g),d=a[m],e=m,d&&d.pq_hidden||(f[e]=k=!k,c=d.pq_detail&&d.pq_detail.show,this._generateRow(d,e,b,q,c),c&&this._generateDetailRow(d,e,b));b.push("</table>");return b.join("")}};b.appendRow=function(g){var n=this.that,a=n.pdata,c=n.colModel,b=n.finalV;b+g>a.length&&(g=a.length-b);if(g){if(1<g)throw"noRows > 1";n._trigger("beforeTableView",null,{pageData:a,initV:b,finalV:b,initH:n.initH,finalH:n.finalH,colModel:c});n.refreshRow({rowIndxPage:b,
refresh:!1})}return g};b.prependRow=function(g){var n=this.that,a=n.options.freezeRows,c=n.calcVisibleRows(n.pdata,0,a),b=n.pdata,e=n.initV,d=n.colModel;if(n._mergeCells){if(c)for(c=0;c<a;c++)n.refreshRow({rowIndxPage:c,refresh:!1});n.refreshRow({rowIndxPage:e+1,refresh:!1})}n._trigger("beforeTableView",null,{pageData:b,initV:e,finalV:e,initH:n.initH,finalH:n.finalH,colModel:d});n.refreshRow({rowIndxPage:e,refresh:!1});return g};b.removeTopRow=function(g){for(var n=this.that,a=n.options.freezeRows,
c=n.calcVisibleRows(n.pdata,0,a),b=n.$tbl,e=l([]),d=0;d<b.length;d++)var k=l(b[d]).children("tbody").children("tr:gt(0)").slice(c,g+c),e=e.add(k);e.remove();if(n._mergeCells){if(c)for(d=0;d<a;d++)n.refreshRow({rowIndxPage:d,refresh:!1});n.refreshRow({rowIndxPage:n.initV,refresh:!1})}};b.removeBottomRow=function(g){var n=this.that.$tbl;if(g)for(var a=0;a<n.length;a++)l(n[a]).children("tbody").children("tr:gt(0)").slice(-g).remove()};b.format=function(){var g=l.datepicker,n=pq.formatNumber;return function(a,
c,b){if("date"==b){if(!isNaN(Date.parse(a)))return g.formatDate(c,new Date(a))}else return n(a,c)}}();b.renderCell=function(g){var n=this.that,a=[],c=[],b=g.Export,d=!1,e=this.options,h=["pq-grid-cell"];if(!g.other&&!b&&n._mergeCells){g=n.iMerge.renderCell(g);if(null==g)return"";g.rowspan&&(a.push("rowspan='"+g.rowspan+"'","colspan='"+g.colspan+"'"),e.mergeModel.flex||(d=!0,h.push("pq-merge-cell")));g.style&&c.push(g.style);g.cls&&h.push(g.cls)}var m=g.rowData,q=g.column,f=g.colIndx,l=q.dataIndx,
s=e.freezeCols,e=e.columnBorders;if(m){b||(a.push("pq-col-indx='"+f+"'"),"right"==q.align?h.push("pq-align-right"):"center"==q.align&&h.push("pq-align-center"),f==s-1&&e&&h.push("pq-last-frozen-col"),(f=q.cls)&&h.push(f),(f=n.iSelection.dirty?null:m.pq_cellselect)&&f[l]&&h.push(n.iCells.hclass));var y,s=m[l],f=(f=q.format)?this.format(s,f,q.dataType):s;g.dataIndx=l;g.cellData=s;g.formatVal=f;if(q.render&&(y=q.render.call(n,g))&&"string"!=typeof y){var s=y.attr,e=y.cls,p=y.style;s&&a.push(s);e&&h.push(e);
p&&c.push(p);y=y.text}null==y&&q._render&&(y=q._render.call(n,g));y&&"string"!=typeof y&&(s=y.attr,e=y.cls,p=y.style,s&&a.push(s),e&&h.push(e),p&&c.push(p),y=y.text);null==y&&(y=f);if(b)return y;if(""===y||void 0==y)y="&nbsp;";(g=m.pq_cellcls)&&(g=g[l])&&h.push(g);if(m=m.pq_cellattr)if(l=m[l]){var l=k(l),D;for(D in l)m=l[D],"style"==D?c.push(m):a.push(D+'="'+m+'"')}c=c.length?" style='"+c.join("")+"' ":"";return["<td class='",h.join(" "),"' ",a.join(" "),c," >",d?"<div class='pq-merge-cell-div'><div><div class='pq-merge-inner'>":
"",y,d?"</div></div></div>":"","</td>"].join("")}};b.setFrozenRip=function(g,n){if(g){for(var a;n--&&(a=g[n])&&a.pq_hidden;);this.frozenRip=n}};b.refreshRow=function(g,n){var a=this.that.pdata[g];this._generateRow(a,g,n,null,a.pq_detail&&a.pq_detail.show)};b._generateRow=function(g,n,a,c,b){var e=["pq-grid-row"];this.frozenRip===n&&e.push("pq-last-frozen-row");b&&e.push("pq-detail-master");var d=this.that,h=this.options,m=h.rowInit;b=h.numberCell;var q="",f="",l=d.rowIndxOffset,s=n+l;m&&(m=m.call(d,
{rowData:g,rowIndxPage:n,rowIndx:s}))&&(m.cls&&e.push(m.cls),q+=m.attr?" "+m.attr:"",f+=m.style?m.style:"");h.stripeRows&&this.odd[n]&&e.push("pq-grid-oddRow");g.pq_rowselect&&e.push(d.iRows.hclass);d=g.pq_rowcls;null!=d&&e.push(d);if(d=g.pq_rowattr){var d=k(d),y;for(y in d)q+=" "+y+'="'+d[y]+'"'}f=f?"style='"+f+"'":"";a.push("<tr pq-row-indx='",n,"' class='",e.join(" "),"' ",q," ",f," >");b.show&&a.push(["<td pq-col-indx='-1' class='pq-grid-number-cell'>",c?"&nbsp;":s+1,"</td>"].join(""));g={rowIndx:n+
l,rowIndxPage:n,other:c,rowData:g};n=this.colDef;c=0;for(e=n.length;c<e;c++)y=n[c],b=y.colIndx,g.column=y.column,g.colIndx=b,a.push(this.renderCell(g));a.push("</tr>");return a};b._generateDetailRow=function(g,n,a){var c=["pq-grid-row pq-detail-child"],b=this.that,e=b.options,d=e.numberCell;e.stripeRows&&this.odd[n]&&c.push("pq-grid-oddRow");g.pq_rowselect&&c.push(b.iRows.hclass);g=g.pq_rowcls;null!=g&&c.push(g);a.push("<tr pq-row-indx='"+n+"' class='"+c.join(" ")+"' >");d.show&&a.push("<td class='pq-grid-number-cell'>&nbsp;</td>");
a.push("<td class='pq-grid-cell pq-detail-child' colSpan='20'></td>");a.push("</tr>");return a};b={widgetEventPrefix:"pqgrid",_create:function(){var g=this,n=this.options,c=n.dataModel,b=n.bootstrap,e=b.on,k=n.roundCorners&&!e,m=n.ui,f=n.sortModel;this.BS_on=e;n.collapsible||(n.collapsible={on:!1,collapsed:!1});n.flexHeight&&(n.height="flex");n.flexWidth&&(n.width="flex");if(c.sortIndx){f.on=n.sortable;f.type=c.sorting;var x=[],z=c.sortIndx,c=c.sortDir;if(l.isArray(z)){for(var A=0;A<z.length;A++){var p=
c&&c[A]?c[A]:"up";x.push({dataIndx:z[A],dir:p})}f.single=!1}else x.push({dataIndx:z,dir:c?c:"up"}),f.single=!0;f.sorter=x}!1===n.virtualXHeader&&(n.virtualXHeader=null);this.setEditorPosTimer();this.iGenerateView=new d(this);this.iRefresh=new a.cRefresh(this);this.iKeyNav=new q(this);this.iIsValid=new h(this);this.tables=[];this.$tbl=null;this.iColModel=new a.cColModel(this);this.iSort=new a.cSort(this);this.iHeader=new a.cHeader(this);this._initTypeColumns();f=this.element;f.on("scroll"+this.eventNamespace,
function(){this.scrollTop=this.scrollLeft=0});x=e?b.grid:m.grid;z=e?"":m.header_o;c=e?"":m.bottom;b=e?b.top:m.top;f.empty().addClass("pq-grid "+x+" "+(k?" ui-corner-all":"")).html(["<div class='pq-grid-top ",b," ",k?" ui-corner-top":"","'><div class='pq-grid-title",k?" ui-corner-top":"","'>&nbsp;</div></div><div class='pq-grid-center' ><div class='pq-header-outer ",z,"'></div><div class='pq-grid-cont-outer' ><div class='pq-grid-cont' tabindex='0'></div></div></div><div class='pq-grid-bottom ",c," ",
k?" ui-corner-bottom":"","'><div class='pq-grid-footer'></div></div>"].join(""));this.$bottom=l("div.pq-grid-bottom",f);this._trigger("render",null,{dataModel:this.options.dataModel,colModel:this.colModel});this.$top=l("div.pq-grid-top",f);n.showTop||this.$top.css("display","none");this.$title=l("div.pq-grid-title",f);n.showTitle||this.$title.css("display","none");k=this.$grid_center=l("div.pq-grid-center",f).on("scroll",function(){this.scrollTop=0});this.$header_o=l("div.pq-header-outer",this.$grid_center).on("scroll",
function(){this.scrollLeft=this.scrollTop=0});this.$footer=l("div.pq-grid-footer",f);this.$cont_o=l(".pq-grid-cont-outer",k);b=this.$cont=l("div.pq-grid-cont",k);l(window).bind("resize"+g.eventNamespace+" orientationchange"+g.eventNamespace,function(n,a){g.onWindowResize(n,a)});b.on("click",".pq-grid-cell,.pq-grid-number-cell",function(n){if(!0!==l.data(n.target,g.widgetName+".preventClickEvent")&&l(n.target).closest(".pq-grid")[0]==g.element[0])return g._onClickCell(n)});b.on("click","tr.pq-grid-row",
function(n){if(!0!==l.data(n.target,g.widgetName+".preventClickEvent")&&l(n.target).closest(".pq-grid")[0]==g.element[0])return g._onClickRow(n)});b.on("contextmenu","td.pq-grid-cell",function(n){if(l(n.target).closest(".pq-grid")[0]==g.element[0])return g._onRightClickCell(n)});b.on("contextmenu","tr.pq-grid-row",function(n){if(l(n.target).closest(".pq-grid")[0]==g.element[0])return g._onRightClickRow(n)});b.on("dblclick","td.pq-grid-cell",function(n){if(l(n.target).closest(".pq-grid")[0]==g.element[0])return g._onDblClickCell(n)});
b.on("dblclick","tr.pq-grid-row",function(n){if(l(n.target).closest(".pq-grid")[0]==g.element[0])return g._onDblClickRow(n)});b.on("blur",function(){g.onblur()});b.on("focus",function(){g.onfocus()});b.on("mousedown",function(n){if(1===n.which){var a=l(n.target);if(a.closest(".pq-grid")[0]==g.element[0]){var c;c=a.closest(".pq-grid-cell:not(.pq-detail-child)");if(c.length&&(n.currentTarget=c[0],c=g._onCellMouseDown(n),!1===c))return!1;if(!n.isPropagationStopped()){a=a.closest(".pq-grid-row");if(a.length&&
(n.currentTarget=a[0],c=g._onRowMouseDown(n),!1===c))return!1;if(!n.isPropagationStopped())return g._onContMouseDown(n)}}}});b.on("mouseenter","td.pq-grid-cell",function(n){if(l(n.target).closest(".pq-grid")[0]==g.element[0])return g._onCellMouseEnter(n,l(this))});b.on("mouseenter","tr.pq-grid-row",function(n){if(l(n.target).closest(".pq-grid")[0]==g.element[0])return g._onRowMouseEnter(n,l(this))});b.on("mouseleave","td.pq-grid-cell",function(n){if(l(n.target).closest(".pq-grid")[0]==g.element[0])return g._onCellMouseLeave(n,
l(this))});b.on("mouseleave","tr.pq-grid-row",function(n){if(l(n.target).closest(".pq-grid")[0]==g.element[0])return g._onRowMouseLeave(n,l(this))});b.on("keyup",function(n){l(n.target).closest(".pq-grid")[0]==g.element[0]&&g._trigger("keyUp",n,null)});k.bind("mousewheel DOMMouseScroll",function(n){return g._onMouseWheel(n)});this.$hvscroll=l("<div class='pq-hvscroll-square ui-widget-content'></div>").appendTo(k);e=l("<div class='pq-vscroll'></div>").appendTo(k);this.prevVScroll=0;b=n.scrollModel;
void 0===b.lastColumn&&n.virtualX&&(b.lastColumn="auto");this.vscroll=pq.scrollbar(e,{pace:b.pace,theme:b.theme,bootstrap:n.bootstrap,steps:n.virtualY&&!b.smooth,direction:"vertical",cur_pos:0,pageRight:function(){g.iKeyNav.pageDown()},pageLeft:function(){g.iKeyNav.pageUp()},drag:function(n,a){g.iMouseSelection.syncViewWithScrollBarVert(a.ratio)},scroll:function(n,a){g.iRefresh.refreshVscroll(a)}});e=l("<div class='pq-hscroll'></div>").appendTo(k);"flex"===n.height&&e.css("position","relative");this.hscroll=
pq.scrollbar(e,{direction:"horizontal",pace:b.pace,bootstrap:n.bootstrap,theme:b.theme,steps:n.virtualX&&!b.smooth,cur_pos:0,drag:function(n,a){g.iMouseSelection.syncViewWithScrollBarHor(a.ratio)},scroll:function(){n.virtualX&&!n.scrollModel.smooth&&g.refresh()}});n.selectionModel["native"]||this.disableSelection();k.bind("keydown.pq-grid",function(n){l(n.target).closest(".pq-grid")[0]==g.element[0]&&g._onKeyPressDown(n)});this._refreshTitle();this.iRows=new a.cRows(this);this.iCells=new a.cCells(this);
this.generateLoading();this._initPager();this._refreshResizable();this._refreshDraggable();this.iResizeColumns=new a.cResizeColumns(this);this._mouseInit()},_mouseDown:function(g){var n=this;if(l(g.target).closest(".pq-editor-focus").length)this._blurEditMode=!0,window.setTimeout(function(){n._blurEditMode=!1},0);else return this._saveDims(),this._mousePQUpDelegate=function(g){return n._mousePQUp(g)},l(document).bind("mouseup"+this.eventNamespace,this._mousePQUpDelegate),this._super(g)},destroy:function(){this._trigger("destroy");
this._super();window.clearInterval(this._refreshEditorPosTimer);this.autoResizeTimeout&&clearTimeout(this.autoResizeTimeout);for(var g in this)delete this[g];this.options=void 0;l.fragments={}},_setOption:function(g,n){var a=this.options,c=a.dataModel;if("height"===g)"flex"===n?(c=this.vscroll,n&&c&&c.widget().hasClass("pq-sb-vert")&&(a.virtualY?c.option("cur_pos",0):c.option("ratio",0)),this.hscroll.widget().css("position","relative")):"flex"===a.height&&this.hscroll.widget().css("position",""),
a[g]=n;else if("width"===g&&"flex"==n)a[g]=n,c=this.hscroll,n&&c&&c.widget().hasClass("pq-sb-horiz")&&(a.virtualX?c.option("cur_pos",0):c.option("ratio",0));else if("title"==g)a[g]=n,this._refreshTitle();else if("roundCorners"==g)(a[g]=n)?(this.element.addClass("ui-corner-all"),this.$top.addClass("ui-corner-top"),this.$bottom.addClass("ui-corner-bottom")):(this.element.removeClass("ui-corner-all"),this.$top.removeClass("ui-corner-top"),this.$bottom.removeClass("ui-corner-bottom"));else if("virtualX"==
g)a[g]=n,this.hscroll.option("steps",n);else if("virtualY"==g)a[g]=n,this.vscroll.option("steps",n);else if("freezeCols"==g)n=parseInt(n),!isNaN(n)&&0<=n&&n<=this.colModel.length-2&&(a[g]=n);else if("freezeRows"==g)n=parseInt(n),!isNaN(n)&&0<=n&&(a[g]=n);else if("resizable"==g)a[g]=n,this._refreshResizable();else if("draggable"==g)a[g]=n,this._refreshDraggable();else if("scrollModel"==g)a[g]=n;else if("dataModel"==g)n.data!==c.data&&c.dataUF&&(c.dataUF.length=0),a[g]=n;else{if("groupModel"==g)throw"use groupOption() to set groupModel options.";
"pageModel"==g?a[g]=n:"selectionModel"===g?a[g]=n:"colModel"===g||"columnTemplate"==g?(a[g]=n,this.iColModel.init()):"disabled"===g?(this._super(g,n),!0===n?this._disable():this._enable()):"numberCell"===g?(a[g]=n,this.iRefresh.decidePanes()):"strLoading"===g?(a[g]=n,this._refreshLoadingString()):"showTop"===g?(a[g]=n,this.$top.css("display",n?"":"none")):"showTitle"===g?(a[g]=n,this.$title.css("display",n?"":"none")):"showToolbar"===g?(a[g]=n,this._toolbar.widget().css("display",n?"":"none")):"toolbar"==
g?a[g]=n:"collapsible"===g?(a[g]=n,this._createCollapse()):"showBottom"===g?(a[g]=n,this.$bottom.css("display",n?"":"none")):a[g]=n}return this}};b.options={cancel:"input,textarea,button,select,option,.pq-no-capture,.ui-resizable-handle",trigger:!1,bootstrap:{on:!1,thead:"table table-striped table-condensed table-bordered",tbody:"table table-condensed",grid:"panel panel-default",top:"",btn:"btn btn-default",groupModel:{icon:["glyphicon-triangle-bottom","glyphicon-triangle-right"]},header_active:"active"},
ui:{on:!0,grid:"ui-widget ui-widget-content",top:"ui-widget-header",bottom:"ui-widget-header",header_o:"ui-widget-header",header:"ui-state-default",header_active:"ui-state-active"},cls:{cont_inner:"pq-grid-cont-inner",cont_inner_b:"pq-grid-cont-inner-b"},distance:3,collapsible:{on:!0,toggle:!0,collapsed:!1,_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1E3}},colModel:null,columnBorders:!0,dataModel:{data:[],dataUF:[],cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},
direction:"",draggable:!1,editable:!0,editModel:{cellBorderWidth:0,pressToEdit:!0,clicksToEdit:2,filterKeys:!0,keyUpDown:!0,reInt:/^([\-]?[1-9][0-9]*|[\-]?[0-9]?)$/,reFloat:/^[\-]?[0-9]*\.?[0-9]*$/,onBlur:"validate",saveKey:l.ui.keyCode.ENTER,onSave:"nextFocus",onTab:"nextFocus",allowInvalid:!1,invalidClass:"pq-cell-red-tr pq-has-tooltip",warnClass:"pq-cell-blue-tr pq-has-tooltip",validate:!0},editor:{select:!1,type:"textbox"},groupModel:{on:!1,title:[],titleDefault:"{0} ({1})",header:!0,headerMenu:!0,
menuItems:["merge","fixCols","grandSummary"],fixCols:!0,icon:["ui-icon-triangle-1-se","ui-icon-triangle-1-e"],dataIndx:[],collapsed:[],dir:[],showSummary:[],summaryEdit:!0,refreshOnChange:!0},summaryOptions:{number:"avg,sum,max,min",date:"count,max,min",string:"count"},summaryTitle:{avg:"Avg: {0}",count:"Count: {0}",max:"Max: {0}",min:"Min: {0}",sum:"Sum: {0}"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},
freezeCols:0,freezeRows:0,freezeBorders:!0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",_maxColWidth:"99%",_minColWidth:50,minWidth:100,numberCell:{width:30,title:"",resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,rPPOptions:[10,20,50,100]},resizable:!1,roundCorners:!0,rowBorders:!0,rowHeight:25,scrollModel:{pace:"fast",smooth:!1,horizontal:!0,lastColumn:"auto",autoFit:!1,theme:!0},selectionModel:{type:"cell",onTab:"nextFocus",row:!0,mode:"block"},
swipeModel:{on:!0,speed:20,ratio:.15,repeat:20},showBottom:!0,showHeader:!0,showTitle:!0,showToolbar:!0,showTop:!0,sortable:!0,sql:!1,stripeRows:!0,title:"&nbsp;",treeModel:null,virtualX:!1,virtualY:!1,width:"auto",wrap:!0,hwrap:!0};l.extend(!0,b.options,{strAdd:"Add",strDelete:"Delete",strEdit:"Edit",strGroup_header:"Drag a column here to group by that column",strGroup_merge:"Merge cells",strGroup_fixCols:"Fix columns",strGroup_grandSummary:"Grand summary",strLoading:"Loading",strNoRows:"No rows to display."});
l.widget("paramquery._pqGrid",l.ui.mouse,b);b=a._pqGrid.prototype;b.readCell=function(g,n,a,c,b){n=n.dataIndx;return a&&!1===a.isRootCell(c,b,"o")?void 0:g[n]};b.saveCell=function(g,n,a){g[n.dataIndx]=a};b._destroyResizable=function(){var g=this.element,n=g.data();(n.resizable||n.uiResizable||n["ui-resizable"])&&g.resizable("destroy")};b._disable=function(){null==this.$disable&&(this.$disable=l("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};b._enable=function(){this.$disable&&
(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};b._destroy=function(){this.loading&&this.xhr.abort();this._destroyResizable();this._destroyDraggable();this._mouseDestroy();this.element.off(this.eventNamespace);l(window).unbind(this.eventNamespace);l(document).unbind(this.eventNamespace);this.element.empty().css("height","").css("width","").removeClass("pq-grid ui-widget ui-widget-content ui-corner-all").removeData()};b.collapse=function(g){var n=this,a=this.element,c=this.options.collapsible,
b=c.$collapse.children("span"),e=function(){a.css("overflow","hidden");b.addClass("ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-n");a.hasClass("ui-resizable")&&a.resizable("destroy");n._toolbar&&n._toolbar.disable();c.collapsed=!0;c._collapsed=!0;c.animating=!1;n._trigger("collapse")};g=g?g:{};if(c._collapsed)return!1;c.htCapture=a.height();!1===g.animate?(a.height(23),e()):(c.animating=!0,a.animate({height:"23px"},function(){e()}))};b.expand=function(g){var n=this,a=this.element,
c=this.options.collapsible,b=c.htCapture,e=c.$collapse.children("span"),d=function(){a.css("overflow","");c._collapsed=!1;c.collapsed=!1;n._refreshResizable();c.refreshAfterExpand&&n.refresh();e.addClass("ui-icon-circle-triangle-n").removeClass("ui-icon-circle-triangle-s");n._toolbar&&n._toolbar.enable();c.animating=!1;n._trigger("expand")};g=g?g:{};if(!1===c._collapsed)return!1;!1===g.animate?(a.height(b),d()):(c.animating=!0,a.animate({height:b},function(){d()}))};b._createCollapse=function(){var g=
this,n=this.$top,a=this.BS_on,c=this.options.collapsible;c.$stripe||(n=l("<div class='pq-slider-icon pq-no-capture'  ></div>").appendTo(n),c.$stripe=n);c.on?c.$collapse||(c.$collapse=l(a?p("collapse-down"):f("circle-triangle-n")).appendTo(c.$stripe).click(function(n){c.collapsed?g.expand():g.collapse()})):c.$collapse&&(c.$collapse.remove(),delete c.$collapse);c.collapsed&&!c._collapsed?g.collapse({animate:!1}):!c.collapsed&&c._collapsed&&g.expand({animate:!1});c.toggle?c.$toggle||(c.$toggle=l(a?p("fullscreen"):
f("arrow-4-diag")).prependTo(c.$stripe).click(function(n){g.toggle()})):c.$toggle&&(c.$toggle.remove(),delete c.$toggle)};b.toggle=function(){var g=this.options,n=g.collapsible,a=this.element,c,b=this._maxim;c=b?"min":"max";var e=l(document.body);if(!1===this._trigger("beforeToggle",null,{state:c}))return!1;"min"==c?(g=b.eleObj,n=b.docObj,this.option({height:g.height,width:g.width,maxHeight:g.maxHeight,maxWidth:g.maxWidth}),a[0].style.cssText=g.cssText,e[0].style.cssText=n.cssText,l("html").css({overflow:"visible"}),
window.scrollTo(n.scrollLeft,n.scrollTop),this._maxim=null):(g={height:g.height,width:g.width,cssText:a[0].style.cssText,maxHeight:g.maxHeight,maxWidth:g.maxWidth},this.option({height:"100%",width:"100%",maxHeight:null,maxWidth:null}),a.css(l.extend({position:"fixed",left:0,top:0,margin:0},n.css)),n={scrollLeft:l(window).scrollLeft(),scrollTop:l(window).scrollTop(),cssText:e[0].style.cssText},e.css({height:0,width:0,overflow:"hidden",position:"static"}),l("html").css({overflow:"hidden"}),window.scrollTo(0,
0),this._maxim={eleObj:g,docObj:n});this._trigger("toggle",null,{state:c});this._refreshResizable();this.refresh();l(window).trigger("resize",{$grid:a,state:c})};b._mouseCapture=function(g){var n=this.options;return n.virtualX&&n.virtualY&&!n.scrollModel.smooth||!g.target?!1:l(g.target).closest(".pq-grid")[0]==this.element[0]?(g=n.swipeModel,!1==g.on||"touch"==g.on&&!l.support.touch?!1:!0):!1};b._saveDims=function(){var g=this.$tbl,n=this.$tbl_header;if(g)for(var a=0;a<g.length;a++){var c=g[a],b=
l(c);b.data("offsetHeight",Math.round(c.offsetHeight)-1);b.data("scrollWidth",Math.round(c.scrollWidth))}if(n)for(a=0;a<n.length;a++)c=n[a],g=l(c).parent(),g.data("offsetHeight",Math.round(c.offsetHeight)),g.data("scrollWidth",Math.round(c.scrollWidth))};b._mousePQUp=function(g){l(document).unbind("mouseup"+this.eventNamespace,this._mousePQUpDelegate);this._trigger("mousePQUp",g,null)};b._mouseStart=function(g){this.blurEditor({force:!0});return!0};b._mouseDrag=function(g){return!1==this._trigger("mouseDrag",
g,null)?!1:!0};b._mouseStop=function(g){return!1==this._trigger("mouseStop",g,null)?!1:!0};var c,e;b.onWindowResize=function(g,n){var a=this.options,b=this.element,d=b.parent();if(n){var k=n.$grid;if(k&&(k==b||0==b.closest(k).length))return}if(d.length&&(d[0]==document.body||"fixed"==b.css("position")?(b=window.innerHeight?window.innerHeight:l(window).height(),d=l(window).width()):(b=d.height(),d=d.width()),null==c||b!=c||d!=e)&&(c=b,e=d,!(l.support.touch&&a.editModel.indices&&l(document.activeElement).is(".pq-editor-focus")))){var h=
this,a=a.autoSizeInterval,a=void 0===a?0:a;this.autoResizeTimeout&&(clearTimeout(this.autoResizeTimeout),delete this.autoResizeTimeout);this.autoResizeTimeout=window.setTimeout(function(){h._refreshAfterResize();delete h.autoResizeTimeout},a)}};b._onMouseWheel=function(g){this._saveDims();var n=this.options,a=0,c=!1;g=g.originalEvent;var b=g.wheelDeltaX,e=g.wheelDeltaY,d=g.wheelDelta;if(b&&Math.abs(b)>Math.abs(e)){if("flex"==n.width)return!0;c=!0;a=b/120}else if(d){if(!this.iRefresh.vscroll)return!0;
a=d/120}else if(g.detail){if(!this.iRefresh.vscroll)return!0;a=-1*g.detail/3}a*=3;g=c?this.hscroll:this.vscroll;e=parseInt(g.option("cur_pos"));b=parseInt(g.option("num_eles"));if(!n.scrollModel.smooth&&(c&&n.virtualX||!c&&n.virtualY)){a=0<a?Math[1>a?"ceil":"floor"](a):Math[-1>a?"ceil":"floor"](a);n=e-a;0>n?n=0:n>b-1&&(n=b-1);if(n==e)return!0;g.option("cur_pos",e-a);g.scroll()}else{n=g.option("ratio");a=n-a/(b-1);1<a?a=1:0>a&&(a=0);if(n==a)return!0;g.option("ratio",a);g.drag()}return!1};b._onDblClickCell=
function(g){var n=l(g.currentTarget),a=this.getCellIndices({$td:n}),c=a.rowIndxPage,b=c+this.rowIndxOffset,a=a.colIndx;if(null!=a){if(!1==this._trigger("cellDblClick",g,{$td:n,rowIndxPage:c,rowIndx:b,colIndx:a,column:this.colModel[a],rowData:this.pdata[c]}))return!1;1<this.options.editModel.clicksToEdit&&this.isEditableRow({rowIndx:b})&&this.isEditableCell({colIndx:a,rowIndx:b})&&this.editCell({rowIndxPage:c,colIndx:a})}};b._onClickCont=function(g){};b._onClickRow=function(g){var a=l(g.currentTarget),
c=parseInt(a.attr("pq-row-indx")),b=c+this.rowIndxOffset;if(!isNaN(c)&&!1==this._trigger("rowClick",g,{$tr:a,rowIndxPage:c,rowIndx:b,rowData:this.pdata[c]}))return!1};b._onRightClickRow=function(g){var a=l(g.currentTarget),c=parseInt(a.attr("pq-row-indx")),b=c+this.rowIndxOffset;if(!isNaN(c)&&!1==this._trigger("rowRightClick",g,{$tr:a,rowIndxPage:c,rowIndx:b,rowData:this.pdata[c]}))return!1};b._onDblClickRow=function(g){var a=l(g.currentTarget),c=parseInt(a.attr("pq-row-indx")),b=this.getRowIndxOffset();
if(!1==this._trigger("rowDblClick",g,{$tr:a,rowIndxPage:c,rowIndx:c+b,rowData:this.pdata[c]}))return!1};b.getValueFromDataType=function(g,a,c){if("date"==a)return a=Date.parse(g),isNaN(a)?"":c?a:g;if("object"==a)return g;if("integer"==a)a=parseInt(g);else if("float"==a)a=parseFloat(g);else return"bool"==a?(a=l.trim(g).toLowerCase(),0==a.length?null:"true"==a||"yes"==a||"1"==a?!0:"false"==a||"no"==a||"0"==a?!1:Boolean(a)):l.trim(g);return isNaN(a)||null==a?null==g?g:null:a};var h=function(g){this.that=
g},m=h.prototype;m._isValidCell=function(g){var a=this.that,c=g.column,b=c.validations;if(!b||!b.length)return{valid:!0};var e=g.value,d=c.dataType,k=function(g){return a.getValueFromDataType(g,d,!0)};g=g.rowData;if(!g)throw"rowData required.";for(var h=0;h<b.length;h++){var m=b[h],q=m.type,f=!1,l=m.msg,s=m.value;if(!1!==m.on&&(null==e&&"function"!=typeof q?f=!1:"minLen"==q?(e=k(e),s=k(s),e.length>=s&&(f=!0)):"nonEmpty"==q?null!=e&&""!==e&&(f=!0):"maxLen"==q?(e=k(e),s=k(s),e.length<=s&&(f=!0)):"gt"==
q?(e=k(e),s=k(s),e>s&&(f=!0)):"gte"==q?(e=k(e),s=k(s),e>=s&&(f=!0)):"lt"==q?(e=k(e),s=k(s),e<s&&(f=!0)):"lte"==q?(e=k(e),s=k(s),e<=s&&(f=!0)):"neq"==q?(e=k(e),s=k(s),e!==s&&(f=!0)):"regexp"==q?(new RegExp(s)).test(e)&&(f=!0):"function"==typeof q?(s={column:c,value:e,rowData:g,msg:l},!1==q.call(a,s)?(f=!1,s.msg!=l&&(l=s.msg)):f=!0):f=!0,!f))return{valid:!1,msg:l,column:c,warn:m.warn,dataIndx:c.dataIndx,validation:m}}return{valid:!0}};m.isValidCell=function(g){var a=this.that,c=g.rowData,b=g.rowIndx,
e=g.value,d=g.valueDef,k=g.column,h=g.focusInvalid,m=a.options,q=m.bootstrap,f=g.allowInvalid,p=k.dataIndx,s=m.validation,y=m.warning,E=m.editModel,D=E.invalidClass,F=E.warnClass,E=document.activeElement;if(g.checkEditable&&!1==a.isEditableCell({rowIndx:b,dataIndx:p}))return{valid:!0};g=this._isValidCell({column:k,value:e,rowData:c});var e=g.valid,k=g.warn,K=g.msg;if(e)a.data({rowData:c,dataIndx:p,data:"pq_valid"})&&(a.removeClass({rowData:c,rowIndx:b,dataIndx:p,cls:F+" "+D}),a.removeData({rowData:c,
dataIndx:p,data:"pq_valid"}));else var s=l.extend({},k?y:s,g.validation),I=s.css,J=s.cls,P=s.icon,O=s.style;if(f||k){if(e)return{valid:!0};a.addClass({rowData:c,rowIndx:b,dataIndx:p,cls:k?F:D});a.data({rowData:c,dataIndx:p,data:{pq_valid:{css:I,icon:P,style:O,msg:K,cls:J}}});return g}if(!e){if(null==b&&(c=a.getRowIndx({rowData:c,dataUF:!0}),b=c.rowIndx,null==b||c.uf))return g.uf=c.uf,g;if(h){var N;if(!d)a.goToPage({rowIndx:b}),b={rowIndx:b,dataIndx:p},b=a.normalize(b),N=a.getCell(b),a["cell"==m.selectionModel.type?
"setSelection":"scrollCell"](b),a.focus(b);else if(l(E).hasClass("pq-editor-focus")&&(d=m.editModel.indices)){m=d.rowIndx;d=d.dataIndx;if(null!=b&&b!=m)throw"incorrect usage of isValid rowIndx: "+b;if(p!=d)throw"incorrect usage of isValid dataIndx: "+p;a.editCell({rowIndx:m,dataIndx:p})}var G;if(N||(G=a.getEditCell())&&G.$cell){a=N||G.$cell;a.attr("title",K);N="tooltip";G="open";q.on&&q.tooltip&&(N=q.tooltip,G="show");try{a[N]("destroy")}catch(L){}a[N]({trigger:"manual",position:{my:"left center+5",
at:"right center"},content:function(){return(""==P?"":"<span class='ui-icon "+P+" pq-tooltip-icon'></span>")+K},open:function(g,a){var n=a.tooltip;J&&n.addClass(J);if(O){var c=n.attr("style");n.attr("style",c+";"+O)}I&&n.tooltip.css(I)}})[N](G)}}return g}if(d&&(G=a.getEditCell())&&G.$cell){a=G.$cell;a.removeAttr("title");try{a.tooltip("destroy")}catch(H){}}return{valid:!0}};b.isValid=function(g){return this.iIsValid.isValid(g)};m.isValid=function(g){g=g||{};var a=this.that,c=g.allowInvalid,b=g.focusInvalid,
e=g.checkEditable,c=null==c?!1:c,d=g.dataIndx;if(null!=d){var k=a.columns[d],h=g.rowData||a.getRowData(g),m=g.hasOwnProperty("value"),a=m?g.value:h[d],a=this.isValidCell({rowData:h,checkEditable:e,rowIndx:g.rowIndx,value:a,valueDef:m,column:k,allowInvalid:c,focusInvalid:b});return a.valid||a.warn?{valid:!0}:a}if(null!=g.rowIndx||null!=g.rowIndxPage||null!=g.rowData)for(var h=g.rowData||a.getRowData(g),q=a.colModel,m=[],f=0,l=q.length;f<l;f++){if(k=q[f],!k.hidden&&(d=k.dataIndx,a=h[d],a=this.isValidCell({rowData:h,
value:a,column:k,rowIndx:g.rowIndx,checkEditable:e,allowInvalid:c,focusInvalid:b}),!a.valid&&!a.warn))if(c)m.push({rowData:h,dataIndx:d,column:k});else return a}else{g=g.data?g.data:a.options.dataModel.data;m=[];if(!g)return null;f=0;for(l=g.length;f<l;f++){h=g[f];if(e&&(k=this.getRowIndx({rowData:h}).rowIndx,null==k||!1==a.isEditableRow({rowData:h,rowIndx:k})))continue;h=this.isValid({rowData:h,rowIndx:k,checkEditable:e,allowInvalid:c,focusInvalid:b});d=h.cells;if(!1===c){if(!h.valid)return h}else d&&
d.length&&(m=m.concat(d))}}return c&&m.length?{cells:m,valid:!1}:{valid:!0}};b.isValidChange=function(g){g=g||{};var a=this.getChanges(),a=a.updateList.concat(a.addList);g.data=a;return this.isValid(g)};b.isEditableRow=function(g){var a=this.options.editable;return null!=a?"function"==typeof a?a.call(this,this.normalize(g)):a:!0};b.isEditableCell=function(g){g=this.normalize(g);var a=g.column,c=a.editable;return g.checkVisible&&a.hidden?!1:null!=c?"function"==typeof c?c.call(this,g):c:!0};b._onContMouseDown=
function(g){this.blurEditor({blurIfFocus:!0});if(!1===this._trigger("contMouseDown",g,null))return!1;var a=l(g.target);g=a.closest(".pq-grid-cell,.pq-grid-number-cell");a=a.closest(".pq-grid-row");g.length||a.length||(g=this.$cont[0],g.setAttribute("tabindex",0),g.focus());return!0};b._onCellMouseDown=function(g){var a=l(g.currentTarget),c=this.getCellIndices({$td:a});if(null!=c.rowIndx)return c=this.iMerge.getRootCell(c.rowIndx,c.colIndx,"o"),c=this.normalize(c),c.$td=a,!1==this._trigger("cellMouseDown",
g,c)?!1:!0};b._onRowMouseDown=function(g){var a=l(g.currentTarget),c=this.getRowIndx({$tr:a});c.$tr=a;return!1==this._trigger("rowMouseDown",g,c)?!1:!0};b._onCellMouseEnter=function(g,a){var c=this.options,b=this.getCellIndices({$td:a});if(null!=b.rowIndx&&null!=b.colIndx){if(!1===this._trigger("cellMouseEnter",g,b))return!1;"cell"==c.hoverMode&&this.highlightCell(a);return!0}};b._onRowMouseEnter=function(g,a){var c=this.options,b=this.getRowIndx({$tr:a}),e=b.rowIndxPage;if(!1===this._trigger("rowMouseEnter",
g,b))return!1;"row"==c.hoverMode&&this.highlightRow(e);return!0};b._onCellMouseLeave=function(g,a){"cell"==this.options.hoverMode&&this.unHighlightCell(a);return!0};b._onRowMouseLeave=function(g,a){var c=this.getRowIndx({$tr:a}).rowIndxPage;"row"==this.options.hoverMode&&this.unHighlightRow(c);return!0};b.enableSelection=function(){this.element.removeClass("pq-disable-select").off("selectstart"+this.eventNamespace)};b.disableSelection=function(){this.element.addClass("pq-disable-select").on("selectstart"+
this.eventNamespace,function(g){if(g.target){var a=l(g.target);if(a.is("input,textarea,select")||a.closest(".pq-native-select").length)return!0;g.preventDefault()}})};b._onClickCell=function(g){var a=this.options.editModel,c=l(g.currentTarget),b=this.getCellIndices({$td:c}),b=this.iMerge.getRootCell(b.rowIndx,b.colIndx,"o"),b=this.normalize(b),e=b.rowIndx,d=b.colIndx;b.$td=c;b.evt=g;if(!1==this._trigger("cellClick",g,b))return!1;null==d||0>d||1==a.clicksToEdit&&this.isEditableRow({rowIndx:e})&&this.isEditableCell({colIndx:d,
rowIndx:e})&&this.editCell(b)};b._onRightClickCell=function(g){var a=l(g.currentTarget),c=this.getCellIndices({$td:a}),b=c.rowIndxPage,e=b+this.rowIndxOffset,c=c.colIndx,d=this.colModel;if(null!=c&&(d=d[c],!1==this._trigger("cellRightClick",g,{$td:a,rowIndxPage:b,rowIndx:e,colIndx:c,dataIndx:d.dataIndx,column:d,rowData:this.pdata[b]})))return!1};b.highlightCell=function(g){g.addClass("pq-grid-cell-hover ui-state-hover")};b.unHighlightCell=function(g){g.removeClass("pq-grid-cell-hover ui-state-hover")};
b.highlightRow=function(g){isNaN(g)||(g=this.getRow({rowIndxPage:g}))&&g.addClass("pq-grid-row-hover ui-state-hover")};b.unHighlightRow=function(g){isNaN(g)||(g=this.getRow({rowIndxPage:g}))&&g.removeClass("pq-grid-row-hover ui-state-hover")};b._getCreateEventData=function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}};b._findCellFromEvt=function(g){g=l(g.target).closest(".pq-grid-cell");if(null==g||0==g.length)return{rowIndxPage:null,colIndx:null,$td:null};
var a=this.getCellIndices({$td:g});a.$td=g;return a};b._initPager=function(){var g=this,a=g.options,c=a.pageModel;c.type&&(a={bootstrap:a.bootstrap,change:function(a,c){g.blurEditor({force:!0});var n=g.options.pageModel;void 0!=c.curPage&&(n.prevPage=n.curPage,n.curPage=c.curPage);void 0!=c.rPP&&(n.rPP=c.rPP);"remote"==n.type?g.remoteRequest({callback:function(){g._onDataAvailable({apply:!0,header:!1})}}):g.refreshView({header:!1,source:"pager"})},refresh:function(a){g.refreshDataAndView()}},a=l.extend(a,
c),this.pagerW=pq.pager(c.appendTo?c.appendTo:this.$footer,a))};b.generateLoading=function(){this.$loading&&this.$loading.remove();this.$loading=l("<div class='pq-loading'></div>").appendTo(this.element);l(["<div class='pq-loading-bg'></div><div class='pq-loading-mask ui-state-highlight'><div>",this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading);this.$loading.find("div.pq-loading-bg").css("opacity",.2)};b._refreshLoadingString=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)};
b.showLoading=function(){null==this.showLoadingCounter&&(this.showLoadingCounter=0);this.showLoadingCounter++;this.$loading.show()};b.hideLoading=function(){0<this.showLoadingCounter&&this.showLoadingCounter--;this.showLoadingCounter||this.$loading.hide()};b.refreshDataFromDataModel=function(g){g=g||{};var a=this.options,c=a.pageModel,b=a.dataModel.data,e,d=c.type;e=this._queueATriggers;for(var k in e){var h=e[k];delete e[k];this._trigger(k,h.evt,h.ui)}this._trigger("beforeRefreshData",null,{});this.rowIndxOffset=
0;"local"==d?(c.totalRecords=b.length,c.totalPages=a=Math.ceil(b.length/c.rPP),c.curPage>a&&(c.curPage=a),a&&!c.curPage&&(c.curPage=1),a=(c.curPage-1)*c.rPP,e=c.curPage*c.rPP,e>b.length&&(e=b.length),this.pdata=b.slice(a,e)):"remote"==d?(c.totalPages=a=Math.ceil(c.totalRecords/c.rPP),c.curPage>a&&(c.curPage=a),a&&!c.curPage&&(c.curPage=1),e=c.rPP,e>b.length&&(e=b.length),this.pdata=b.slice(0,e)):this.pdata=a.backwardCompat?b.slice(0):b;if("local"==d||"remote"==d)this.rowIndxOffset=c.rPP*(c.curPage-
1);this._trigger("dataReady",null,{source:g.source})};b.getQueryStringCRUD=function(){return""};b.remoteRequest=function(g){this.loading&&this.xhr.abort();g=g||{};var a=this,c="",b="",e=this.options,d=!1,k=this.colModel,h=e.dataModel,m=e.sortModel,q=e.filterModel,f=e.pageModel;if("function"==typeof h.getUrl)(e=h.getUrl.call(this,{colModel:k,dataModel:h,sortModel:m,groupModel:e.groupModel,pageModel:f,filterModel:q}))&&e.url&&(c=e.url),e&&e.data&&(b=e.data);else if("string"==typeof h.url){var c=h.url,
b={},e={},p={};"remote"==m.type&&(g.initBySort||this.sort({initByRemote:!0}),(m=this.iSort.getQueryStringSort())&&(b={pq_sort:m}));"remote"==f.type&&(p={pq_curpage:f.curPage,pq_rpp:f.rPP});"local"!=q.type&&(m=this.iFilterData.getQueryStringFilter())&&(d=!0,e={pq_filter:m});var m=h.postData,s=h.postDataOnce;m&&"function"==typeof m&&(m=m.call(this,{colModel:k,dataModel:h}));b=l.extend({pq_datatype:h.dataType},e,p,b,m,s)}c&&(this.loading=!0,this.showLoading(),this.xhr=l.ajax({url:c,dataType:h.dataType,
async:null==h.async?!0:h.async,cache:h.cache,contentType:h.contentType,type:h.method,data:b,beforeSend:function(g,c){if("function"==typeof h.beforeSend)return h.beforeSend.call(a,g,c)},success:function(c,b,e){"function"==typeof h.getData&&(c=h.getData.call(a,c,b,e));h.data=c.data;"remote"==f.type&&(c.curPage&&(f.curPage=c.curPage),c.totalRecords&&(f.totalRecords=c.totalRecords));a.hideLoading();a.loading=!1;a._trigger("load",null,{dataModel:h,colModel:k});g.callback&&g.callback();d&&(a._queueATriggers.filter=
{ui:{type:"remote",filterModel:q}})},error:function(g,c,b){a.hideLoading();a.loading=!1;if("function"==typeof h.error)h.error.call(a,g,c,b);else if("abort"!=b)throw"Error : "+b;}}))};b._refreshTitle=function(){this.$title.html(this.options.title)};b._destroyDraggable=function(){var g=this.element,a=g.parent(".pq-wrapper");a.length&&a.data("draggable")&&(a.draggable("destroy"),this.$title.removeClass("pq-draggable pq-no-capture"),g.unwrap(".pq-wrapper"))};b._refreshDraggable=function(){var g=this.element,
a=this.$title;this.options.draggable?(a.addClass("pq-draggable pq-no-capture"),g.parent(".pq-wrapper").length||g.wrap("<div class='pq-wrapper' />"),g.parent(".pq-wrapper").draggable({handle:a})):this._destroyDraggable()};b._refreshResizable=function(){var g=this,a=this.element,c=this.options,b=-1<(c.width+"").indexOf("%"),e=-1<(c.height+"").indexOf("%"),d="auto"==c.width,k="flex"==c.width,h="flex"==c.height;if(!c.resizable||(h||e)&&(k||b||d))this._destroyResizable();else{var m="e,s,se";if(h||e)m=
"e";else if(k||b||d)m="s";b=!0;a.hasClass("ui-resizable")&&(e=a.resizable("option","handles"),m==e?b=!1:this._destroyResizable());b&&a.resizable({helper:"ui-state-default",handles:m,minWidth:c.minWidth,minHeight:c.minHeight?c.minHeight:100,delay:0,start:function(a,g){l(g.helper).css({opacity:.5,background:"#ccc",border:"1px solid steelblue"})},resize:function(a,g){},stop:function(a,n){var b=g.element,e=b[0],d=c.width,k=c.height,h=-1<(d+"").indexOf("%"),m=-1<(k+"").indexOf("%"),q=!1;e.style.width=
e.offsetWidth+3+"px";e.style.height=e.offsetHeight+3+"px";m||"flex"==k||(q=!0,c.height=e.offsetHeight);h||"auto"==d||"flex"==d||(q=!0,c.width=e.offsetWidth);g.refresh();b.css("position","relative");q&&l(window).trigger("resize")}})}};b._refreshAfterResize=function(){var a=this.options,c=a.width,b=a.height,a=-1!=(c+"").indexOf("%")?!0:!1,c="auto"===c,b=-1!=(b+"").indexOf("%")?!0:!1;(a||c||b)&&this.refresh()};b.refresh=function(a){this.iRefresh.refresh(a)};b.refreshView=function(a){null!=this.options.editModel.indices&&
this.blurEditor({force:!0});this.refreshDataFromDataModel(a);this.refresh(a)};b._refreshPager=function(){var a=this.options,c=a.pageModel,b=c.rPP,e=c.totalRecords;c.type?(c=a.pageModel,this.pagerW||this._initPager(),this.pagerW.option(c),e>b?this.$bottom.css("display",""):a.showBottom||this.$bottom.css("display","none")):(this.pagerW&&(this.pagerW.destroy(),this.pagerW=null),a.showBottom?this.$bottom.css("display",""):this.$bottom.css("display","none"))};b.getInstance=function(){return{grid:this}};
b.refreshDataAndView=function(a){if("remote"==this.options.dataModel.location){var c=this;this.remoteRequest({callback:function(){c._onDataAvailable(a)}})}else this._onDataAvailable(a)};b.getColIndx=function(a){var c=a.dataIndx;a=a.column;var b;if(a)b=!0;else if(void 0===c)throw"dataIndx / column NA";var e=this.colModel,d=e.length;if(b)for(c=0;c<d;c++){if(e[c]==a)return c}else if(c=this.colIndxs[c],null!=c)return c;return-1};b.getColumn=function(a){if(null==a.dataIndx)throw"dataIndx N/A";return this.columns[a.dataIndx]};
b._generateCellRowOutline=function(){var a=this.options,c=a.editModel;if(this.$div_focus){if(a.debug)throw"this.$div_focus already present assert failed";}else a=this.element,c.inline&&(a=this.getCell(c.indices),a.css("padding",0).empty()),this.$div_focus=l("<div class='pq-editor-outer'><div class='pq-editor-inner'></div></div>").appendTo(a),this.$div_focus.css("zIndex",a.zIndex()+5),c=l.extend({all:!0},c.indices),c=this.getCell(c),c.css("height",c[0].offsetHeight),c.empty(),this.refreshEditorPos()};
b._removeEditOutline=function(a){if(this.$div_focus){a=this.$div_focus.find(".pq-editor-focus");a.hasClass("hasDatepicker")&&a.datepicker("hide").datepicker("destroy");if(a[0]==document.activeElement){var c=this._blurEditMode;this._blurEditMode=!0;a.blur();this._blurEditMode=c}this.$div_focus.remove();delete this.$div_focus;a=this.options.editModel;c=l.extend({},a.indices);a.indices=null;c.rowData=void 0;this.refreshCell(c)}};b.refreshEditorPos=function(){var a=this.options.editModel,c=a.cellBorderWidth,
b=this.$div_focus,e=this.getCell(a.indices);if(!e||!e.length)return!1;var a=e[0].offsetWidth,d=e[0].offsetHeight,k=this.element.offset(),e=e.offset();b.css({height:d,width:a-1,borderWidth:c,left:e.left-k.left-1,top:e.top-k.top-1})};b.setEditorPosTimer=function(){var a=this,c=this.options;this._refreshEditorPosTimer&&(window.clearInterval(this._refreshEditorPosTimer),this._refreshEditorPosTimer=null);this._refreshEditorPosTimer=window.setInterval(function(){c.editModel.indices&&a.refreshEditorPos()},
200)};b.get$Tbl=function(a,c){var b=this.$tbl,e=[];if(b&&b.length){var d=this.pqpanes,k=this.options,h=k.freezeRows,k=k.freezeCols;d.h&&d.v?null==c?a>=h?e.push(b[2],b[3]):e.push(b[0],b[1]):e=c>=k&&a>=h?b[3]:c<k&&a>=h?b[2]:c>=k&&a<h?b[1]:b[0]:e=d.v?null==c?b:c>=k?b[1]:b[0]:d.h?a>=h?b[1]:b[0]:b[0];if(e)return l(e)}};b.scrollCell=function(a){this.scrollRow(a);this.scrollColumn(a)};b.scrollY=function(a){this.vscroll.option("cur_pos",a);this.vscroll.scroll()};b.scrollRow=function(a){var c=this.options;
a=this.normalize(a);var b=a.rowIndxPage,e=a.rowData;if(!this.pdata||b>=this.pdata.length||!e||e.pq_hidden)return!1;c.virtualY?this._scrollRowVirtual(a):this.iMouseSelection.scrollRowNonVirtual(a)};b._scrollRowVirtual=function(a){var c=this.options,b=a.rowIndxPage,e=this.iHierarchy?!0:!1,d=a.rowIndx;a=this.vscroll;var k=this.scrollCurPos,b=null==b?d-this.rowIndxOffset:b,d=parseInt(c.freezeRows);if(!(b<d)&&(c=this._calcCurPosFromRowIndxPage(b),null!=c)){c<k&&(a.option("cur_pos",c),a.scroll());var h=
this.get$Tbl(b);if(!h||!h.length)return null;var m=h.children("tbody").children("tr[pq-row-indx="+b+"]"),q=b=m.last();1<m.length&&(q=m.first());var f=b[0],m=parseInt(h.css("marginTop"));if(void 0==f)a.option("cur_pos",c),a.scroll();else{var f=f.offsetTop+f.offsetHeight,l=this.$cont[0].offsetHeight,p=this._getSBHeight(),q=q.prev("tr");if(!q.hasClass("pq-row-hidden")&&!q.hasClass("pq-last-frozen-row")&&f>l-p-m){q=f-(l-p-m);m=h.children().children("tr");f=h=0;d?(d=m.filter("tr.pq-last-frozen-row").last().next(),
0==d.length&&(d=m.filter("tr.pq-row-hidden").next())):d=m.filter("tr.pq-row-hidden").next();do{if(!d.length)break;h+=d[0].offsetHeight;if(d[0]==b[0])break;else if(e&&!1!=d.hasClass("pq-detail-child")||f++,h>=q)break;d=d.next()}while(1);e=k+f;e>c&&(e=c);k=a.option("num_eles");k<e+1&&(k=e+1);a.option({num_eles:k,cur_pos:e});a.scroll()}}}};b.blurEditor=function(a){if(this.$div_focus){var c=this.$div_focus.find(".pq-editor-focus");if(a&&a.blurIfFocus)document.activeElement==c[0]&&c.blur();else return c.triggerHandler("blur",
a)}};b._scrollColumnVirtual=function(a){var c=a.colIndx,b=this.hscroll,c=null==c?this.colIndxs[a.dataIndx]:c;a=this.options.freezeCols;var e=this._calcRightEdgeCol(c).width,d=this.iRefresh.getEContWd();if(e>d){for(var e=this.calcWidthCols(-1,c+1)-d,d=this.colModel,k=d.length,h=0,m=0,q=a;q<k;q++){var f=d[q];f.hidden||(h+=f.outerWidth);if(q==c){m=q-a-this._calcNumHiddenUnFrozens(q);break}else if(h>=e){m=q-a-this._calcNumHiddenUnFrozens(q)+1;break}}b.option("cur_pos",m);b.scroll();return!0}return c>=
a&&c<this.initH?(c=c-a-this._calcNumHiddenUnFrozens(c),b.option("cur_pos",c),b.scroll(),!0):!1};b.scrollColumn=function(a){var c=this.options;return"flex"!==c.width||c.maxWidth?c.virtualX?this._scrollColumnVirtual(a):this.iMouseSelection.scrollColumnNonVirtual(a):!1};b.selection=function(a){if(a){var c=a.method,b,e=a.type;"row"==e?b=this.iRows[c](a):"cell"==e&&(b=this.iCells[c](a));if("add"==c||"remove"==c||"removeAll"==c)this.iSelection.dirty=!0,this.iSelection._trigger();return b}a=this.iSelection;
a.isDirty()&&a.refresh();return a};b.goToPage=function(a){var c=this.options.pageModel;if("local"==c.type||"remote"==c.type){var b=a.rowIndx,e=c.rPP;a=null==a.page?Math.ceil((b+1)/e):a.page;a!=c.curPage&&(c.curPage=a,"local"==c.type?this.refreshView():this.refreshDataAndView())}};b.setSelection=function(a){if(null==a)return this.iSelection.removeAll(),!0;var c=this.pdata;if(!c||!c.length)return!1;a=this.normalize(a);var c=a.rowIndx,b=a.rowIndxPage,e=a.colIndx;a.rowData&&null==c&&(b=this.getRowIndx(a),
a.rowIndx=c=b.rowIndx,a.rowIndxPage=b.rowIndxPage);if(null==c||0>c||0>e||e>=this.colModel.length)return!1;this.goToPage(a);b=c-this.rowIndxOffset;this.scrollRow({rowIndxPage:b});null==e?this.range({r1:c}).select():(this.scrollColumn({colIndx:e}),this.range({r1:c,c1:e}).select());!1!==a.focus&&this.focus({rowIndxPage:b,colIndx:null==e?this.getFirstVisibleCI():e})};b.getColModel=function(){return this.colModel};b.saveEditCell=function(a){var c=this.options,b=c.editModel;if(!b.indices)return null;var e=
l.extend({},b.indices);a=a?a.evt:null;var d=e.rowIndxPage,b=d+this.rowIndxOffset,k=this.colModel[e.colIndx],e=k.dataIndx,h=this.pdata[d],m=c.dataModel,q;if(null==h)return null;if(null!=d){c=this.getEditCellData();if(l.isPlainObject(c)){q={};for(var f in c)q[f]=h[f]}else q=this.readCell(h,k);"<br>"==c&&(c="");null==q&&""===c&&(c=null);f={rowIndx:b,rowIndxPage:d,dataIndx:e,column:k,newVal:c,value:c,oldVal:q,rowData:h,dataModel:m};if(!1===this._trigger("cellBeforeSave",a,f))return!1;d={};k=!1;l.isPlainObject(c)?
(d=c,k=!0):d[e]=c;if(!1===this.updateRow({row:d,rowIndx:b,refresh:k,silent:!0,source:"edit",checkEditable:!1}))return!1;this._trigger("cellSave",a,f);return!0}};b._addInvalid=function(a){};b._digestData=function(a){if(!1===this._trigger("beforeValidate",null,a))return!1;var c=this.options,b=c.editModel,e=c.dataModel,d=e.data,k=c.colModel,h=c.pageModel,m=c.historyModel,q=a.validate,q=null==q?b.validate:q,f="remote"==h.type,l=a.allowInvalid,l=null==l?b.allowInvalid:l,p=c.trackModel,b=a.track,b=null==
b?null==c.track?p.on:c.track:b,s=a.history,s=null==s?m.on:s,y=this.iHistory,m=this.iUCData,E=a.checkEditable,E=null==E?!0:E,D=a.checkEditableAdd,D=null==D?E:D,p=this.saveCell,F=this.columns,K=this.colIndxs,I=a.source,J=this.rowIndxOffset,P=this.getValueFromDataType,O=a.rowList,N=O.length;d||(d=c.dataModel.data=[]);for(var G=[],L=0;L<N;L++){var H=O[L],M=H.newRow,T=H.rowData,Q=H.type,W=H.checkEditable,R=H.rowIndx,X=H.oldRow;null==W&&("update"==Q?W=E:"add"==Q&&(W=D));if("update"==Q){if(!X)throw"oldRow required while update";
if(W&&!0!==c.editable&&!1===this.isEditableRow({rowIndx:R,rowData:T}))continue}else if("delete"==Q){G.push(H);continue}if("add"==Q)for(var U=0,Y=k.length;U<Y;U++){var V=k[U],S=V.dataIndx;M[S]=M[S]}for(S in M)if(V=F[S],U=K[S],V)if(W&&null!=V.editable&&!1===this.isEditableCell({rowIndx:R,colIndx:U,dataIndx:S}))delete M[S];else{var Z=V.dataType,U=P(M[S],Z),Y=X?X[S]:void 0,Y=void 0!==Y?P(Y,Z):void 0;M[S]=U;if(q&&V.validations)if("edit"==I&&!1===l){if(V=this.isValid({focusInvalid:!0,dataIndx:S,rowIndx:R,
value:U}),!1==V.valid&&!V.warn)return!1}else V=this.iIsValid.isValidCell({column:V,rowData:"add"==Q?M:T,allowInvalid:l,value:U}),!1===V.valid&&(!1!==l||V.warn||delete M[S]);"update"==Q&&U===Y&&(delete M[S],X&&delete X[S])}if(M)if("update"==Q)for(S in M){G.push(H);break}else G.push(H)}O=a.rowList=G;N=O.length;if(!N)return"edit"==I?null:!1;s&&(y.increment(),y.push({rowList:O}));for(L=0;L<N;L++)if(H=O[L],Q=H.type,M=H.newRow,R=H.rowIndx,c=H.rowIndxPage,T=H.rowData,"update"==Q)for(S in b&&m.update({rowData:T,
row:M,refresh:!1}),M)V=F[S],U=M[S],p(T,V,U);else if("add"==Q)b&&m.add({rowData:M}),null==R&&null==c?d.push(M):(c=R-J,c=f?c:R,d.splice(c,0,M)),f&&h.totalRecords++;else if("delete"==Q){c=this.getRowIndx({rowData:T,dataUF:!0});k=c.uf;R=c.rowIndx;if(b)m["delete"]({rowIndx:R,rowData:T});c=R-J;c=f?c:R;k?e.dataUF.splice(R,1):(c=d.splice(c,1))&&c.length&&f&&h.totalRecords--}this._trigger("change",null,a);return!0};b.refreshColumn=function(a){a=this.normalize(a);var c=this.initV,b=this.finalV,e=this.options.freezeRows,
d=a.colIndx,k=a.dataIndx,h=a.column;a.skip=!0;for(var m=0;m<=b;m++)m<c&&m>=e&&(m=c),a.rowIndxPage=m,this.refreshCell(a);this._trigger("refreshColumn",null,{column:h,colIndx:d,dataIndx:k});this.iRefresh.softRefresh()};b.refreshCell=function(a){a=this.normalize(a);if(this.pdata){var c=a.skip,b=a.rowIndx,e=a.rowIndxPage,d=a.colIndx,k=this.iMerge;if(a.rowData){var h=this.getCell({all:!0,rowIndxPage:e,colIndx:d});if(h&&0<h.length){var m=a;k.ismergedCell(b,d)&&(m=k.getRootCell(b,d,"a"));var b=this.iGenerateView.renderCell(m),
q;b&&(h.replaceWith(b),(q=this._focusElement)&&q.rowIndxPage==e&&this.focus(),c||(this._trigger("refreshCell",null,a),this.iRefresh.softRefresh()))}}}};b.refreshRow=function(a){a=this.normalize(a);if(this.pdata){var c=a.rowIndx,b=a.rowIndxPage,e=this.options,d=e.freezeRows,k=a.rowData;if(!k||k.pq_hidden||b>this.finalV||b<this.initV&&b>=d)return null;var h=this.getRow({all:!0,rowIndxPage:b}),m,q=[];this.iGenerateView.refreshRow(b,q);q=q.join("");if(h&&h.length)h.replaceWith(q);else if(e.virtualY)if(b==
this.finalV)this.$tbl.append(q);else if(b==this.initV)for(e=this.$tbl,h=0;h<e.length;h++)l(e[h]).children("tbody").children(d?".pq-last-frozen-row":"tr:first").after(q);else throw"refreshRow > rip not found";else return!1;(m=this._focusElement)&&m.rowIndxPage==b&&this.focus();this._trigger("refreshRow",null,{rowData:k,rowIndx:c,rowIndxPage:b});!1!==a.refresh&&this.iRefresh.softRefresh();return!0}};b.quitEditMode=function(a){if(!this._quitEditMode){var c=!1,b=!1,e=!1,d=this.options.editModel,k=d.indices,
h=void 0;this._quitEditMode=!0;a&&(c=a.old,b=a.silent,e=a.fireOnly,h=a.evt);k&&(b||c||this._trigger("editorEnd",h,k),e||(this._removeEditOutline(a),d.indices=null));this._quitEditMode=null}};b.getViewPortRowsIndx=function(){return{beginIndx:this.initV,endIndx:this.finalV}};b.getViewPortIndx=function(){return{initV:this.initV,finalV:this.finalV,initH:this.initH,finalH:this.finalH}};b.getRowIndxOffset=function(){return this.rowIndxOffset};b.getEditCell=function(){var a=this.options.editModel;if(a.indices){var a=
this.getCell(a.indices),c=this.$div_focus.children(".pq-editor-inner"),b=c.find(".pq-editor-focus");return{$td:a,$cell:c,$editor:b}}return{}};b.editCell=function(a){a=this.normalize(a);var c=this.iMerge,b=a.rowIndx,e=a.colIndx;if(c.ismergedCell(b,e)&&(c=c.getRootCell(b,e,"o"),c.rowIndx!=a.rowIndx||c.colIndx!=a.colIndx))return!1;this.scrollRow(a);this.scrollColumn(a);if((c=this.getCell(a))&&c.length)return this._editCell(a)};b.getFirstEditableColIndx=function(a){if(null==a.rowIndx)throw"rowIndx NA";
if(!this.isEditableRow(a))return-1;for(var c=this.colModel,b=0;b<c.length;b++)if(a.colIndx=b,this.isEditableCell(a)&&!c[b].hidden)return b;return-1};b.editFirstCellInRow=function(a){var c=this.rowIndxOffset,b=a.rowIndx;a=a.rowIndxPage;b=null==b?a+c:b;a=null==a?b-c:a;c=this.getFirstEditableColIndx({rowIndx:b});-1!=c&&this.editCell({rowIndxPage:a,colIndx:c})};b._editCell=function(c){var b=this.normalize(c),e=this;c=b.evt;var d=b.rowIndxPage,k=b.colIndx,h=e.pdata;if(!h||d>=h.length)return!1;var m=this.options,
q=m.editModel,h=h[d],f=b.rowIndx,p=this.colModel[k],A=p.dataIndx,C=e.readCell(h,p),s={rowIndx:f,rowIndxPage:d,cellData:C,rowData:h,dataIndx:A,colIndx:k,column:p},y=p.editor,y="function"==typeof y?y.call(this,s):y;void 0===y&&"function"==typeof m.geditor&&(y=m.geditor.call(this,s));if(!1!==y){y&&y.getData&&(q._getData=y.getData);var E=m.editor,D=y?l.extend({},E,y):E,m=!1;if(q.indices){y=q.indices;if(y.rowIndxPage==d&&y.colIndx==k){this.refreshEditorPos();var F=this.$div_focus.find(".pq-editor-focus");
window.setTimeout(function(){F.focus()},0);return!1}if(!1===this.blurEditor({evt:c}))return!1;this.quitEditMode({evt:c})}q.indices={rowIndxPage:d,rowIndx:f,colIndx:k,column:p,dataIndx:A};this._generateCellRowOutline();y=this.$div_focus.children(".pq-editor-inner");"right"==p.align?y.addClass("pq-align-right"):"center"==p.align?y.addClass("pq-align-center"):y.addClass("pq-align-left");s.$cell=y;var K,I=D.type,b=null==b.select?D.select:b.select,J=D.init,P=D.valueIndx,O=D.dataMap,N=D.mapIndices,N=N?
N:{},G=D.cls||"",G="function"===typeof G?G.call(this,s):G;K="pq-editor-focus "+G;var G=K+" pq-cell-editor ",L=D.attr||"",L="function"===typeof L?L.call(this,s):L,H=D.style||"",H=(H="function"===typeof H?H.call(this,s):H)?"style='"+H+"'":"";s.cls=K;s.attr=L;"function"==typeof I&&(K=I.call(this,s))&&(I=K);E._type=I;"checkbox"==I?(D=D.subtype,y.html("<input "+(C?"checked='checked'":"")+" class='"+G+"' "+L+" "+H+" type=checkbox name='"+A+"' />"),E=y.children("input"),"triple"==D&&(E.pqval({val:C}),y.click(function(a){l(this).children("input").pqval({incr:!0})}))):
"textarea"==I||"select"==I||"textbox"==I?("textarea"==I?K="<textarea class='"+G+"' "+L+" "+H+" name='"+A+"' ></textarea>":"select"==I?(E=D.options||[],"function"===typeof E&&(E=E.call(this,s)),G=[L," class='",G,"' ",H," name='",A,"'"].join(""),K=a.select({options:E,attr:G,prepend:D.prepend,labelIndx:D.labelIndx,valueIndx:P,groupIndx:D.groupIndx,dataMap:O})):K="<input class='"+G+"' "+L+" "+H+" type=text name='"+A+"' />",l(K).appendTo(y).val("select"==I&&null!=P&&(N[P]||this.columns[P])?N[P]?h[N[P]]:
h[P]:C)):I&&"contenteditable"!=I||(y.html("<div contenteditable='true' tabindx='0' "+H+" "+L+" class='"+G+"'></div>"),y.children().html(C),m=!0);"function"==typeof J&&J.call(this,s);var e=this,F=y.children(".pq-editor-focus"),M=q.filterKeys;(C=p.editModel)&&void 0!==C.filterKeys&&(M=C.filterKeys);var T={$cell:y,$editor:F,dataIndx:A,column:p,colIndx:k,rowIndx:f,rowIndxPage:d,rowData:h};q.indices=T;F.data({FK:M}).on("click",function(a){l(this).focus()}).on("keydown",function(a){e.iKeyNav._keyDownInEdit(a)}).on("keypress",
function(a){return e.iKeyNav._keyPressInEdit(a,{FK:M})}).on("keyup",function(a){return e.iKeyNav._keyUpInEdit(a,{FK:M})}).on("blur",function(a,c){var g=e.options.editModel,b=g.onBlur,d="save"==b,n="validate"==b,k=g.cancelBlurCls,h=c?c.force:!1;if(!e._quitEditMode&&!e._blurEditMode&&g.indices){g=l(a.target);if(!h){if(!1===e._trigger("editorBlur",a,T)||!b||k&&g.hasClass(k))return;if(g.hasClass("hasDatepicker")){if(g.datepicker("widget").is(":visible"))return!1}else if(g.hasClass("ui-autocomplete-input")){if(g.autocomplete("widget").is(":visible"))return}else if(g.hasClass("ui-multiselect")){if(l(".ui-multiselect-menu").is(":visible")||
l(document.activeElement).closest(".ui-multiselect-menu").length)return}else if(g.hasClass("pq-select-button")&&(l(".pq-select-menu").is(":visible")||l(document.activeElement).closest(".pq-select-menu").length))return}e._blurEditMode=!0;if(!e.saveEditCell({evt:a,silent:h||d||!n})&&!h&&n)return e._deleteBlurEditMode(),!1;e.quitEditMode({evt:a});e._deleteBlurEditMode()}}).on("focus",function(a){e._trigger("editorFocus",a,T)});e._trigger("editorBegin",c,T);F.focus();window.setTimeout(function(){!1===
l(document.activeElement).hasClass("pq-editor-focus")&&(e.element?e.element.find(".pq-editor-focus"):l()).focus()},0);if(b)if(m)try{var Q=F[0],W=document.createRange();W.selectNodeContents(Q);var R=window.getSelection();R.removeAllRanges();R.addRange(W)}catch(X){}else F.select()}};b._deleteBlurEditMode=function(a){var c=this;a=a?a:{};c._blurEditMode&&(a.timer?window.setTimeout(function(){delete c._blurEditMode},0):delete c._blurEditMode)};b.getRow=function(a){var c=this.normalize(a);a=c.rowIndxPage;
var c=c.all?this.$tbl:this.get$Tbl(a),b=l();if(c&&c.length){var e=c.children("tbody");null!=a&&(b=e.children("tr[pq-row-indx="+a+"]"),b.length>c.length&&(b=b.filter(".pq-detail-master")))}return b};b.getCell=function(a){var c=a.all,b=this.options,e=this.normalize(a);a=e.rowIndxPage;var d=e.rowIndx,k=e.colIndx,h=this.iMerge;if(h.ismergedCell(d,k)){b=h.getRootCell(d,k,"a");d=h.getRootCell(d,k,"o");if(!(a===d.rowIndxPage&&k===d.colIndx||a===b.rowIndxPage&&k===b.colIndx))return l();a=b.rowIndxPage;k=
d.colIndx}else if(a>=b.freezeRows&&(a<this.initV||a>this.finalV)||k>=b.freezeCols&&(k<this.initH||k>this.finalH)||!e.rowData||!e.column||e.rowData.pq_hidden||e.column.hidden)return l();return(c=c?this.$tbl:this.get$Tbl(a,k))&&c.length?c.children().children("tr[pq-row-indx="+a+"]").children("[pq-col-indx="+k+"]"):l()};b.getCellHeader=function(a){var c=a.colIndx;a=a.dataIndx;c=null==c?this.colIndxs[a]:c;a=this.$tbl_header;var b=this.options.freezeCols;return a?(1<a.length&&(a=c>=b?l(a[1]):l(a[0])),
c=a.find("[pq-col-indx="+c+"].pq-grid-col-leaf")):l()};b.getEditorIndices=function(){var a=this.options.editModel.indices;return a?l.extend({},a):null};b.getEditCellData=function(){var a=this.options,c=a.editModel,b=c.indices;if(!b)return null;var e=b.colIndx,d=b.rowIndxPage,k=b.rowIndx,h=this.colModel[e],m=h.editor,q=a.editor,a=m?l.extend({},q,m):q,f=a.valueIndx,p=a.labelIndx,m=(m=a.mapIndices)?m:{},C=h.dataIndx,s=this.$div_focus.children(".pq-editor-inner"),y,E=c._getData||a.getData;c._getData=
void 0;if("function"==typeof E)y=E.call(this,{$cell:s,rowData:b.rowData,dataIndx:C,rowIndx:k,rowIndxPage:d,column:h,colIndx:e});else if(c=q._type,"checkbox"==c)y=s.children(),y="triple"==a.subtype?y.pqval():y.is(":checked")?!0:!1;else if("contenteditable"==c)y=s.children().html();else if((b=s.find('*[name="'+C+'"]'))&&b.length)if("select"==c&&null!=f)if(m[f]||this.columns[f]){if(y={},y[m[f]?m[f]:f]=b.val(),y[m[p]?m[p]:p]=b.find("option:selected").text(),a=a.dataMap)if(c=b.find("option:selected").data("map"))for(b=
0;b<a.length;b++)e=a[b],y[m[e]?m[e]:e]=c[e]}else y=b.val();else y=b.val();else(b=s.find(".pq-editor-focus"))&&b.length&&(y=b.val());return y};b.getCellIndices=function(a){a=a.$td;if(null==a||0==a.length||a.closest(".pq-grid")[0]!=this.element[0])return{};var c=a.parent("tr").attr("pq-row-indx"),b;null!=c&&(c=parseInt(c),b=c+this.rowIndxOffset);a=a.attr("pq-col-indx");null!=a&&(a=parseInt(a));return this.iMerge.getRootCell(b,a,"o")};b.getRowsByClass=function(a){var c=this.options,b="remote"==c.pageModel.type,
e=this.rowIndxOffset,c=c.dataModel.data,d=[];if(null==c)return d;for(var k=0,h=c.length;k<h;k++){var m=c[k];if(m.pq_rowcls&&(a.rowData=m,this.hasClass(a))){var m={rowData:m},q=b?k+e:k,f=q-e;m.rowIndx=q;m.rowIndxPage=f;d.push(m)}}return d};b.getCellsByClass=function(a){var c=this.options,b="remote"==c.pageModel.type,e=this.rowIndxOffset,c=c.dataModel.data,d=[];if(null==c)return d;for(var k=0,h=c.length;k<h;k++){var m=c[k],q=b?k+e:k,f=m.pq_cellcls;if(f)for(var l in f)f={rowData:m,rowIndx:q,dataIndx:l,
cls:a.cls},this.hasClass(f)&&(f=this.normalize(f),d.push(f))}return d};b.data=function(a){var c=a.dataIndx,b=a.colIndx,c=null!=b?this.colModel[b].dataIndx:c,b=a.data,e=null==b||"string"==typeof b?!0:!1;a=a.rowData||this.getRowData(a);if(!a)return{data:null};if(null==c){c=a.pq_rowdata;if(e){var d;null!=c&&(d=null==b?c:c[b]);return{data:d}}b=l.extend(!0,a.pq_rowdata,b);a.pq_rowdata=b}else{var k=a.pq_celldata;if(e)return null!=k&&(c=k[c],d=null==b||null==c?c:c[b]),{data:d};k||(a.pq_celldata={});b=l.extend(!0,
a.pq_celldata[c],b);a.pq_celldata[c]=b}};b.attr=function(a){var c=a.rowIndx,b=a.dataIndx,e=a.colIndx,b=null!=e?this.colModel[e].dataIndx:b,e=a.attr,d=null==e||"string"==typeof e?!0:!1,h=this.rowIndxOffset,m=a.refresh;a=a.rowData||this.getRowData(a);if(!a)return{attr:null};d||!1===m||null!=c||(c=this.getRowIndx({rowData:a}).rowIndx);if(null==b){b=a.pq_rowattr;if(d){var q;null!=b&&(q=null==e?b:b[e]);return{attr:q}}e=l.extend(!0,a.pq_rowattr,e);a.pq_rowattr=e;!1!==m&&null!=c&&(c=this.getRow({rowIndxPage:c-
h}))&&(b=k(e),c.attr(b))}else{var f=a.pq_cellattr;if(d)return null!=f&&(c=f[b],q=null==e||null==c?c:c[e]),{attr:q};f||(a.pq_cellattr={});e=l.extend(!0,a.pq_cellattr[b],e);a.pq_cellattr[b]=e;!1!==m&&null!=c&&(c=this.getCell({rowIndxPage:c-h,dataIndx:b}))&&(b=k(e),c.attr(b))}};var k=function(a){var c={},b;for(b in a){var e=a[b];if(e)if("title"==b)e=e.replace(/\"/g,"&quot;"),c[b]=e;else if("style"==b&&"object"==typeof e){var d=[],k,h;for(h in e)(k=e[h])&&d.push(h+":"+k);(e=d.join(";")+(d.length?";":
""))&&(c[b]=e)}else"object"==typeof e&&(e=JSON.stringify(e)),c[b]=e}return c};b.removeData=function(a){var c=a.dataIndx,b=a.colIndx,c=null!=b?this.colModel[b].dataIndx:c,b=a.data,b=null==b?[]:b,b="string"==typeof b?b.split(" "):b,e=b.length,d=a.rowData||this.getRowData(a);if(d)if(null==c){if(c=d.pq_rowdata){if(e)for(a=0;a<e;a++){var k=b[a];delete c[k]}e&&!l.isEmptyObject(c)||delete d.pq_rowdata}}else if((d=d.pq_celldata)&&d[c]){var h=d[c];if(e)for(a=0;a<e;a++)k=b[a],delete h[k];e&&!l.isEmptyObject(h)||
delete d[c]}};b.removeAttr=function(a){var c=a.rowIndx,b=a.dataIndx,e=a.colIndx,b=null!=e?this.colModel[e].dataIndx:b,d=a.attr,d=null==d?[]:d,d="string"==typeof d?d.split(" "):d,k=d.length,e=c-this.rowIndxOffset,h=a.refresh,m=a.rowData||this.getRowData(a);if(m)if(!1!==h&&null==c&&(c=this.getRowIndx({rowData:m}).rowIndx),null==b){if(b=m.pq_rowattr){if(k)for(a=0;a<k;a++){var q=d[a];delete b[q]}else for(q in b)d.push(q);k&&!l.isEmptyObject(b)||delete m.pq_rowattr}!1!==h&&null!=c&&d.length&&(d=d.join(" "),
(c=this.getRow({rowIndxPage:e}))&&c.removeAttr(d))}else{if((m=m.pq_cellattr)&&m[b]){var f=m[b];if(k)for(a=0;a<k;a++)q=d[a],delete f[q];else for(q in f)d.push(q);k&&!l.isEmptyObject(f)||delete m[b]}!1!==h&&null!=c&&d.length&&(d=d.join(" "),(c=this.getCell({rowIndxPage:e,dataIndx:b}))&&c.removeAttr(d))}};b.normalize=function(a){var c={},b;for(b in a)c[b]=a[b];var e=c.rowIndx,d=c.rowIndxPage;a=c.dataIndx;b=c.colIndx;if(null!=d||null!=e){var k=this.rowIndxOffset,e=null==e?parseInt(d,10)+k:e,d=null==d?
parseInt(e,10)-k:d;c.rowIndx=e;c.rowIndxPage=d;c.rowData=c.rowData||this.getRowData(c)}if(null!=b||null!=a)e=this.colModel,a=null==a?e[b]?e[b].dataIndx:void 0:a,b=null==b?this.colIndxs[a]:b,c.column=e[b],c.colIndx=b,c.dataIndx=a;return c};b.addClass=function(a){var c=this.normalize(a),b=c.rowIndxPage,e=c.dataIndx,d=pq.arrayUnique;a=c.cls;var k=c.refresh,h=c.rowData;if(h)if(!1!==k&&null==b&&(b=this.getRowIndx({rowData:h}).rowIndxPage),null==e){var e=h.pq_rowcls,m;m=d((e?e+" "+a:a).split(/\s+/)).join(" ");
h.pq_rowcls=m;!1!==k&&null!=b&&(b=this.getRow({rowIndxPage:b}))&&b.addClass(a)}else{c=[];"function"!=typeof e.push?c.push(e):c=e;var q=h.pq_cellcls;q||(q=h.pq_cellcls={});for(var h=0,f=c.length;h<f;h++)e=c[h],m=(m=q[e])?m+" "+a:a,m=d(m.split(/\s+/)).join(" "),q[e]=m,!1!==k&&null!=b&&(e=this.getCell({rowIndxPage:b,dataIndx:e}))&&e.addClass(a)}};b.removeClass=function(a){var c=this.normalize(a),b=c.rowIndx,e=c.rowData,d=c.dataIndx;a=c.cls;c=c.refresh;if(e){var k=e.pq_cellcls,h=e.pq_rowcls;!1!==c&&null==
b&&(b=this.getRowIndx({rowData:e}).rowIndx);if(null==d)h&&(e.pq_rowcls=this._removeClass(h,a),null!=b&&!1!==c&&(b=this.getRow({rowIndx:b}))&&b.removeClass(a));else if(k){h=[];"function"!=typeof d.push?h.push(d):h=d;for(var m=0,q=h.length;m<q;m++){var d=h[m],f=k[d];f&&(e.pq_cellcls[d]=this._removeClass(f,a),null!=b&&!1!==c&&(d=this.getCell({rowIndx:b,dataIndx:d}))&&d.removeClass(a))}}}};b.hasClass=function(a){var c=a.dataIndx,b=a.cls;a=this.getRowData(a);b=new RegExp("\\b"+b+"\\b");return a?null==
c?(c=a.pq_rowcls)&&b.test(c)?!0:!1:(a=a.pq_cellcls)&&a[c]&&b.test(a[c])?!0:!1:null};b._removeClass=function(a,c){if(a&&c){for(var b=a.split(/\s+/),e=c.split(/\s+/),d=[],k=0,h=b.length;k<h;k++){for(var m=b[k],q=!1,f=0,l=e.length;f<l;f++)if(m===e[f]){q=!0;break}q||d.push(m)}return 1<d.length?d.join(" "):1===d.length?d[0]:null}};b.getRowIndx=function(a){var c=a.$tr,b=a.rowData,e=this.rowIndxOffset;if(b){var d=this.options.dataModel,c=this.get_p_data(),k=!1;a=a.dataUF?d.dataUF:null;d=!1;if(c)for(var h=
0,m=c.length;h<m;h++)if(c[h]==b){d=!0;break}if(!d&&a)for(k=!0,h=0,m=a.length;h<m;h++)if(a[h]==b){d=!0;break}return d?{rowIndxPage:k?void 0:h-e,uf:k,rowIndx:h,rowData:b}:{}}if(null==c||0==c.length)return{};b=c.attr("pq-row-indx");if(null==b)return{};b=parseInt(b);return{rowIndxPage:b,rowIndx:b+e}};b.search=function(a){var c=this.options,b=a.row;a=a.first;for(var e=[],d=this.rowIndxOffset,k="remote"==c.pageModel.type,c=c.dataModel.data,h=0,m=c.length;h<m;h++){var q=c[h],f=!0,l;for(l in b)b[l]!==q[l]&&
(f=!1);if(f&&(q=this.normalize({rowIndx:k?h+d:h}),e.push(q),a))break}return e};var q=function(a){this.options=a.options;this.that=a},m=q.prototype;m._incrRowIndx=function(a,c){var b=this.that,e=a;c=1;for(var b=b.pdata,d=0,k=a+1,h=b.length;k<h&&(b[k].pq_hidden||(d++,e=k,d!=c));k++);return e};m._decrRowIndx=function(a,c){var b=a,e=this.that.pdata;c=1;for(var d=0,k=a-1;0<=k&&(e[k].pq_hidden||(d++,b=k,d!=c));k--);return b};m._decrRowIndx2=function(a,c){var b=this.that,e=a+b.rowIndxOffset,d=b.iMerge,b=
b.pdata;if(d.ismergedCell(e,c)){var k=d.getRootCell(e,c,"a"),e=d.getData(e,c,"proxy_cell");c=k.colIndx;c=e?e.colIndx:c}for(e=a-1;0<=e;e--)if(!b[e].pq_hidden){a=e;break}return{rowIndxPage:a,colIndx:c}};m._incrRowIndx2=function(a,c){var b=this.that,e=a+b.rowIndxOffset,d=b.iMerge,k,b=b.pdata;if(k=d.ismergedCell(e,c)){var h=d.getRootCell(e,c,"a"),e=d.getData(e,c,"proxy_cell");c=h.colIndx;a=k.rowspan?a+k.rowspan-1:0;c=e?e.colIndx:c}e=a+1;for(d=b.length;e<d;e++)if(!b[e].pq_hidden){a=e;break}return{rowIndxPage:a,
colIndx:c}};b.addColumn=function(a){for(var c=a.colList||[{colIndx:a.colIndx,column:a.column}],b=!1!==a.history,e=this.options.colModel,d=0;d<c.length;d++){var k=c[d].colIndx,h=c[d].column;void 0==h.dataIndx&&(h.dataIndx=Math.random());null==k&&(k=c.colIndx=e.length);e.splice(k,0,h)}this.iColModel.init();b&&(this.iHistory.increment(),c.type="add",this.iHistory.push({colList:c}));this._trigger("addColumn",null,{colList:c});!1!==a.refresh&&this.refreshView()};b.deleteColumn=function(a){for(var c=a.colList||
[{colIndx:a.colIndx}],b=!1!==a.history,e=this.options.colModel,d=c.length-1;0<=d;d--){var k=c[d],h=e.splice(k.colIndx,1)[0];k.column=h}this.iColModel.init();b&&(this.iHistory.increment(),c.type="delete",this.iHistory.push({colList:c}));this._trigger("deleteColumn",null,{colList:c});!1!==a.refresh&&this.refreshView()};m._incrIndx=function(a,c,b){var e=this.that,d=e.iMerge,k,h,m,q,f=e.pdata,l=e.rowIndxOffset,p=e[b?"getLastVisibleRIP":"getFirstVisibleRIP"](),s=e.colModel,y=s.length;if(null==c){if(a==
p)return null;a=this[b?"_incrRowIndx":"_decrRowIndx"](a);return{rowIndxPage:a}}do{h=a+l;if(e=d.ismergedCell(h,c))!q&&(k=d.getData(h,c,"proxy_cell"))&&(m=k.rowIndx-l,f[m].pq_hidden||(a=m)),f[a].pq_hidden&&(a=d.getRootCell(h,c).rowIndxPage),!q&&b&&(c+=e&&e.colspan?e.colspan-1:0);c=b?c+1:c-1;if(b&&c>=y||!b&&0>c){if(a==p)return null;a=this[b?"_incrRowIndx":"_decrRowIndx"](a);c=b?0:y-1}q=s[c]}while(q&&q.hidden);return{rowIndxPage:a,colIndx:c}};m._incrEditIndx=function(a,c,b){var e=this.that,d=e.colModel,
k=d.length,h=e.iMerge,m,q=e.rowIndxOffset,f=e[b?"getLastVisibleRIP":"getFirstVisibleRIP"]();do{var l=a+q;if(m=h.ismergedCell(l,c)){if(l=h.getData(l,c,"proxy_edit_cell"))l=l.rowIndx,a=l-q;c=b?c+m.colspan:c-1}else c=b?c+1:c-1;if(b&&c>=k||!b&&0>c){if(a==f)return null;do if(a=this[b?"_incrRowIndx":"_decrRowIndx"](a),c=e.isEditableRow({rowIndxPage:a}),a==f&&!1==c)return null;while(!1==c);c=b?0:k-1}l=a+q;if(m=h.ismergedCell(l,c))a=h.getRootCell(l,c,"o"),h.setData(a.rowIndx,a.colIndx,{proxy_edit_cell:{rowIndx:l,
colIndx:c}}),l=a.rowIndx,c=a.colIndx;m=d[c];var p=e.isEditableCell({rowIndx:l,colIndx:c,checkVisible:!0}),s=m.editor,s="function"==typeof s?s.call(e,e.normalize({rowIndx:l,colIndx:c})):s;a=l-q}while(m&&(m.hidden||!1==p||!1===s));return{rowIndxPage:a,colIndx:c}};m.getMergeCell=function(a,c){var b=this.that,e=b.options,d=b.iMerge,k,h;d.ismergedCell(a,c)&&(h=d.getRootCell(a,c,"o"),d.setData(h.rowIndx,h.colIndx,{proxy_cell:{rowIndx:a,colIndx:c}}),e.virtualY&&(k=d.getRootCell(a,c,"a")));k||(a=this.getVisibleRowIndx(a),
c=this.getVisibleColIndx(c),k=b.normalize({rowIndx:a,colIndx:c}));return k};m.getVisibleRowIndx=function(a){for(var c=this.that,b=c.pdata.length,e=a-c.rowIndxOffset,d=c.getRowData({rowIndx:a});d.pq_hidden&&e<b-1;)e++,a++,d=c.getRowData({rowIndx:a});return a};m.getVisibleColIndx=function(a){for(var c=this.that.colModel,b=c.length,e=c[a];e.hidden&&a<b-1;)a++,e=c[a];return a};b._onKeyPressDown=function(a){if(0<l(a.target).closest(".pq-grid-header").length)return!1==this._trigger("headerKeyDown",a,null)?
!1:!0;if(!1===this.iKeyNav._bodyKeyPressDown(a)||!1==this._trigger("keyDown",a,null))return!1};m._saveAndMove=function(a,c){if(null==a)return c.preventDefault(),!1;var b=this.that,e=a.rowIndxPage,d=a.colIndx;b._blurEditMode=!0;if(!1===b.saveEditCell({evt:c})||!b.pdata)return b.pdata||b.quitEditMode(c),b._deleteBlurEditMode({timer:!0,msg:"_saveAndMove saveEditCell"}),c.preventDefault(),!1;b.quitEditMode(c);if(a.incr)var k=this[a.edit?"_incrEditIndx":"_incrIndx"](e,d,!c.shiftKey),e=k?k.rowIndxPage:
e,d=k?k.colIndx:d;b.scrollRow({rowIndxPage:e});b.scrollColumn({colIndx:d});this.select({rowIndx:e+b.rowIndxOffset,colIndx:d,evt:c});a.edit&&b._editCell({rowIndxPage:e,colIndx:d});b._deleteBlurEditMode({timer:!0,msg:"_saveAndMove"});c.preventDefault();return!1};m._keyPressInEdit=function(a,c){var b=this.that,e=b.options.editModel.indices;c=c?c:{};var d=c.FK,k="Backspace Left Right Up Down Del Home End".split(" "),h=e.column.dataType;return a.key&&-1!==l.inArray(a.key,k)?!0:!1===b._trigger("editorKeyPress",
a,l.extend({},e))||d&&("float"==h||"integer"==h)&&(b="float"==h?"0123456789.-":"0123456789-",e=(e=a.charCode)?e:a.keyCode,(e=String.fromCharCode(e))&&-1==b.indexOf(e))?!1:!0};m.getValText=function(a){a=a[0].nodeName.toLowerCase();var c="text";-1!=l.inArray(a,["input","textarea","select"])&&(c="val");return c};m._keyUpInEdit=function(a,c){var b=this.that,e=b.options;c=c?c:{};var d=c.FK,e=e.editModel,k=e.indices;b._trigger("editorKeyUp",a,l.extend({},k));b=k.column.dataType;if(d&&("float"==b||"integer"==
b)){var d=l(a.target),k="integer"==b?e.reInt:e.reFloat,e=this.getValText(d),h=d.data("oldVal"),m=d[e]();if(!1==k.test(m))if(k.test(h))d[e](h);else if(b="float"==b?parseFloat(h):parseInt(h),isNaN(b))d[e](0);else d[e](b)}};m._keyDownInEdit=function(a){var c=this.that,b=c.options,e=b.editModel.indices;if(e){var d=l(a.target),k=l.ui.keyCode,h=b.editModel,m=l.extend({},e),e=m.rowIndxPage,b=m.colIndx,q=m.column.editModel,h=q?l.extend({},h,q):h,q=this.getValText(d);d.data("oldVal",d[q]());if(!1==c._trigger("editorKeyDown",
a,m))return!1;if(a.keyCode==k.TAB||a.keyCode==h.saveKey)return c=a.keyCode==k.TAB?h.onTab:h.onSave,m={rowIndxPage:e,colIndx:b,incr:c?!0:!1,edit:"nextEdit"==c},this._saveAndMove(m,a);if(a.keyCode==k.ESCAPE)return c.quitEditMode({evt:a}),c.focus({rowIndxPage:e,colIndx:b}),a.preventDefault(),!1;if(a.keyCode==k.PAGE_UP||a.keyCode==k.PAGE_DOWN)return a.preventDefault(),!1;if(h.keyUpDown&&!a.altKey){if(a.keyCode==k.DOWN)return m=this._incrRowIndx2(e,b),this._saveAndMove(m,a);if(a.keyCode==k.UP)return m=
this._decrRowIndx2(e,b),this._saveAndMove(m,a)}}};m.select=function(a){var c=this.that,b=this,e=a.rowIndx,d=a.colIndx,k=a.evt;a=this.getMergeCell(e,d);var e=a.rowIndx,d=a.colIndx,h=a.rowIndxPage;a=c.options;var m=c.iSelection,q=a.selectionModel,f=q.type,p="row"==f,C="cell"==f;(a.realFocus?function(a){clearTimeout(b.timeoutID);b.timeoutID=setTimeout(function(){a()},0)}:function(a){a()})(function(){c.scrollCell({rowIndx:e,colIndx:d});var a=m.address();if(k.shiftKey&&k.keyCode!==l.ui.keyCode.TAB&&q.type&&
"single"!=q.mode&&a.length){var b=a[a.length-1],g=b.firstR,f=b.firstC,B=b.type,z=!1;"column"==B?(b.c1=f,b.c2=d,b.r1=b.r2=b.type=void 0):"row"==B?(b.r1=g,b.r2=e,b.c1=b.c2=b.type=void 0):(a={r1:g,r2:e,c1:f,c2:d,firstR:g,firstC:f},z=!0);c.range(a,z).select()}else p?c.range({r1:e,firstR:e},!1).select():C&&c.range({r1:e,c1:d,firstR:e,firstC:d}).select();c.focus({rowIndxPage:h,colIndx:d})})};m._bodyKeyPressDown=function(a){var c=this.that,b=c.rowIndxOffset,e,d,k;k=this.options;var h=c.iMerge,m=c._focusElement,
q=k.selectionModel,f=k.editModel,p=a.ctrlKey||a.metaKey,C=l.ui.keyCode,s=a.keyCode;if(f.indices)c.$div_focus.find(".pq-cell-focus").focus();else{if(m){if(k=document.activeElement,"pq-grid-cont"!=k.className&&"TD"!=k.nodeName.toUpperCase()&&"pq-grid-excel"!=k.id)return}else{m=l(a.target);if(!m.hasClass("pq-grid-cell"))return;m=c.getCellIndices({$td:m})}var y=c.normalize(m);d=y.rowIndxPage;e=y.rowIndx;k=y.colIndx;var E=c.pdata,D=y,m=!0;if(null!=e&&null!=k&&null!=y.rowData){h.ismergedCell(e,k)&&(y=D=
h.getRootCell(e,k,"o"),d=y.rowIndxPage,e=y.rowIndx,k=y.colIndx,s==C.PAGE_UP||s==C.PAGE_DOWN||s==C.SPACE||s==C.HOME||s==C.END)&&(h=h.getData(e,k,"proxy_cell"))&&(h=h.rowIndx-b,E[h].pq_hidden||(d=h,e=d+b));if(!1==c._trigger("cellKeyDown",a,D))return!1;if(s==C.LEFT||s==C.RIGHT||s==C.UP||s==C.DOWN||q.onTab&&s==C.TAB)c=null,s==C.LEFT||s==C.TAB&&a.shiftKey?c=this._incrIndx(d,k,!1):s==C.RIGHT||s==C.TAB&&!a.shiftKey?c=this._incrIndx(d,k,!0):s==C.UP?c=this._decrRowIndx2(d,k):s==C.DOWN&&(c=this._incrRowIndx2(d,
k)),c&&(e=c.rowIndxPage+b,this.select({rowIndx:e,colIndx:c.colIndx,evt:a}));else if(s==C.PAGE_DOWN||s==C.SPACE||s==C.PAGE_UP){if(c=this[s==C.PAGE_UP?"pageUp":"pageDown"](d))d=c.rowIndxPage,null!=d&&this.select({rowIndx:d+b,colIndx:k,evt:a})}else s==C.HOME?(p?e=c.getFirstVisibleRIP()+b:k=c.getFirstVisibleCI(),this.select({rowIndx:e,colIndx:k,evt:a})):s==C.END?(p?e=c.getLastVisibleRIP()+b:k=c.getLastVisibleCI(),this.select({rowIndx:e,colIndx:k,evt:a})):s==C.ENTER?(d=D.rowIndxPage,k=D.colIndx,(q=c.getCell({rowIndxPage:d,
colIndx:k}))&&0<q.length&&(e=d+b,b=c.isEditableRow({rowIndx:e}),C=c.isEditableCell({rowIndx:e,colIndx:k}),b&&C?c.editCell({rowIndxPage:d,colIndx:k}):(c=q.find("button"),c.length&&l(c[0]).click()))):p&&"65"==s?(c=c.iSelection,"row"==q.type&&"single"!=q.mode?c.selectAll({type:"row",all:q.all}):"cell"==q.type&&"single"!=q.mode&&c.selectAll({type:"cell",all:q.all})):f.pressToEdit&&(32<=s&&127>=s||189==s)&&!p?46==s?c.clear():(d=D.rowIndxPage,k=D.colIndx,(q=c.getCell({rowIndxPage:d,colIndx:k}))&&0<q.length&&
(e=d+b,b=c.isEditableRow({rowIndx:e}),C=c.isEditableCell({rowIndx:e,colIndx:k}),b&&C&&c.editCell({rowIndxPage:d,colIndx:k,select:!0})),m=!1):m=!1;m&&a.preventDefault()}}};m.incrPageSize=function(){for(var a=this.that,c=a.$tbl,b=c.children("tbody").children(".pq-grid-row"),c=parseInt(c.css("marginTop")),c=a.iRefresh.getEContHt()-c,e=b.length-1;0<=e;e--){var d=b[e];if(d.offsetTop<c)break}return{rowIndxPage:a.getRowIndx({$tr:l(d)}).rowIndxPage}};m.pageNonVirtual=function(a,c){var b=this.that,e=b.$cont[0].offsetHeight-
b._getSBHeight(),d=b.getRow({rowIndxPage:a}),k=0,h=0,m=l(d[0])[c]("tr.pq-grid-row"),q=m.length;if(0<q){do{d=m[h];k+=d.offsetHeight;if(k>=e)break;h++}while(h<q);h=0<h?h-1:h;do if(d=l(m[h]),a=b.getRowIndx({$tr:d}).rowIndxPage,null!=a)break;else h--;while(0<=h)}return a};m.pageDown=function(a){var c=this.that,b=c.options,e=c.vscroll,d=e.option("cur_pos"),k=e.option("num_eles"),h=e.option("ratio");if(b.virtualY){if(d<k-1){a=this.incrPageSize().rowIndxPage;var m=c._calcCurPosFromRowIndxPage(a);if(null==
m)return;e.option("cur_pos",m);e.scroll()}}else null!=a?a=this.pageNonVirtual(a,"nextAll"):1>h&&(b=c.iRefresh.getEContHt(),c=c.iMouseSelection,c.updateTableY(-1*b),c.syncScrollBarVert());return{rowIndxPage:a,curPos:m}};m.pageUp=function(a){var c=this.that,b=c.vscroll;if(c.options.virtualY){if(0<b.option("cur_pos")){a=this.decrPageSize().rowIndxPage;var e=c._calcCurPosFromRowIndxPage(a);if(null==e)return;b.option("cur_pos",e);b.scroll()}}else b=b.option("ratio"),null!=a?a=this.pageNonVirtual(a,"prevAll"):
0<b&&(b=c.iRefresh.getEContHt(),c=c.iMouseSelection,c.updateTableY(b),c.syncScrollBarVert());return{rowIndxPage:a,curPos:e}};m.decrPageSize=function(){var a=this.that,c=a.$tbl.children("tbody").children(".pq-grid-row"),b=a.options.freezeRows,e=a.pdata,d,k=0;if(c.length){var h;b?(h=c.filter("tr.pq-last-frozen-row"),h.length&&(h=h.next())):2<=c.length&&(h=l(c[1]));if(h&&h.length)for(d=k=a.getRowIndx({$tr:h}).rowIndxPage,c=0,a=a.pageSize-3;0<=k&&(e[k].pq_hidden||(c++,d=k,!(c>=a)));k--);}return{rowIndxPage:d}};
b._calcNumHiddenFrozens=function(){for(var a=0,c=this.options.freezeCols,b=0;b<c;b++)this.colModel[b].hidden&&a++;return a};b._calcNumHiddenUnFrozens=function(a){var c=0;a=null!=a?a:this.colModel.length;for(var b=this.options.freezeCols;b<a;b++)this.colModel[b].hidden&&c++;return c};b._getSBHeight=function(){return this.iRefresh.getSBHeight()};b._getSBWidth=function(){return this.iRefresh.getSBWidth()};b.getFirstVisibleRIP=function(a){var c=this.pdata;a=a?this.initV:0;for(var b=c.length;a<b;a++)if(!c[a].pq_hidden)return a};
b.getLastVisibleRIP=function(){for(var a=this.pdata,c=a.length-1;0<=c;c--)if(!a[c].pq_hidden)return c;return null};b.getFirstVisibleCI=function(a){var c=this.colModel,b=c.length;for(a=a?this.initH:0;a<b;a++)if(!c[a].hidden)return a;return null};b.getLastVisibleCI=function(){for(var a=this.colModel,c=a.length-1;0<=c;c--)if(!a[c].hidden)return c;return null};b.getTotalVisibleColumns=function(){for(var a=this.colModel,c=a.length,b=0,e=0;e<c;e++)a[e].hidden||b++;return b};b._calcCurPosFromRowIndxPage=
function(a){var c=this.pdata,b=this.options.freezeRows;if(a<b)return 0;for(var e=0,d=b,k=c.length;b<k;b++){var h=c[b];if(d==a)break;d++;h.pq_hidden||e++}return e>=k?null:e};b._calcCurPosFromColIndx=function(a){var c=this.colModel,b=this.options.freezeCols;if(a<b)return 0;for(var e=0,d=b,k=c.length;b<k;b++){var h=c[b];if(d==a)break;d++;h.hidden||e++}return e>=k?null:e};b.calcWidthCols=function(a,c,b){var e=0,d=this.options.numberCell,k=this.colModel;-1==a&&(d.show&&(e=b?e+1*d.width:e+d.outerWidth),
a=0);if(b)for(;a<c;a++){if((b=k[a])&&!b.hidden){if(!b._width)throw"assert failed";e+=b._width+0}}else for(;a<c;a++)(b=k[a])&&!b.hidden&&(e+=b.outerWidth);return e};b.calcHeightFrozenRows=function(){var a=this.$tbl,c=0;a&&a.length&&(a=l(a[0]).find("tr.pq-last-frozen-row"))&&a.length&&(c=a[0],c=c.offsetTop+c.offsetHeight);return c};b._calcRightEdgeCol=function(a){var c=0,b=0,e=this.colModel,d=this.initH,k=this.options,h=k.freezeCols,k=k.numberCell;k.show&&(c+=k.outerWidth,b++);for(k=0;k<=a;k++){k<d&&
k>=h&&(k=d);var m=e[k];m.hidden||(c+=m.outerWidth,b++)}return{width:c,cols:b}};b._createHeader=function(){this.iHeader.createHeader();this.options.showHeader&&this._trigger("createHeader")};b.createTable=function(a){a.other=!0;var c=this.iGenerateView;c.generateView(a);c.scrollView()}})(jQuery);
(function(l){function p(a){this.that=a}function f(a,c,b){for(var d=0;c<b;c++)!0!==a[c].hidden&&d++;return d}function b(a){if(a.length)var c=a.css({tableLayout:"auto",width:""}).addClass("pq-no-wrap").removeClass("pq-wrap").children("tbody").children(".pq-row-hidden").children("td").css("width","");return c||l()}function a(a,c,b){for(var d,q;b;){d=a[b][c];q=a[b-1][c];if(d!=q)break;b--}return b}var d=l.paramquery,c=d._pqGrid.prototype;c.getHeadCell=function(a){var c=a.attr("pq-col-indx");a=a.attr("pq-row-indx");
var b,d,q,g;null!=c&&null!=a&&(c*=1,a*=1,d=this.headerCells[a][c])&&(g=d.colModel,q=d.leftPos);g&&g.length&&(b=!0);return{col:d,ci:c,o_ci:q,ri:a,isParent:b}};c.flex=function(a){this.iResizeColumns.flex(a)};d.cHeader=p;c=p.prototype;c.createHeader=function(){var a=this.that,c=this,b=a.options,d=b.bootstrap,q=(d.on?d.thead:"")+" pq-grid-header-table ",g=b.ui,n=d.on?"":g.header,f=b.hwrap,d=a.pqpanes,t=parseInt(b.freezeCols),r=b.numberCell,g=a.colModel,u=b.sortModel,v=a.depth,w=b.virtualX,p=a.iGenerateView.colDef,
z=a.initH,A=a.finalH,C=a.headerCells,s=a.$header_o;s.empty();if(null!=A)if(!1===b.showHeader)s.css("display","none");else{s.css("display","");b=["<table class='"+(f?q+"pq-wrap ":q+"pq-no-wrap ")+"' >"];if(1<=v){b.push("<tr class='pq-row-hidden'>");r.show&&b.push("<td style='width:"+r.width+"px;' ></td>");for(var f=0,y=p.length;f<y;f++){var E=p[f],q=E.colIndx;b.push("<td style='width:"+E.column.outerWidth+"px;' pq-col-indx="+q+"></td>")}b.push("</tr>")}for(p=0;p<v;p++){b.push("<tr class='pq-grid-title-row'>");
0==p&&r.show&&b.push(["<th pq-col-indx='-1' class='pq-grid-number-col' rowspan='",v,"'><div class='pq-td-div'>",r.title?r.title:"&nbsp;","</div></th>"].join(""));for(q=0;q<=A;q++){if(q<z&&q>=t&&w&&(q=z,q>A))throw"initH>finalH";c.createHeaderCell(p,q,C,b,"pq-grid-col ",t,z,v,u)}b.push("</tr>")}a.ovCreateHeader(b,"pq-grid-col ");b.push("</table>");t=b.join("");s[0].innerHTML=d.vH?["<span class='pq-grid-header pq-grid-header-left ",n,"'><div class='pq-grid-header-inner'>",t,"</div></span><span class='pq-grid-header ",
n,"'><div class='pq-grid-header-inner'>",t,"</div></span>"].join(""):["<span class='pq-grid-header ",n,"'><div class='pq-grid-header-inner'>",t,"</div></span>"].join("");n=a.$header=s.children(".pq-grid-header");s=n.children(".pq-grid-header-inner");a.$tbl_header=s.children("table");a.$header_left=l(n[0]);a.$header_left_inner=l(s[0]);d.vH&&(a.$header_right=l(n[1]),a.$header_right_inner=l(s[1]));n.click(function(a){return c._onHeaderClick(a)});c._refreshResizeColumn(z,A,g);a._trigger("refreshHeader",
null,null)}};c._onHeaderClick=function(a){var c=this.that,b;b=c.iDragColumns;if(!b||"stop"==b.status){b=l(a.target);if(b.is("input,label"))return!0;b=b.closest(".pq-grid-col");if(b.length&&(b=c.getHeadCell(b),(c=b.col)&&!b.isParent))return this._onHeaderCellClick(c,b.ci,a)}};c.createHeaderCell=function(a,c,b,k,q,g,n,l,t){var r=this.that,u=r.options.sheet,v=b[a][c],p=r.colModel,x=v.colSpan;if(!(v.hidden||0===x||0<a&&v==b[a-1][c])){if(0<c&&v==b[a][c-1]){if(c>n)return;a:{b=b[a];for(var z=0;z<b.length;z++)if(b[z]==
v){b=z;break a}b=void 0}if(b<g)return;x-=f(p,b,c)}else g&&c<g&&c+x>g&&(x-=f(p,g,n),p=f(p,c,g),x=Math.max(x,p));p=v.halign||v.align;b=v.cls;q=[q];var z=v.title,A=v.type,z="function"==typeof z?z.call(r,{column:v,colIndx:c,dataIndx:v.dataIndx}):z,z=u?d.toLetter(c):z,z=null!=z?z:"checkbox"==A&&v.cb.header?"<input type='checkbox'/>":v.dataIndx;v.pqtitle=z;p&&q.push("pq-align-"+p);c==g-1&&1==l&&q.push("pq-last-frozen-col");c<=g-1?q.push("pq-left-col"):c>=n&&q.push("pq-right-col");b&&q.push(b);null!=v.colModel&&
0!=v.colModel.length||q.push("pq-grid-col-leaf");g=t.space?"pq-space":"";k.push(["<th  ","pq-col-indx="+c," ","pq-row-indx="+a,"  class='",q.join(" "),"' rowspan=",v.rowSpan," colspan=",x,"><div class='pq-td-div'>",z,"<span class='pq-col-sort-icon ",g,"'></span>",t.number?"<span class='pq-col-sort-count "+g+"'></span>":"","</div></th>"].join(""))}};c._onHeaderCellClick=function(a,c,b){var d=this.that,q=d.options,g=q.sortModel,n=a.dataIndx;!1!==d._trigger("headerCellClick",b,{column:a,colIndx:c,dataIndx:n})&&
(q.selectionModel.column&&-1==b.target.className.indexOf("pq-td-div")?(q={c1:c,firstC:c},a=d.iSelection.address(),b.shiftKey&&((b=a.length)&&"column"==a[b-1].type&&(b=a[b-1],b.c1=b.firstC,b.c2=c,b.r1=b.r2=b.type=void 0),q=a),d.range(q,!1).select(),d.focus({rowIndxPage:d.getFirstVisibleRIP(!0),colIndx:c})):g.on&&!1!=a.sortable&&(g.multiKey&&(g.single=!b[g.multiKey]),d.sort({sorter:[{dataIndx:n}],addon:!0,evt:b})))};c._refreshResizeColumn=function(a,c,b){a=this.that;b=a.options;c=b.filterModel.ficon?
!0:!1;var d=b.numberCell;b=parseInt(b.freezeCols);var q=[],g=[],n=a.pqpanes.vH,f=0,l=0;d.show&&(f=d.outerWidth,d.resizable&&q.push("<div pq-col-indx='-1' style='left:",f-5,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>"));for(var d=a.iGenerateView.colDef,r=0,u=d.length;r<u;r++){var l=d[r],v=l.colIndx,l=l.column,p=l.ficon,x=p||null==p&&c,p=q,f=f+l.outerWidth;if(!1!==l.resizable||x)n&&v>=b&&(p=g),l=f-5,p.push("<div pq-col-indx='",v,"' style='left:",l,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>")}g.length&&
a.$header_right_inner.append(g.join(""));a.$header_left_inner.append(q.join(""))};c.refreshHeaderSortIcons=function(){var a=this.that,c=a.options,b=c.bootstrap,c=c.ui,d=a.$header;if(d){var q=a.iSort.getSorter(),g=q.length,n=!1;a.options.sortModel.number&&1<g&&(n=!0);for(var f=0;f<g;f++){var l=q[f],r=a.getColIndx({dataIndx:l.dataIndx}),u=l.dir,l=b.on?b.header_active:c.header_active+" pq-col-sort-"+("up"==u?"asc":"desc"),u=b.on?" glyphicon glyphicon-arrow-"+u:"ui-icon ui-icon-triangle-1-"+("up"==u?
"n":"s"),r=d.find(".pq-grid-col-leaf[pq-col-indx="+r+"]");r.addClass(l);r.find(".pq-col-sort-icon").addClass(u);n&&r.find(".pq-col-sort-count").html(f+1)}}};c=function(a){this.that=a;var c=this;a.$header_o.on({mousedown:function(a){if(!a.pq_composed){var b=l(a.target);c.setDraggables(a);a.pq_composed=!0;a=l.Event("mousedown",a);b.trigger(a)}},dblclick:function(a){c.doubleClick(a)}},".pq-grid-col-resize-handle");var b=a.options.flex;if(b.on&&b.one)a.one("ready",function(){c.flex()})};d.cResizeColumns=
c;c=c.prototype=new d.cClass;c.doubleClick=function(a){var c=this.that.options,b=c.flex;a=l(a.target);a=parseInt(a.attr("pq-col-indx"));isNaN(a)||b.on&&this.flex(b.all&&!c.scrollModel.autoFit?{}:{colIndx:[a]})};c.flex=function(a){a=a||{};var c=this.that,d=c.element,k=c.options.numberCell,q=a.colIndx,g,n=a.dataIndx;a=null==a.refresh?!0:a.refresh;var f=!1,t=c.$tbl,r=c.$tbl_header,u=t&&t.length?l(t[0]).clone():l(),v=c.tables&&c.tables.length?c.tables[0].$tbl:null,v=v?l(v[0]).clone():l(),p=r&&r.length?
l(r[0]).clone():l();u.find(".pq-merge-cell").each(function(a,c){c.innerHTML=l(c).find(".pq-merge-inner")[0].innerHTML;c.style.whiteSpace="noWrap"});if(null!=n)for(q=[],r=0,t=n.length;r<t;r++){var x=c.colIndxs[n[r]];null!=x&&q.push(x)}null!=q&&(q.sort(function(a,c){return a-c}),g=q.length);p.find("tr.pq-grid-header-search-row").remove();var n=b(u),x=b(v),z=b(p),u=l("<div class='pq-grid' style='width:1px;height:1px;position:absolute;left:0px;top:0px;'>").append(p).append(v).append(u);u.addClass(d.attr("class"));
d.parent().append(u);d=k.show?0:-1;k=c.iGenerateView.colDef;r=0;for(t=k.length;r<t;r++){v=k[r];p=v.colIndx;v=v.column;d++;if(q)if(q.length)if(q[0]===p)q.splice(0,1);else continue;else break;var p=n[d],A=z[d],C=x[d],p=Math.max(p?p.offsetWidth:0,C?C.offsetWidth:0,A?A.offsetWidth:0)-0+1;v._width!==p&&(f=!0,v.width=p,1===g&&(v._resized=!0))}u.remove();f&&a&&c.refresh({source:"flex"})};c.setDraggables=function(a){var c=this,b,d,q;l(a.target).draggable({axis:"x",helper:function(a,b){var e=l(a.target),d=
parseInt(e.attr("pq-col-indx"));c._setDragLimits(d);c._getDragHelper(a,b);return e},start:function(a,e){b=e.position.left;q=parseInt(c.$cl[0].style.left)},drag:function(a,e){d=e.position.left;c.$cl[0].style.left=q+(d-b)+"px"},stop:function(a,e){return c.resizeStop(a,e,b)}})};c._getDragHelper=function(a){var c=this.that,b=parseInt(c.options.freezeCols);a=l(a.target);var d=c.$grid_center;a=parseInt(a.attr("pq-col-indx"));var q=d.outerHeight();this.$cl=l("<div class='pq-grid-drag-bar'></div>").appendTo(d);
this.$clleft=l("<div class='pq-grid-drag-bar'></div>").appendTo(d);this.$cl.height(q);this.$clleft.height(q);d=l("[pq-col-indx="+a+"]",c.$header)[0];q=d.offsetLeft;c.pqpanes.vH?a>=b&&(q-=c.$header[1].scrollLeft):(q+=c.$header[0].offsetLeft,q-=c.$header[0].scrollLeft);this.$clleft.css({left:q});q+=d.offsetWidth;this.$cl.css({left:q})};c._setDragLimits=function(a){if(!(0>a)){var c=this.that,b=c.colModel[a],d=c.$header_left;a>=c.options.freezeCols&&c.pqpanes.vH&&(d=c.$header_right);c=d.find("th[pq-col-indx='"+
a+"']").offset().left+b._minWidth;b=c+b._maxWidth-b._minWidth;d.find("div.pq-grid-col-resize-handle[pq-col-indx="+a+"]").draggable("option","containment",[c,0,b,0])}};c.resizeStop=function(a,c,b){var d=this.that,q=d.colModel,g=d.options.numberCell;this.$clleft.remove();this.$cl.remove();b=c.position.left-b;c=l(c.helper);c=parseInt(c.attr("pq-col-indx"));if(-1==c){var q=null,n=parseInt(g.width);g.width=n+b}else q=q[c],n=parseInt(q.width),q.width=n+b,q._resized=!0;d.refresh();d._trigger("columnResize",
a,{colIndx:c,column:q,dataIndx:q?q.dataIndx:null,oldWidth:n,newWidth:q?q.width:g.width})};c=function(a){this.that=a;this.$drag_helper=null;var c=a.options.dragColumns,b=c.topIcon,d=c.bottomIcon;this.status="stop";this.$arrowTop=l("<div class='pq-arrow-down ui-icon "+b+"'></div>").appendTo(a.element);this.$arrowBottom=l("<div class='pq-arrow-up ui-icon "+d+"' ></div>").appendTo(a.element);this.hideArrows();if(c&&c.enabled)a.$header_o.on("mousedown",".pq-grid-col",this.onColMouseDown(this,a))};d.cDragColumns=
c;c=c.prototype;c.onColMouseDown=function(a,c){return function(b){var d,q,g;d=l(this);b.pq_composed||l(b.target).is("input,select,textarea")||(d=c.getHeadCell(d),g=(q=d.col)?q.parent:null,!q||q.nodrag||q._nodrag||g&&1==g.colSpan||!a.setDraggable(b,q,d)||(b.pq_composed=!0,d=l.Event("mousedown",b),l(b.target).trigger(d)))}};c.showFeedback=function(a,c){var b=this.that,d=a[0],q=b.$grid_center[0].offsetTop,g=d.offsetLeft-d.offsetParent.offsetParent.offsetParent.scrollLeft+(c?0:d.offsetWidth)-8,b=q+b.$header[0].offsetHeight;
this.$arrowTop.css({left:g,top:q+d.offsetTop-16,display:""});this.$arrowBottom.css({left:g,top:b,display:""})};c.showArrows=function(){this.$arrowTop.show();this.$arrowBottom.show()};c.hideArrows=function(){this.$arrowTop.hide();this.$arrowBottom.hide()};c.updateDragHelper=function(a){var c=this.that.options.dragColumns,b=c.acceptIcon,c=c.rejectIcon,d=this.$drag_helper;d&&(a?(d.children("span.pq-drag-icon").addClass(b).removeClass(c),d.removeClass("ui-state-error")):(d.children("span.pq-drag-icon").removeClass(b).addClass(c),
d.addClass("ui-state-error")))};c.setDraggable=function(a,c,b){a=l(a.currentTarget);var d=this,q=d.that;if(!a.hasClass("ui-draggable"))return a.draggable({distance:10,cursorAt:{top:-18,left:-10},zIndex:"1000",appendTo:q.element,revert:"invalid",helper:d.dragHelper(d,q,c),start:d.onStart(d,q,c,b),drag:d.onDrag(d,q),stop:function(){d.status="stop";q.$header.find(".pq-grid-col-resize-handle").show();d.hideArrows()}}),!0};c.onStart=function(a,c,b,d){return function(q){if(!1===c._trigger("columnDrag",
q.originalEvent,{column:b}))return!1;a.setDroppables(d)}};c.onDrag=function(a,c){return function(b,d){a.status="drag";var q=l(".pq-drop-hover",c.$header);if(0<q.length){a.showArrows();a.updateDragHelper(!0);var g=q.width();b.clientX-q.offset().left+l(document).scrollLeft()<g/2?(a.leftDrop=!0,a.showFeedback(q,!0)):(a.leftDrop=!1,a.showFeedback(q,!1))}else a.hideArrows(),l(".pq-drop-hover",c.$top).length?a.updateDragHelper(!0):a.updateDragHelper()}};c.dragHelper=function(a,c,b){var d=c.options.dragColumns.rejectIcon;
return function(){a.status="helper";c.$header.find(".pq-grid-col-resize-handle").hide();var q=l("<div class='pq-col-drag-helper ui-widget-content ui-corner-all panel panel-default' ><span class='pq-drag-icon ui-icon "+d+" glyphicon glyphicon-remove'></span>"+b.pqtitle+"</div>");a.$drag_helper=q;return q[0]}};c._columnIndexOf=function(a,c){for(var b=0,d=a.length;b<d;b++)if(a[b]==c)return b;return-1};c.setDroppables=function(a){var c=this.that,b=a.col,d=a.ri;a=a.o_ci;var q=a+b.o_colspan,g,n,f,t,r;n=
c.$header_left;var u,p={hoverClass:"pq-drop-hover ui-state-highlight",accept:".pq-grid-col",tolerance:"pointer",drop:this.onDrop()},w=n.find(".pq-left-col");n=c.pqpanes.v||c.pqpanes.vH?c.$header_right.find(".pq-right-col"):n.find(".pq-right-col");w=w.add(n);for(u=w.length;u--;)t=l(w[u]),r=t.hasClass("ui-droppable"),g=c.getHeadCell(t),f=g.col,n=g.ri,g=g.ci,f==b||f.nodrop||f._nodrop||d<n&&g>=a&&g<q?r&&t.droppable("destroy"):r||t.droppable(p)};c.onDrop=function(){var a=this,c=this.that;return function(b,
d){if(!a.dropPending){var q=1*d.draggable.attr("pq-col-indx"),g=1*d.draggable.attr("pq-row-indx"),n=l(this),f=1*n.attr("pq-col-indx"),n=1*n.attr("pq-row-indx"),t=a.moveColumn(q,f,a.leftDrop,g,n);a.dropPending=!0;window.setTimeout(function(){c.iColModel.init();!1!==c._trigger("columnOrder",null,{dataIndx:t.dataIndx,column:t,oldcolIndx:q,colIndx:c.getColIndx({column:t})})&&c.refresh();a.dropPending=!1},0)}}};c.moveColumn=function(c,b,d,k,q){var g=this.that,n=g.options.colModel,f=g.headerCells,g=g.depth-
1;k=null==k?a(f,c,g):k;q=null==q?a(f,b,g):q;var g=f[q][b],l=k?f[k-1][c].colModel:n;b=q?f[q-1][b].colModel:n;c=this._columnIndexOf(l,f[k][c]);d=d?1:0;c=l.splice(c,1)[0];d=this._columnIndexOf(b,g)+1-d;b.splice(d,0,c);return c}})(jQuery);
(function(l){function p(b,a){this.that=b;var d=this,c=b.options;this.type="detail";this.refreshComplete=!0;this.detachView=!1;b.on("cellClick",function(a,c){return d.toggle(a,c)}).on("cellKeyDown",function(a,c){if(a.keyCode==l.ui.keyCode.ENTER)return d.toggle(a,c)}).on("refresh",function(a,c){return d.aftertable()}).on("beforeTableView",function(a,c){return d.beforeTableView(a,c)}).on("tableWidthChange",function(a,c){return d.tableWidthChange(a,c)});a._render=function(a){var b=c.detailModel,d=a.cellData;
a=a.rowData;if(!a.pq_gsummary&&!a.pq_gtitle)return b=d&&d.show?b.expandIcon:b.collapseIcon,"<div class='ui-icon "+b+"'></div>"}}l.paramquery.cHierarchy=p;var f=p.prototype=new l.paramquery.cClass;f.tableWidthChange=function(){if(this.refreshComplete){this.refreshComplete=!1;for(var b=this.that.$tbl.children("tbody").children("tr.pq-detail-child").children("td.pq-detail-child"),a=0,d=b.length;a<d;a++)for(var c=l(b[a]).find(".pq-grid"),e=0,h=c.length;e<h;e++){var m=l(c[e]);m.is(":visible")&&m.pqGrid("onWindowResize")}this.refreshComplete=
!0}};f.aftertable=function(b){var a=this.that,d=a.options.detailModel.init,c=a.pdata;if(this.refreshComplete){this.refreshComplete=!1;b=b?b:a.$tbl.children("tbody").children("tr.pq-detail-child");for(var e=0,h=b.length;e<h;e++){var m=l(b[e]),k=m.attr("pq-row-indx"),q=c[k],k=!1,g=q.pq_detail.child;g||"function"!=typeof d||(k=!0,g=d.call(a.element[0],{rowData:q}),q.pq_detail.child=g,q.pq_detail.height=25);m=m.children("td.pq-detail-child");m.append(g);m=m.find(".pq-grid");g=0;for(q=m.length;g<q;g++){var n=
l(m[g]);k?n.hasClass("pq-pending-refresh")&&n.is(":visible")&&(n.removeClass("pq-pending-refresh"),n.pqGrid("refresh")):n.is(":visible")&&n.pqGrid("onWindowResize")}}this.refreshComplete=!0;this.detachView=!1}};f.beforeTableView=function(b,a){this.detachView||(this.detachInitView(),this.detachView=!0)};f.detachInitView=function(b){var a=this.that.$tbl;if(a&&a.length)for(b=b?b:a.children("tbody").children("tr.pq-detail-child"),a=0;a<b.length;a++)l(b[a]).children("td.pq-detail-child").children().detach()};
f.toggle=function(b,a){var d=this.that,c=a.column,e=a.rowData,h=a.rowIndx,m=this.type;e.pq_gtitle||e.pq_gsummary||!c||c.type!==m||(c={rowIndx:h,focus:!0},null==e.pq_detail?d.rowExpand(c):!1===e.pq_detail.show?d.rowExpand(c):this.rowCollapse(c))};f.rowExpand=function(b){this.normalize(b);var a=this.that,d=b.rowData,c=b.rowIndx,e=b.rowIndxPage,h=a.options.detailModel;if(null!=d){if(!1===a._trigger("beforeRowExpand",null,b))return!1;null==d.pq_detail?d.pq_detail={show:!0}:!1===d.pq_detail.show&&(d.pq_detail.show=
!0);h.cache||this.rowInvalidate(b);a.refreshRow({rowIndx:c});h=[];a.iGenerateView._generateDetailRow(d,e,h);d=a.getRow({rowIndxPage:e});d.after(h.join(""));this.aftertable(d.next());b.focus&&a.getCell({rowIndx:c,dataIndx:"pq_detail"}).attr("tabindex","0").focus();b.scrollRow&&this.scrollRow({rowIndx:c})}};f.rowInvalidate=function(b){b=this.that.getRowData(b);var a=b.pq_detail;if(a=a?a.child:null)a.remove(),b.pq_detail.child=null,b.pq_detail.height=0};f.normalize=function(b){var a=this.that,d=b.rowIndx,
c=b.rowIndxPage,e=a.rowIndxOffset;b.rowIndx=null==d?c+e:d;b.rowIndxPage=null==c?d-e:c;b.rowData=a.getRowData(b)};f.rowCollapse=function(b){this.normalize(b);var a=this.that,d=a.options,c=b.rowData,e=b.rowIndx,h=b.rowIndxPage,m=d.detailModel;null!=c&&null!=c.pq_detail&&!0===c.pq_detail.show&&(m.cache||this.rowInvalidate(b),c.pq_detail.show=!1,d.virtualY?a.refresh():(d=a.getRow({rowIndxPage:h}).next("tr.pq-detail-child"),d.length&&(this.detachInitView(d),d.remove(),a.refreshRow({rowIndx:e})),b.focus&&
a.getCell({rowIndx:e,dataIndx:"pq_detail"}).attr("tabindex","0").focus()),b.scrollRow&&(e=b.rowIndx,this.scrollRow({rowIndx:e})))}})(jQuery);
(function(l){var p=function(f){var b=this;b.that=f;f.on("dataReadyDone",function(){b.calcVisibleV()}).on("CMInit",function(){b.calcVisibleH()}).on("refresh",function(){b.summaryTable()})};l.paramquery.cRefresh=p;p=p.prototype;p._computeOuterWidths=function(){for(var f=this.that,b=f.options.numberCell,f=f.colModel,a=f.length,d=0;d<a;d++){var c=f[d];c.outerWidth=c._width+0}b.show&&(b.outerWidth=b.width)};p.autoFit=function(){var f=this.that,b=f.colModel,a=b.length,f=f.calcWidthCols(-1,a,!0),d=this.contWd-
this.getSBWidth();if(f!==d){for(var f=f-d,c,d=[],e=0;e<a;e++){var h=b[e],m=h._percent,k=h._resized;h.hidden||m||k||(0>f?(m=h._maxWidth-h._width)&&d.push({availWd:-1*m,colIndx:e}):(m=h._width-h._minWidth)&&d.push({availWd:m,colIndx:e}));k&&(c=h,delete h._resized)}d.sort(function(a,c){return a.availWd>c.availWd?1:a.availWd<c.availWd?-1:0});e=0;for(a=d.length;e<a;e++){var h=d[e],m=h.availWd,h=h.colIndx,k=Math.round(f/(a-e)),h=b[h],q;q=h._width;Math.abs(m)>Math.abs(k)?(q-=k,f-=k):(q-=m,f-=m);h.width=
h._width=q}0!=f&&c&&(q=c._width-f,q>c._maxWidth?q=c._maxWidth:q<c._minWidth&&(q=c._minWidth),c.width=c._width=q)}};p.autoLastColumn=function(){var f=this.that,b=f.colModel,a=b.length,d=f.options.freezeCols,c=this.contWd-this.getSBWidth(),e=f.calcWidthCols(-1,d,!0),c=c-e,e=!1,f=f.getLastVisibleCI();if(null!=f&&(f=b[f],!f._percent)){for(var h=f._width,m,k=f._minWidth,q=f._maxWidth,a=a-1;a>=d;a--){var g=b[a];if(!g.hidden&&(g=g._width+0,c-=g,0>c)){e=!0;m=h+c>=k?h+c:h+g+c;break}}e||(m=h+c);m>q?m=q:m<k&&
(m=k);f.width=f._width=m}};p.numericVal=function(f,b){var a;a=-1<(f+"").indexOf("%")?parseInt(f)*b/100:parseInt(f);return Math.round(a)};p.refreshColumnWidths=function(f){f=f||{};var b=this.that,a=b.options,d=a.numberCell,c="flex"===a.width,e=b.colModel,h=a.scrollModel,m=h.lastColumn,h=h.autoFit,k=this.contWd,q=e.length,g=this.getSBWidth(),n=a._minColWidth,l=a._maxColWidth,t=0;d.show&&(d.width<d.minWidth&&(d.width=d.minWidth),t=d.outerWidth=d.width);d=c?null:k-g-t;n=Math.floor(this.numericVal(n,d));
l=Math.ceil(this.numericVal(l,d));k=0;if(!c&&5>d||isNaN(d)){if(a.debug)throw"availWidth N/A";}else{delete b.percentColumn;for(g=0;g<q;g++)if(t=e[g],!t.hidden){var r=t.width,u=-1<(r+"").indexOf("%")?!0:null,p=t.minWidth,w=t.maxWidth,p=p?this.numericVal(p,d):n,w=w?this.numericVal(w,d):l;w<p&&(w=p);if(void 0!=r){var x=0;!c&&u?(b.percentColumn=!0,t.resizable=!1,t._percent=!0,r=this.numericVal(r,d)-0,x=Math.floor(r),k+=r-x,1<=k&&(x+=1,k-=1)):r&&(x=parseInt(r));x<p?x=p:!c&&x>w&&(x=w);t._width=x}else t._width=
p;u||(t.width=t._width);t._minWidth=p;t._maxWidth=c?1E3:w}!1===c&&!1!==f.refreshWidth&&(h&&this.autoFit(),"auto"===m&&a.virtualX&&this.autoLastColumn());this._computeOuterWidths()}};p.estRowsInViewPort=function(){var f=Math.ceil(this.contHt/this.rowHt);return this.that.pageSize=f};p._refreshFrozenLine=function(){var f=this.that,b=f.options,a=b.numberCell,d=f.$cont_o,c=b.freezeBorders,e=b.freezeCols,b=b.freezeRows;this.$freezeLine&&this.$freezeLine.remove();this.$freezeLineH&&this.$freezeLineH.remove();
c&&(e&&(c=f.calcWidthCols(-1,e),isNaN(c)||0===c||0<c&&a.show&&c===a.width||(this.$freezeLine=l(["<div class='pqg-vert-frozen-line'  style = 'left:",c-1,"px;' ></div>"].join("")).appendTo(d))),b&&(f=f.$tbl))&&(f=f.children("tbody").children(".pq-last-frozen-row")[0])&&(this.$freezeLineH=l("<div class='pqg-horiz-frozen-line' style='top:"+(f.offsetTop+f.offsetHeight-1-1)+"px;' ></div>").appendTo(d))};p.setScrollVNumEles=function(f){var b=this.that;f=b.vscroll;var a=b.options;if(!a.maxHeight&&"flex"===
a.height)return f.option("num_eles",0),0;var a=b.iHierarchy?!0:!1,d=parseInt(f.option("num_eles")),c=parseInt(f.option("cur_pos")),d=this.getEContHt(),e=b.pdata?b.totalVisibleRows:0,h,m=0;b.$tbl&&0<b.$tbl.length&&(h=b.$tbl[b.$tbl.length-1],m=h.scrollHeight,h=l(h));if(0<m){h=h.children().children("tr");c=b=0;for(m=1;m<h.length;m++){var k=h[m],b=b+k.offsetHeight;if(b>=d){a&&l(k).hasClass("pq-detail-child")&&(c=1<c?c-1:1);break}else a?!1===l(k).hasClass("pq-detail-child")&&c++:c++}d=e-c+1}else d=c+1;
d>e&&(d=e);f.option("num_eles",d);return d};p._setScrollVLength=function(f){f=this.that;var b=f.options;if("flex"!==b.height||b.maxHeight){var b=this.getSBHeight(),a=this.contHt-b+this.headerHt-2;f.vscroll.widget().css("bottom",b);f.vscroll.option("length",a)}};p.setHeaderHeight=function(){var f=this.that,b=f.$header,a,d,c;if(b&&b.length){if(1<b.length){if(a=b[0].scrollHeight,d=b[1].scrollHeight,c=Math.max(a,d),a!==d){var e=l(b[0]).find(".pq-grid-header-search-row"),h=l(b[1]).find(".pq-grid-header-search-row");
e.length&&(e.css("height",""),h.css("height",""),a=b[0].scrollHeight,d=b[1].scrollHeight,c=Math.max(a,d),a<c?e.height(h[0].scrollHeight):h.height(e[0].scrollHeight))}}else c=a=b[0].scrollHeight;f.$header_o.height(c-3);this.headerHt=c-1}else f.$header_o.height(0),this.headerHt=0};p.initContHeight=function(){var f=this.that,b=f.options;if("flex"!=b.height||b.maxHeight)this.contHt=this.height-(b.showHeader?this.rowHt:0)-(b.showTop?f.$top[0].offsetHeight:0)-(b.showBottom?f.$bottom[0].offsetHeight:0)};
p.initContWidth=function(){this.contWd=this.width};p.setContHeight=function(f){f=this.that;var b=f.$top,a=this.height-f.$header_o[0].offsetHeight,d;if(f.options.showTop){d=b[0].offsetHeight;var c=parseInt;b=b[0];window.getComputedStyle?b=getComputedStyle(b).marginTop:(b=b.currentStyle.marginTop,b="auto"==b?0:b);d+=c(b)}else d=0;a=a-d-f.$bottom[0].offsetHeight+1;a=0<=a?a:"";f.$cont.height(a);this.contHt=a};p.setContAndGridHeightForFlex=function(){var f=this.that,b=f.hscroll.widget();if(this.vscroll)b.css("position",
"");else{b.css("position","relative");var b=f.$cont,a=f.options.cls,d=b.children("."+a.cont_inner_b);b.height("");d.length||(d=b.children("."+a.cont_inner));d.height("");f.element.height("");f.$grid_center.height("")}};p.setContAndGridWidthForFlex=function(){var f=this.that,b=f.options.maxWidth,a=this.maxWidthPixel,d=f.calcWidthCols(-1,f.colModel.length),f=f.element,c=this.getSBWidth(),d=d+c;b&&d>=a&&(d=a);this.contWd=d;f.width(d+"px")};p.getTotalVisibleRows=function(f,b,a){var d=this.that,c=this.vrows,
e=this.estRowsInViewPort(),h=0,m=a?a.length:0,k=b,q=0,g=0,n=null,l=d.iHierarchy?!0:!1,d=d.options.detailModel.offset,t=0,r=this.rowHt,u=l?this.contHt:void 0;if(null==a||0==m)return{initV:null,finalV:null,tvRows:h,lastFrozenRow:null};for(var p=0,w=m>b?b:m;p<w;p++){var x=a[p],z=x.pq_hidden;z||(n=p,h++,l&&((x=x.pq_detail)&&x.show?(x=x.height||0,x>d&&(x=d),t+=x+r):t+=r))}if(m<b)return{initV:n,finalV:n,tvRows:h,lastFrozenRow:n};e-=h;k=q=c[f];g=0;p=k;for(w=m;p<w;p++){x=a[p];if(z=x.pq_hidden)q++;else if(g===
e)break;else q++,g++;if(l&&!z&&((x=x.pq_detail)&&x.show?(x=x.height||0,x>d&&(x=d),t+=x+r):t+=r,t>u))break}h+=c.length;k=k>=m?m-1:k;q=q>=m?m-1:q;return{initV:k,finalV:q<k?k:q,tvRows:h,lastFrozenRow:n}};p.setInitH=function(f,b){var a=this.that;a.initH=f;a.finalH=b};p.setInitV=function(f,b){var a=this.that,d;(null==f||null==b)&&(d=this.vrows)&&d.length&&(f=b=d[d.length-1]);a.initV=f;a.finalV=b};p.calcVisibleV=function(){for(var f=this.that,b=f.pdata||[],a=b.length,d=[],c=0,f=f.options.freezeRows;f<a;f++)b[f].pq_hidden||
(d[c++]=f);this.vrows=d};p.calcVisibleH=function(){for(var f=this.that,b=[],a=0,d=f.colModel,f=f.options.freezeCols,c=d.length;f<c;f++)d[f].hidden||(b[a++]=f);this.vcols=b};p.calcInitFinal=function(){var f=this.that,b=f.options,a=b.virtualY,d=b.freezeRows,c="flex"===b.height,e=f.pdata;if(null==e||0===e.length)d=this.getTotalVisibleRows(h,d,e),f.totalVisibleRows=d.tvRows,a=d.initV,b=d.finalV,f.lastFrozenRow=d.lastFrozenRow;else if(a){var h=parseInt(f.vscroll.option("cur_pos"));if(isNaN(h)||0>h)throw"cur_pos NA";
f.scrollCurPos=h;d=this.getTotalVisibleRows(h,d,e);f.totalVisibleRows=d.tvRows;a=d.initV;f.lastFrozenRow=d.lastFrozenRow;b=c&&!b.maxHeight?e.length-1:d.finalV}else d=this.getTotalVisibleRows(0,d,e),f.lastFrozenRow=d.lastFrozenRow,f.totalVisibleRows=d.tvRows,a=0,b=e.length-1;this.setInitV(a,b)};p.calcInitFinalH=function(){var f=this.that,b=f.options,a,d=f.colModel,c=d.length;if(b.virtualX){a=parseInt(f.hscroll.option("cur_pos"));var e=parseInt(b.freezeCols),h="flex"===b.width,m=this.vcols;m||(this.calcVisibleH(),
m=this.vcols);a=m[a];a>c-1&&(a=c-1);0>a&&(a=0);if(h&&!b.maxWidth)b=c-1;else{f=f.calcWidthCols(-1,e);e=this.getEContWd();for(h=a;h<c;h++)if(m=d[h],!m.hidden){m=m.outerWidth;if(!m&&b.debug)throw"outerwidth N/A";f+=m;if(f>e)break}b=h;b>c-1&&(b=c-1)}}else a=0,b=c-1;this.setInitH(a,b)};p._calcOffset=function(f){return(f=/(-|\+)([0-9]+)/.exec(f))&&3===f.length?parseInt(f[1]+f[2]):0};p.setMax=function(f){var b=this.that,a=b.element;(b=b.options[f])?(b==parseInt(b)&&(b+="px"),a.css(f,b)):a.css(f,"")};p.refreshGridWidthAndHeight=
function(){var f=this.that,b=f.options,a,d,c=-1<(b.width+"").indexOf("%")?!0:!1,e=-1<(b.height+"").indexOf("%")?!0:!1,h=-1<(b.maxHeight+"").indexOf("%")?!0:!1,m="flex"==b.height,k=h&&m,q=-1<(b.maxWidth+"").indexOf("%")?!0:!1,g="flex"==b.width,n=q&&g,f=f.element;if(c||e||k||n){var B=f.parent();if(!B.length)return;var t;B[0]==document.body||"fixed"==f.css("position")?(t=l(window).width(),B=window.innerHeight?window.innerHeight:l(window).height()):(t=B.width(),B=B.height());var r=this._calcOffset,u=
c?r(b.width):0,r=e?r(b.height):0;n?a=parseInt(b.maxWidth)*t/100:c&&(a=parseInt(b.width)*t/100+u);k?d=parseInt(b.maxHeight)*B/100:e&&(d=parseInt(b.height)*B/100+r)}a||(g&&b.maxWidth?q||(a=b.maxWidth):c||(a=b.width));b.maxWidth&&(this.maxWidthPixel=a);d||(m&&b.maxHeight?h||(d=b.maxHeight):e||(d=b.height));parseFloat(a)==a?(a=a<b.minWidth?b.minWidth:a,f.css("width",a)):"auto"===a&&f.width(a);parseFloat(d)==d&&(d=d<b.minHeight?b.minHeight:d,f.css("height",d));this.width=Math.round(f.width());this.height=
Math.round(f.height())};p.decidePanes=function(){var f=this.that,b=f.pqpanes={v:!1,h:!1,vH:!1},a=f.options,f=a.virtualX,d=a.virtualY,c="flex"==a.height&&!a.maxHeight,e="flex"==a.width&&!a.maxWidth,h=a.numberCell,m=a.freezeRows,a=a.freezeCols;!m||c||!a&&!h.show||e?m&&!c?d||(b.h=!0):!a&&!h.show||e||f||(b.v=!0,b.vH=!0):(d||(b.h=!0),f||(b.v=!0,b.vH=!0))};p._storeColumnWidths=function(f){for(var b=this.that,a=b.options,d=b.colModel,c=a.virtualX,a=a.freezeCols,e=b.initH,b=f?d.length-1:b.finalH,h=[],m=0;m<=
b;m++)!f&&c&&m<e&&m>=a&&(m=e),h[m]={outerWidth:d[m].outerWidth};return h};p._isColumnWidthChanged=function(f){for(var b=this.that,a=b.colModel,b=b.iGenerateView.colDef,d=0,c=b.length;d<c;d++){var e=b[d].colIndx;if(a[e].outerWidth!==f[e].outerWidth)return!0}return!1};p.softRefresh=function(){var f=this.that,b=f.options;this.refreshScrollbars();f.iGenerateView.setPanes();f._saveDims();f.iMouseSelection.syncScrollBarVert();"flex"==b.height&&this.setContAndGridHeightForFlex();"flex"==b.width&&this.setContAndGridWidthForFlex();
this._refreshFrozenLine()};p.refreshScrollbars=function(f){f=f||{};var b=this.that,a=b.options,d=b.iGenerateView,c,e="flex"===a.height;c="flex"===a.width;if((e||this.contHt)&&(c||this.contWd)&&null!==b.totalVisibleRows){b=this.setScrollVNumEles(f);b=1<b?!0:!1;if((!e||a.maxHeight)&&b!==this.vscroll)if(this.vscroll=b,a.scrollModel.autoFit||a.virtualX||c){if(a=this._storeColumnWidths(),this.refreshColumnWidths(),this._isColumnWidthChanged(a)||c)this.ignoreTResize=!0,this._refreshTableWidths(a,{table:!0,
header:!0}),delete this.ignoreTResize,this.setHeaderHeight(),this.setContHeight(),d.setPanes(),b=this.setScrollVNumEles(!0),this.vscroll=1<b?!0:!1}else d.setPanes();b=this.setScrollHNumEles();c=1<b?!0:!1;this.hscroll!=c&&(this.hscroll=c,d.setPanes());this._setScrollHLength();this._setScrollVLength(f);this._setScrollHVLength()}};p._setScrollHVLength=function(){var f=this.that;this.vscroll&&this.hscroll||f.$hvscroll.css("visibility","hidden")};p._setScrollHLength=function(){var f=this.that,b=f.hscroll.widget(),
a=f.$hvscroll;if(f.options.scrollModel.horizontal){b.css("visibility","");a.css("visibility","");var a=this.contWd,d=this.getSBWidth();b.css("right",0===d?0:"");f.hscroll.option("length",a-d)}else b.css("visibility","hidden"),a.css("visibility","hidden")};p.estVscroll=function(){var f=this.that,b=!0;null==f.totalVisibleRows||null==this.contHt?b=!1:f.totalVisibleRows*this.rowHt<this.contHt&&(b=!1);this.vscroll=b};p.getSBWidth=function(){null==this.vscroll&&this.estVscroll();return this.vscroll?17:
0};p.estHscroll=function(){var f=this.that;if(null==this.contWd)throw"failed";var b=!1;1<this.calcColsOutsideCont(f.colModel)+1&&(b=!0);this.hscroll=b};p.getSBHeight=function(){null==this.hscroll&&this.estHscroll();return this.hscroll?17:0};p.getEContHt=function(){if(null==this.contHt)throw"contHt N/A";return this.contHt-this.getSBHeight()};p.getEContWd=function(){if(null==this.contWd)throw"contWd N/A";return this.contWd-this.getSBWidth()};p.calcColsOutsideCont=function(f){var b=this.that.options,
a=b.numberCell,b=b.freezeCols,d=this.contWd-this.getSBWidth(),c=0;a.show&&(c+=a.outerWidth);for(a=0;a<f.length;a++){var e=f[a];e.hidden||(c+=e.outerWidth)}var h=0,m=0,e=Math.round(c);e>d&&m++;for(a=b;a<f.length;a++)if(e=f[a],!e.hidden)if(h+=e.outerWidth,e=c-h,e>d)m++;else break;return m};p.setScrollHNumEles=function(){var f=this.that,b=f.options,a=f.colModel,d=b.scrollModel,c=0;if("flex"!==b.width||b.maxWidth)c="fullScroll"===d.lastColumn?a.length-b.freezeCols-f._calcNumHiddenUnFrozens():this.calcColsOutsideCont(a)+
1;f.hscroll.option("num_eles",c);return c};p.init=function(){var f=this.that,b=f.options;this.hscroll=this.vscroll=this.contHt=this.contWd=null;f.initH=f.initV=f.finalH=f.finalV=null;f.totalVisibleRows=f.lastFrozenRow=null;this.rowHt=b.rowHeight;this.headerHt=0;this.height=null};p.refresh=function(f){f=f||{};var b=this.that,a=f.header,d=f.table,c=f.pager,e,h=b.iGenerateView;e=b.element;if(e[0].offsetWidth){f.toolbar&&b.refreshToolbar();b.iMouseSelection.resetMargins();this.init();e=b.options;this.decidePanes();
e.collapsible._collapsed=!1;this.setMax("maxHeight");this.setMax("maxWidth");this.refreshGridWidthAndHeight();this.initContHeight();this.initContWidth();this.calcInitFinal();if(!1===a||!1===d)var m=this._storeColumnWidths(!0);this.refreshColumnWidths();this.calcInitFinalH();h.createColDefs();!1!==a?b._createHeader():this._isColumnWidthChanged(m)&&this._refreshTableWidths(m,{header:!0});b._refreshHeaderSortIcons();!1!==c&&b._refreshPager();this.setHeaderHeight();this.setContHeight();!1!==d?h.generateView({source:f.source}):
(this._refreshTableWidths(m,{table:!0}),h.setPanes());b._saveDims();h.scrollView();this.refreshScrollbars();"flex"==e.height&&this.setContAndGridHeightForFlex();"flex"==e.width&&this.setContAndGridWidthForFlex();this._refreshFrozenLine();b._createCollapse();e.dataModel.postDataOnce=void 0}else e.addClass("pq-pending-refresh")};p.summaryTable=function(){var f=this.$summary,b=this.that,a=b.options.summaryData;a?(f||(f=this.$summary=l("<div class='pq-grid-summary'></div>").prependTo(b.$bottom)),f={data:a,
$cont:f},b.createTable(f)):f&&f[0].innerHTML&&f.empty()};p.refreshVscroll=function(f){f=this.that;var b=f.iGenerateView,a=f.options;if(a.virtualY&&!a.scrollModel.smooth){var d=f.initV,c=f.finalV;this.calcInitFinal();var e=d-f.initV,h=c-f.finalV;a.fullrefreshOnScroll||a.detailModel.init||f._mergeCells||1!=Math.abs(e)||1!=Math.abs(h)?d==f.initV&&c==f.finalV||b.generateView():-1==e?(b.removeTopRow(1),b.appendRow(f.finalV-c)):1==e&&(b.prependRow(),b.removeBottomRow(c-f.finalV));f._saveDims();b.scrollView();
1>=this.setScrollVNumEles()&&this.refreshScrollbars()}};p._refreshTableWidths=function(f,b){var a=this.that,d=a.$tbl_header,c=b.header&&d,e=a.$tbl,h=b.table&&e,d=c?d.children().children(".pq-row-hidden"):null,m=c?a.$header.find(".pq-grid-col-resize-handle"):null,e=h&&e?e.children().children(".pq-row-hidden"):null,k,q=!1,g=0;h&&a.tables.length&&(h=a.tables[0].$tbl.children().children(".pq-row-hidden"),e=e?e.add(h):h);for(var h=a.iGenerateView.colDef,n=0,l=h.length;n<l;n++){var t=h[n],r=t.colIndx,u=
f[r].outerWidth,t=t.column.outerWidth;t!==u&&(c&&(k=d.find("td[pq-col-indx="+r+"]"),k.width(t)),e&&(k=e.find("td[pq-col-indx="+r+"]"),k.length&&(q=!0,k.width(t))));g+=t-u;c&&0!==g&&(r=m.filter("[pq-col-indx="+r+"]"),u=parseInt(r.css("left")),r.css("left",u+g))}q&&a._trigger("tableWidthChange");a._saveDims()}})(jQuery);
(function(l){function p(a,c,b){for(var d=0,e=a.length;d<e;d++){for(var h=a[d],m={},f=0,l=c.length;f<l;f++){var p=c[f];m[p]=h[p]}b.push(m)}}function f(a){var c=this;c.that=a;c.findformulas();a.on("columnChange",function(){c.findformulas()}).on("dataAvailable",function(){c._onDA()}).on(!0,"change",function(a,b){c._onchange(b)}).on("dataReady changeDone",function(){c.summaryData()})}var b=l.paramquery,a=b.cClass,d={options:{flex:{on:!0,one:!1,all:!0},detailModel:{cache:!0,offset:100,expandIcon:"ui-icon-triangle-1-se glyphicon glyphicon-minus",
collapseIcon:"ui-icon-triangle-1-e glyphicon glyphicon-plus"},dragColumns:{enabled:!0,acceptIcon:"ui-icon-check glyphicon-ok",rejectIcon:"ui-icon-closethick glyphicon-remove",topIcon:"ui-icon-circle-arrow-s glyphicon glyphicon-circle-arrow-down",bottomIcon:"ui-icon-circle-arrow-n glyphicon glyphicon-circle-arrow-up"},track:null,mergeModel:{flex:!1},realFocus:!0,sortModel:{on:!0,type:"local",multiKey:"shiftKey",number:!0,single:!0,cancel:!0,sorter:[],useCache:!0,ignoreCase:!1},filterModel:{on:!0,type:"local",
mode:"AND",header:!1}},_create:function(){var a=this,c=a.options;a.listeners={};a._queueATriggers={};a.iHistory=new b.cHistory(a);a.iGroupView=new b.cGroupView(a);b.cMerge&&(a.iMerge=new b.cMerge(a));a.iFilterData=new b.cFilterData(a);a.iSelection=new e.Selection(a);a.iHeaderSearch=new h(a);a.iUCData=new b.cUCData(a);a.iMouseSelection=new b.cMouseSelection(a);a._super();new f(a);a.iDragColumns=new b.cDragColumns(a);a.refreshToolbar();"remote"===c.dataModel.location&&a.refresh({table:!0});a.on("dataAvailable",
function(){a.one("refreshDone",function(){a._trigger("ready");setTimeout(function(){a.element&&a._trigger("complete")},0)})});a.__init();a.refreshDataAndView({header:!0})}},c;d.__init=function(){c||(c=l("<div style='position:fixed;bottom:0;right:20px;padding:0 2px;margin:0;opacity:0.5;z-index:10000;border:1px solid lightgray;border-radius:5px;'><a style='font-size:10px;text-decoration:none;' href='http://paramquery.com/pro'>ParamQuery Pro Eval</a></div>").appendTo(document.body))};l.widget("paramquery.pqGrid",
b._pqGrid,d);l.widget.extend=function(){var a=Array.prototype.shift,c=l.isPlainObject,b=l.isArray,d=l.widget.extend,e=a.apply(arguments),h;"boolean"==typeof e&&(h=e,e=a.apply(arguments));var m=arguments,f=0,p=m.length,w,x,z;for(null==h&&(h=1<p?!0:!1);f<p;f++)for(x in w=m[f],w)z=w[x],void 0!==z&&(a=0<f?!1:!0,c(z)?(e[x]=e[x]||{},d(a,e[x],z)):b(z)?e[x]=h&&a?z.slice():z:e[x]=z);return e};var e=window.pq=window.pq||{};e.grid=function(a,c){var b=l(a).pqGrid(c);return b.data("paramqueryPqGrid")||b.data("paramquery-pqGrid")};
b.pqGrid.regional={};d=b.pqGrid.prototype;b.pqGrid.defaults=d.options;d.focus=function(a){a=a||{};var c=a.$td,b=a.rowIndxPage;a=a.colIndx;if(c){if(null==b||null==a)a=this.getCellIndices({$td:c}),b=a.rowIndxPage,a=a.colIndx}else{if(null==b||null==a){if((b=document.activeElement)&&b!=document.body&&"pq-grid-excel"!=b.id&&"pq-grid-cont"!=b.className||!(c=this._focusElement))return;b=c.rowIndxPage,a=c.colIndx}var c=this.iMerge,d=b+this.rowIndxOffset;c.ismergedCell(d,a)&&(c=c.getRootCell(d,a,"o"),b=c.rowIndxPage,
a=c.colIndx);c=this.getCell({rowIndxPage:b,colIndx:a})}if(this.options.realFocus){this._focusElement={$ele:c,rowIndxPage:b,colIndx:a};var e;c[0]&&(e=c[0])&&"TD"==e.nodeName.toUpperCase()?(e.setAttribute("tabindex",0),e.focus()):(b=this.options.dataModel.data)&&b.length||this.$cont.focus()}else{if(e=this._focusElement)this.removeClass({rowIndxPage:e.rowIndxPage,colIndx:e.colIndx,cls:"pq-focus",refresh:!1}),this.element.find(".pq-focus").removeClass("pq-focus");c&&(this.addClass({rowIndxPage:b,colIndx:a,
cls:"pq-focus"}),this._focusElement={$ele:c,rowIndxPage:b,colIndx:a});b=this.$cont;document.activeElement!=b[0]&&b[0].focus()}};d.onfocus=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.addClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,cls:"pq-focus"})}};d.onblur=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.removeClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,cls:"pq-focus"})}};d.range=function(a,c){return new e.Range(this,a,"range",c)};d.rowExpand=
function(a){this.iHierarchy.rowExpand(a)};d.rowInvalidate=function(a){this.iHierarchy.rowInvalidate(a)};d.rowCollapse=function(a){this.iHierarchy.rowCollapse(a)};d.saveState=function(a){a=a||{};var c=this.element,b=l.extend,d=this.options,e=b(!0,{},{sorter:d.sortModel.sorter}),h=d.pageModel,h={rPP:h.rPP,curPage:h.curPage},m=this.colModel,f=[],p,w,x=0,z=m.length;w=d.groupModel;b=b(!0,{},{dataIndx:w.dataIndx,dir:w.dir,collapsed:w.collapsed,merge:w.merge,grandSummary:w.grandSummary});for(c=c[0].id;x<
z;x++){p=m[x];w={width:p.width,dataIndx:p.dataIndx};if(p=p.filter)w.filter={value:p.value,value2:p.value2,on:p.on};f[x]=w}d={colModel:f,height:d.height,datestamp:Date.now(),width:d.width,groupModel:b,pageModel:h,sortModel:e,freezeRows:d.freezeRows,freezeCols:d.freezeCols};!1!==a.stringify&&(d=JSON.stringify(d),!1!==a.save&&"undefined"!==typeof Storage&&localStorage.setItem("pq-grid"+(c?c:""),d));return d};d.loadState=function(a){a=a||{};var c;c=l.widget.extend;var b=l.extend,d=this.element[0].id;
if(d=a.state||("undefined"===typeof Storage?void 0:localStorage.getItem("pq-grid"+(d?d:""))))"string"==typeof d&&(d=JSON.parse(d));else return!1;for(var e=d.colModel,h,m,f=[],p=[],w=[],x=this.options,z=1<this.depth,A=z?this.colModel:x.colModel,C=0,s=e.length;C<s;C++)h=e[C],m=h.dataIndx,p[m]=C,f[m]=h.width,w[m]=h.filter;z||A.sort(function(a,c){return p[a.dataIndx]-p[c.dataIndx]});C=0;for(s=A.length;C<s;C++)e=A[C],m=e.dataIndx,e.width=f[m]||e.width,e.filter=b(e.filter,w[m]);this.iColModel.init();c(x.sortModel,
d.sortModel);c(x.pageModel,d.pageModel);c=d.groupModel;c.refresh=!1;this.groupOption(c);c={freezeRows:d.freezeRows,freezeCols:d.freezeCols};isNaN(1*x.height)||isNaN(1*d.height)||(c.height=d.height);isNaN(1*x.width)||isNaN(1*d.width)||(c.width=d.width);this.option(c);!1!==a.refresh&&this.refreshDataAndView();return!0};var h=function(a){function c(b,d,e){a.filter({data:[{dataIndx:b,value:d,value2:e}]})}this.that=a;var b=this;this.dataHS={};a.on("headerKeyDown",function(a,c){var d=l(a.originalEvent.target);
return d.hasClass("pq-grid-hd-search-field")?b.onKeyDown(a,c,d):!0});a.on("createHeader",function(a,c){return b._onCreateHeader()});this.changeListener={change:function(a,b){c(b.dataIndx,b.value,b.value2)}};this.keyupListener={keyup:function(a,b){c(b.dataIndx,b.value,b.value2)}};this.clickListener={click:function(a,b){c(b.dataIndx,b.value)}}},a=h.prototype=new a;a.get$Ele=function(a,c){var b=this.that,d=b.options.freezeCols,e=l(b.$tbl_header[0]),h=".pq-grid-hd-search-field[name='"+c+"']",b=l(b.$tbl_header[2==
b.$tbl_header.length?1:0]);return a>=d?b.find(h):e.find(h)};a.onKeyDown=function(a,c,b){c=this.that;if(a.keyCode===l.ui.keyCode.TAB){var d=b.attr("name"),e=c.getColIndx({dataIndx:d}),h=c.colModel,m,f=a.shiftKey,p=h[e];if("between"==p.filter.condition&&(c.scrollColumn({colIndx:e}),d=this.get$Ele(e,d),d[0]==b[0]?f||(m=d[1]):f&&(m=d[0]),m))return m.focus(),a.preventDefault(),!1;do{f?e--:e++;if(0>e||e>=h.length)break;p=h[e];b=p.filter;if(!p.hidden&&b){c.scrollColumn({colIndx:e});d=p.dataIndx;m=this.get$Ele(e,
d);"between"==b.condition&&(m=f?l(m[1]):l(m[0]));if(m)return m.focus(),a.preventDefault(),!1;break}}while(1)}else return!0};a._bindFocus=function(){function a(d){d=l(d.target).closest(".pq-grid-hd-search-field").attr("name");if(c.scrollColumn({dataIndx:d})){var e=c.getColIndx({dataIndx:d});b.get$Ele(e,d).focus()}}for(var c=this.that,b=this,d=c.$header.find(".pq-grid-header-search-row"),e=0;e<d.length;e++)l(d[e]).on("focusin",a)};a._onCreateHeader=function(){var a=this.that,c=a.options;if(c.filterModel.header){this._bindFocus();
var b=a.colModel,c=c.freezeCols,d=a.$tbl_header,e=l(d[0]),h=l(d[1]),m="input,select";if(1<d.length){e.find(m).css("visibility","hidden");for(var f=0;f<c;f++){var p=b[f],m="*[name='"+p.dataIndx+"']";e.find(m).css("visibility","visible");h.find(m).css("visibility","hidden")}}b=a.iGenerateView.colDef;f=0;for(m=b.length;f<m;f++){var w=b[f],x=w.colIndx,p=w.column,z=p.filter;if(z){var w=p.dataIndx,A=e;x>=c&&1<d.length&&(A=h);x=A.find("*[name='"+w+"']");if(0!=x.length){var A=z.type,C=z.value,s=z.value2;
"checkbox"==A&&"triple"==z.subtype?x.pqval({val:C}):"select"==A&&null!=C&&x.val(C);(A=z.init)&&A.call(x,{dataIndx:w,column:p});if(p=z.listeners)for(z=0;z<p.length;z++){A=p[z];"string"==typeof A&&(A=this[A+"Listener"]);for(var y in A)(function(c,b,d){c.bind(y,function(e){var g=a.getColumn({dataIndx:d}),h=g.filter;"checkbox"==h.type?C="triple"==h.subtype?c.pqval({incr:!0}):c.is(":checked")?!0:!1:"between"==h.condition?(C=l(c[0]).val(),s=l(c[1]).val()):C=c.val();return b.call(this,e,{column:g,dataIndx:d,
value:C,value2:s})})})(x,A[y],w)}}}}}};var m=function(a,c){return["<div class='pq-from-div'>",a,"</div><span class='pq-from-to-center'>-</span><div class='pq-to-div'>",c,"</div>"].join("")};a.createDOM=function(a,c){var d=this.that,e=d.options,h=e.bootstrap.on?" ":" ui-corner-all",e=e.numberCell;a.push("<tr class='pq-grid-header-search-row'>");e.show&&a.push("<td pq-col-indx='-1' class='pq-grid-number-col' rowspan='1'><div class='pq-td-div'>&nbsp;</div></td>");for(var e=d.iGenerateView.colDef,f=0,
l=e.length;f<l;f++){var p=e[f].column,v=c,w=p.halign;w||(w=p.align);"right"==w?v+=" pq-align-right":"center"==w&&(v+=" pq-align-center");(w=p.cls)&&(v=v+" "+w);if(w=p.filter){var x=p.dataIndx,z=w.type,A=w.value,C=w.condition,s=w.cls,s="pq-grid-hd-search-field "+(s?s:""),y=w.style,y=y?y:"",E=w.attr,E=E?E:"",D="";if("between"==C)var F=w.value2,F=null!=F?F:"";"textbox"===z?(A=A?A:"",s=s+" pq-search-txt"+h,D="between"==C?m(this._input(x,A,s+" pq-from",y,E),this._input(x,F,s+" pq-to",y,E)):this._input(x,
A,s,y,E)):"textarea"===z?(A=A?A:"",s=s+" pq-search-txt"+h,D="between"==C?m(this._textarea(x,A,s+" pq-from",y,E),this._textarea(x,F,s+" pq-to",y,E)):this._textarea(x,A,s,y,E)):"select"===z?w.cache?D=w.cache:(z=w.options,"function"===typeof z&&(z=z.call(d,{column:p,value:A,dataIndx:x,cls:s,style:y,attr:E})),s+=h,p=["name='",x,"' class='",s,"' style='",y,"' ",E].join(""),D=b.select({options:z,attr:p,prepend:w.prepend,valueIndx:w.valueIndx,labelIndx:w.labelIndx,groupIndx:w.groupIndx}),w.cache=D):"checkbox"==
z?D=["<input ",null==A||!1==A?"":"checked=checked"," name='",x,"' type=checkbox class='"+s+"' style='"+y+"' "+E+"/>"].join(""):"string"==typeof z?D=z:"function"==typeof z&&(D=z.call(d,{width:p.outerWidth,value:A,value2:F,column:p,dataIndx:x,cls:s,attr:E,style:y}));a.push(["<td class='",v,"'><div class='pq-td-div' >",D,"</div></td>"].join(""))}else a.push(["<td class='",v,"'><div class='pq-td-div' >&nbsp;</div></td>"].join(""))}a.push("</tr>")};a._input=function(a,c,b,d,e){return['<input value="',
c,"\" name='",a,"' type=text style='"+d+"' class='"+b+"' "+e+" />"].join("")};a._textarea=function(a,c,b,d,e){return["<textarea name='",a,"' style='"+d+"' class='"+b+"' "+e+" >",c,"</textarea>"].join("")};d.refreshToolbar=function(){var a=this.options,c=a.toolbar,b;this._toolbar&&(b=this._toolbar,b.destroy());if(c){var d=c.cls,h=c.style,m=c.attr,c=c.items,d=l("<div class='"+(d?d:"")+"' style='"+(h?h:"")+"' "+(m?m:"")+" ></div>");b?b.widget().replaceWith(d):this.$top.append(d);b=e.toolbar(d,{items:c,
gridInstance:this,bootstrap:a.bootstrap});a.showToolbar||d.css("display","none");this._toolbar=b}};d.isLeftOrRight=function(a){return a>this.freezeCols?"right":"left"};d.ovCreateHeader=function(a,c){this.options.filterModel.header&&this.iHeaderSearch.createDOM(a,c)};d.filter=function(a){var c=this,b=this.options,d=void 0===a.apply?!0:a.apply,e=void 0===a.sort?!0:a.sort,h=b.dataModel,b=b.filterModel;if(void 0!=a){var m="replace"==a.oper?!0:!1;a=a.data;for(var f=this.colModel,f=d?f:l.extend(!0,[],f),
p=0,w=f.length,x=a.length,z=0;z<w;z++){for(var A=f[z],C=!1,s=0;s<x&&p!=x;s++){var y=a[s];if(y.dataIndx==A.dataIndx){C=!0;p++;var s=A.filter,E=y.condition,D=y.value;s?s.on=!0:s=A.filter={on:!0};E&&(s.condition=E);E=s.condition;s.value=D;if("between"==E)s.value2=y.value2;else if("range"==E){y=[];if(D)if("string"==typeof D){var E=s.options,F=D.indexOf('"'),K=D.lastIndexOf('"'),D=D.substr(F,K+1),D=JSON.parse("["+D+"]");if(E)for(F=0,K=E.length;F<K;F++){var I=E[F];-1!=l.inArray(I,D)&&y.push(I)}else y=D.split(",s*")}else"function"==
typeof D.push&&(y=D);s.value=y}break}}m&&!C&&A.filter&&(A.filter.on=!1)}}var J={header:!1,apply:d,sort:e,CM:f};if("remote"==h.location&&"local"!=b.type)this.remoteRequest({apply:d,CM:f,callback:function(){return c._onDataAvailable(J)}});else return J.source="filter",J.trigger=!1,c._onDataAvailable(J)};d._initTypeColumns=function(){for(var a=this.colModel,c=0,d=a.length;c<d;c++){var e=a[c],h=e.type;"checkBoxSelection"===h||"checkbox"==h?(e.type="checkbox",new b.cCheckBoxColumn(this,e)):"detail"===
h&&(e.dataIndx="pq_detail",this.iHierarchy=new b.cHierarchy(this,e))}};d.refreshHeader=function(){this._createHeader();this.iGenerateView.setPanes();this._refreshHeaderSortIcons()};d._refreshHeaderSortIcons=function(){this.iHeader.refreshHeaderSortIcons()};d.getLargestRowCol=function(a){for(var c=0;c<a.length;c++);};d.bringCellToView=function(a){this._bringCellToView(a)};d._setUrl=function(a){this.options.dataModel.getUrl=function(){return{url:this.url+(null!=a?a:"")}}};d.pageData=function(){return this.pdata};
d.getData=function(a){a=a||{};var c=a.dataIndx,b=c?c.length:0,d=a.data;a=this.options.dataModel;var e=a.data,h=a.dataUF;a=[];if(b)d?p(d,c,a):(e&&p(e,c,a),h&&p(h,c,a));else return e.concat(h?h:[]);d=[];for(e=0;e<b;e++){var h=c[e],m=this.getColumn({dataIndx:h});d.push({dataIndx:h,dir:"up",dataType:m.dataType,sortType:m.sortType})}a=this.iSort._sortLocalData(d,a);c=[];b=void 0;d=0;for(e=a.length;d<e;d++)h=a[d],m=JSON.stringify(h),m!==b&&(c.push(h),b=m);return c};d.get_p_data=function(){var a=this.options,
c="remote"==a.pageModel.type,b=a.dataModel.data,d=this.pdata,e=this.rowIndxOffset,a=a.groupModel,h=e&&c?Array(e):[];return a.on&&a.dataIndx.length?e?(c||(h=b.slice(0,e)),h.concat(d)):d:e&&c?h.concat(d):b};d._onDataAvailable=function(a){a=a||{};var c=this.options,b=null==a.apply?!0:a.apply,d=a.source,e=a.sort,h=[],h=c.filterModel,m=c.dataModel,c=c.sortModel,f=m.location;!1!==b&&!1!==a.trigger&&this._trigger("dataAvailable",a.evt,{source:d});h=h&&h.on&&("local"==f&&"remote"!=h.type||"remote"==f&&"local"==
h.type)?this.iFilterData.filterLocalData(a).data:m.data;"local"==c.type&&!1!==e&&(b?this.sort({refresh:!1}):h=this.iSort.sortLocalData(h));if(!1===b)return h;m.data=h;this.refreshView(a)};d.sort=function(a){a=a||{};var c=this,b=this.options,d=b.dataModel.data,e=b.sortModel.type;if(d&&d.length||"local"!=e){var h=b.editModel,b=this.iSort,m=b.getSorter(),f,l=a.evt,p=null==a.single?b.readSingle():a.single;f=b.readCancel();a.sorter?a.addon?(a.single=p,a.cancel=f,f=b.refreshSorter(a)):f=a.sorter:f=b.readSorter();
if(f.length||m.length)h.indices&&c.blurEditor({force:!0}),h={dataIndx:f.length?f[0].dataIndx:null,oldSorter:m,sorter:f,source:a.source,single:p},!1===c._trigger("beforeSort",l,h)?b.cancelSort():(b.resumeSort(),"local"==e&&b.saveOrder(),b.setSorter(f),b.setSingle(p),b.writeSorter(f),b.writeSingle(p),"local"==e?(b.sortLocalData(d),this._queueATriggers.sort={evt:l,ui:h},!1!==a.refresh&&this.refreshView()):"remote"==e&&(this._queueATriggers.sort={evt:l,ui:h},a.initByRemote||this.remoteRequest({initBySort:!0,
callback:function(){c._onDataAvailable()}})))}};d.reset=function(a){a=a||{};var c=a.sort,b,d=0,e;b=this.options;e=l.extend;var h,m=a.filter,f=a.group;if(c||m||f){c&&(h=!0===c?{sorter:[]}:c,e(b.sortModel,h));if(m)for(b=this.getColModel(),e=b.length;d<e;d++)if(h=b[d].filter)h.value=null,h.value2=null,h.cache=null;f&&(d=!0===f?{dataIndx:[]}:f,d.refresh=!1,this.groupOption(d));!1!==a.refresh&&(m?(this.filter({oper:"replace",data:[]}),this.refreshHeader()):c?this.sort():this.refreshView())}};d._trigger=
b._trigger;d.on=b.on;d.one=b.one;d.off=b.off;d.pager=function(){return this.pagerW};d.vscrollbar=function(){return this.vscroll};d.hscrollbar=function(){return this.hscroll};d.toolbar=function(){return this._toolbar.element};a=f.prototype;a.callRow=function(a,c,b){if(a)for(;b--;){var d=c[b],e=d.column;a[e.dataIndx]=d.formula.call(this.that,{rowData:a,column:e})}};a._onDA=function(){var a=this.formulas.length;if(a)for(var c=this.that.options.dataModel.data,b=c.length,d=this.formulas;b--;)this.callRow(c[b],
d,a)};a.summaryData=function(){var a=this.formulas,c=a.length,b,d;if(c)for(b=this.that.options.summaryData||[],d=b.length;d--;)this.callRow(b[d],a,c)};a._onchange=function(a){var c=this.formulas.length;if(c){a=a.rowList;for(var b=this.formulas,d=a.length;d--;)this.callRow(a[d].rowData,b,c)}};a.findformulas=function(){for(var a=this.that.colModel,c,b,d=[],e=a.length;e--;)c=a[e],(b=c.formula)&&d.push({formula:b,column:c});this.formulas=d};a=b.cColModel=a=function(a){this.that=a;this.init()};a=a.prototype;
a.extend=function(a,c){for(var b,d,e=l.extend,h=a.length;h--;){var m=a[h];for(b in c)void 0===m[b]&&(d=c[b],m[b]=d&&"object"==typeof d?e(!0,{},d):d)}};a.init=function(){var a=this.that,c=a.options,b=c.columnTemplate,d;d=c.colModel;d||(this._autoGenColumns(),d=c.colModel);c=this.nestedCols(d);a.depth=c.depth;c=a.colModel=c.colModel;d=c.length;b&&this.extend(c,b);this.getHeadersCells();this.alignColumns(c,d);this.assignRowSpan();this._refreshDataIndices();a._trigger("CMInit")};a.alignColumns=function(a,
c){for(var b=0;b<c;b++){var d=a[b];if(!d.align){var e=d.dataType;!e||"integer"!=e&&"float"!=e||(d.align="right")}}};a.nestedCols=function(a,c,b,d){var e=a.length,h=[];null==c&&(c=1);for(var m=c,f=0,l=0,p=0,x=0;x<e;x++){var z=a[x];z.parent=d?d:void 0;!0===b&&(z.hidden=b);var A=z.colModel;A&&A.length?(A=this.nestedCols(A,c+1,z.hidden,z),h=h.concat(A.colModel),0<A.colSpan?(A.depth>m&&(m=A.depth),z.colSpan=A.colSpan,f+=A.colSpan):z.colSpan=0,p+=A.o_colspan,z.o_colspan=A.o_colspan,z.childCount=A.childCount,
l+=A.childCount):(z.hidden?z.colSpan=0:(z.colSpan=1,f++),p++,z.o_colspan=1,z.childCount=0,l++,h.push(z))}return{depth:m,colModel:h,colSpan:f,width:0,childCount:l,o_colspan:p}};a.getHeadersCells=function(){for(var a=this.that,c=a.options.colModel,b=a.colModel.length,d=a.depth,e=[],h=0;h<d;h++){e[h]=[];for(var m=0,f=0,l=0;l<b;l++){var p;if(0==h)p=c[m];else{var x=e[h-1][l];if((p=x.colModel)&&0!=p.length){for(var x=l-x.leftPos,z=0,A=0,C=0;C<p.length;C++)if(z+=0<p[C].childCount?p[C].childCount:1,x<z){A=
C;break}p=p[A]}else p=x}x=p.childCount?p.childCount:1;l==f?(p.leftPos=l,e[h][l]=p,f+=x,c[m+1]&&m++):e[h][l]=e[h][l-1]}}return a.headerCells=e};a.getDataType=function(){var a=this.colModel;if(a&&a[0])return"string"==typeof a[0].dataIndx?"JSON":"ARRAY"};a.assignRowSpan=function(){for(var a=this.that,c=a.colModel.length,b=a.headerCells,a=a.depth,d=0;d<c;d++)for(var e=0;e<a;e++){var h=b[e][d];if(!(0<d&&h==b[e][d-1]||0<e&&h==b[e-1][d])){for(var m=1,f=e+1;f<a;f++)h==b[f][d]&&m++;h.rowSpan=m}}return b};
a._autoGenColumns=function(){var a=this.that.options,c=a.columnTemplate||{},b=c.dataType,d=c.title,h=c.width,c=a.dataModel.data,m=e.validation,f=[];c&&c.length&&l.each(c[0],function(a,c){var e="string";m.isInteger(c)?e=-1<c+-1?"float":"integer":m.isDate(c)?e="date":m.isFloat(c)&&(e="float");f.push({dataType:b?b:e,dataIndx:a,title:d?d:a,width:h?h:100})});a.colModel=f};a._refreshDataIndices=function(){for(var a=this.that,c="JSON"==this.getDataType()?!0:!1,b={},d={},e={},h=a.colModel,m=h.length,f=0;f<
m;f++){var l=h[f],p=l.dataIndx;null==p&&(p="detail"==l.type?"pq_detail":c?"dataIndx_"+f:f,"pq_detail"==p&&(l.dataType="object"),l.dataIndx=p);b[p]=l;d[p]=f;l.validations&&(e[p]=e)}a.columns=b;a.colIndxs=d;a.validations=e}})(jQuery);
(function(l){var p=l.paramquery,f=p._pqGrid.prototype;f.exportExcel=function(a){a=a||{};a.format="xlsx";return this.exportData(a)};f.exportCsv=function(a){a=a||{};a.format="csv";return this.exportData(a)};f.exportData=function(a){return(new b(this,a)).Export(a)};var b=p.cExport=function(a,b){this.that=a;this.templates={content_types:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Override PartName="/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/worksheet.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/></Types>',
workbook:";>wlk udqrhnm<!0-/! dmbnchmf<!TSE,7! rs`mc`knmd<!xdr!>=;vnqjannj wlkmr<!gsso9..rbgdl`r-nodmwlkenql`sr-nqf.roqd`crgddslk.1//5.l`hm! wlkmr9q<!gsso9..rbgdl`r-nodmwlkenql`sr-nqf.neehbdCnbtldms.1//5.qdk`shnmrghor!=;rgddsr=;rgdds m`ld<!O`q`lPtdqx Oqn Du`k! rgddsHc<!0! q9hc<!qHc0!.=;.rgddsr=;.vnqjannj=".replace(/[^\s]/g,function(a){return String.fromCharCode(a.charCodeAt(0)+1)}),worksheet:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><%=content%></worksheet>',
rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="workbook.xml"/></Relationships>',workbook_rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheet.xml"/></Relationships>'}},
f=b.prototype;f.getTitle=function(a,b){var c=a.title;c?"function"==typeof c&&(c=c.call(this.that,{colIndx:b,column:a,dataIndx:a.dataIndx,Export:!0})):c="";return c};f.getRenderVal=function(a,b,c){var e=a.column,h=e.exportRender;return(b&&!1!==h||h)&&(e.render||e._render||e.format)?c.renderCell(a):a.rowData[a.dataIndx]};f.getXlsMergeCells=function(a,b,c,e){a=a.concat(c.getMergeCells(b,this.curPage,e));b=[];c=p.toLetter;e=a.length;b.push('<mergeCells count="'+e+'">');for(var h=0;h<e;h++){var m=a[h],
m=c(m.c1)+(m.r1+1)+":"+c(m.c2)+(m.r2+1);b.push('<mergeCell ref="',m,'"/>')}b.push("</mergeCells>");return e?b.join(""):""};f.getXlsCols=function(a,b){var c=[];c.push("<cols>");for(var e=0;e<b;e++){var h=a[e],m=e+1,k=h.hidden?"1":"0",f=h._width;f||(f=parseInt(h.width))||(f=100);c.push('<col min="',m,'" max="',m,'" hidden="',k,'" customWidth="1" width="',f/7,'"/>')}c.push("</cols>");return c.join("")};f.getXlsHeader=function(a,b,c){for(var e=[],h=0;h<b;h++){var m=a[h];e.push("<row>");for(var k=0,f=
m.length;k<f;k++){var g=m[k];if(!1!==g.copy){var n=g.o_colspan,l=g.rowSpan,p=this.getTitle(g,k);0<h&&g==a[h-1][k]?p="":0<k&&g==a[h][k-1]?p="":(1<n||1<l)&&c.push({r1:h,c1:k,r2:h+l-1,c2:k+n-1});e.push('<c t="inlineStr"><is><t><![CDATA['+p+"]]\x3e</t></is></c>")}}e.push("</row>")}return e.join("")};f.getXlsBody=function(a,b,c,e,h,m,k,f,g){var n=[],l,p,r,u,v,w,x={integer:"Number","float":"Number",bool:"bool"};for(l=0;l<e;l++){v=c[l];p=v.pq_hidden?'hidden="1"':"";w=h?l+m:l;r=w-m;v={rowIndx:w,rowIndxPage:r,
rowData:v,Export:!0};n.push("<row "+p+">");for(p=0;p<b;p++)u=a[p],!1!==u.copy&&(r=void 0,k.ismergedCell(w,p)&&(k.isRootCell(w,p,"o")||(r=null)),void 0===r&&(v.colIndx=p,v.column=u,v.dataIndx=u.dataIndx,r=this.getRenderVal(v,f,g)),u=(u=null==r?null:x[u.dataType])?u:"String","Number"==u&&(isNaN(1*r)?u="String":r*=1),r=null==r?"":r,"String"==u?n.push('<c t="inlineStr"><is><t><![CDATA['+r+"]]\x3e</t></is></c>"):"Number"==u?n.push("<c><v>"+r+"</v></c>"):"bool"==u?(r=r?"1":"0",n.push('<c t="b"><v>'+r+"</v></c>")):
n.push("<c><v>"+r+"</v></c>"));n.push("</row>")}return n.join("\n")};f.getXlsContent=function(a,b,c,e,h,m,k,f,g,n,l,p){var r='<sheetViews><sheetView tabSelected="1" workbookViewId="0"><pane ySplit="<%=a%>" topLeftCell="A<%=b%>" activePane="bottomLeft" state="frozen"/></sheetView></sheetViews>',u=this.getXlsCols(a,b),v=[],w=p?e:0,r=r.replace("<%=a%>",w),r=r.replace("<%=b%>",w+1);c=p?this.getXlsHeader(c,e,v):"";a=this.getXlsBody(a,b,h,m,k,f,g,n,l);return[r,u,"<sheetData>",c,a,"</sheetData>",this.getXlsMergeCells(v,
p?e:0,g,m)].join("")};f.getHtmlHeader=function(a,b){for(var c=[],e,h,m,k,f=0;f<b;f++){var g=a[f],n=null;c.push("<tr>");for(var l=0,p=g.length;l<p;l++)e=g[l],h=e.colSpan,!e.hidden&&h&&!1!==e.copy&&(m=e.rowSpan,0<f&&e==a[f-1][l]||n&&0<l&&e==n||(k=this.getTitle(e,l),n=e,e=(e=e.halign||e.align)?"align="+e:"",c.push("<th colspan=",h," rowspan=",m," ",e,">",k,"</th>")));c.push("</tr>")}return c.join("")};f.getHtmlBody=function(a,b,c,e,h,m,k,f,g){var n=[],l,p,r,u,v,w,x;for(l=0;l<e;l++)if(p=c[l],!p.pq_hidden){x=
h?l+m:l;w=x-m;w={rowIndx:x,rowIndxPage:w,rowData:p,Export:!0};n.push("<tr>");for(p=0;p<b;p++)if(r=a[p],!r.hidden&&!1!==r.copy){v="";if(k.ismergedCell(x,p)){if(v=k.isRootCell(x,p))u=k.getRootCell(x,p,"o"),u.Export=!0,u=this.getRenderVal(u,f,g);else continue;v="rowspan="+v.rowspan+" colspan="+v.colspan+" "}else w.colIndx=p,w.column=r,w.dataIndx=r.dataIndx,u=this.getRenderVal(w,f,g);r=r.align;v+=r?"align="+r:"";u=null==u?"":u;n.push("<td ",v,">",u,"</td>")}n.push("</tr>")}return n.join("")};f.getHtmlContent=
function(a,b,c,e,h,m,k,f,g,n,l,p,r){var u=a.cssRules||"",v=this.that.element.find(".pq-grid-table"),w=v.css("font-family"),v=v.css("font-size"),x=[];x.push("<!DOCTYPE html><html><head>",'<meta charset="utf-8" />',"<title>",a.title?a.title:"ParamQuery Pro","</title>","</head><body>","<style>","table{empty-cells:show;font-family:"+w+";font-size:"+v+";border-collapse:collapse;}","td,th{padding: 5px;border:1px solid #ccc;}",u,"</style>","<table>");x.push(r?this.getHtmlHeader(e,h,b):"");x.push(this.getHtmlBody(b,
c,m,k,f,g,n,l,p));x.push("</table></body></html>");return x.join("")};f.getCsvHeader=function(a,b,c,e){for(var h=[],m=[],k,f,g=0;g<b;g++){for(var n=a[g],l=null,p=0,r=n.length;p<r;p++)k=c[p],k.hidden||!1===k.copy||(k=n[p],0<g&&k==a[g-1][p]?h.push(""):l&&0<p&&k==l?h.push(""):(f=(f=this.getTitle(k,p))?f.replace(/\"/g,'""'):"",l=k,h.push('"'+f+'"')));m.push(h.join(e));h=[]}return m};f.getCSVContent=function(a,b,c,e,h,m,k,f,g,n,l,p,r){var u,v;a=a.separator||",";var w,x=[];r=r?this.getCsvHeader(e,h,b,a):
[];for(e=0;e<k;e++)if(v=m[e],!v.pq_hidden){h=f?e+g:e;w=h-g;w={rowIndx:h,rowIndxPage:w,rowData:v,Export:!0};for(v=0;v<c;v++)u=b[v],u.hidden||!1===u.copy||(n.ismergedCell(h,v)?n.isRootCell(h,v)?(u=n.getRootCell(h,v,"o"),u.Export=!0,u=this.getRenderVal(u,l,p)):u="":(w.colIndx=v,w.column=u,w.dataIndx=u.dataIndx,u=this.getRenderVal(w,l,p)),u=(null==u?"":u)+"",u=u.replace(/\"/g,'""'),x.push('"'+u+'"'));r.push(x.join(a));x=[]}return r.join("\n")};f.getJsonContent=function(a,b){function c(a,c){return 0===
(a+"").indexOf("pq_")?void 0:c}return a.nostringify?b:JSON.stringify(b,a.nopqdata?c:null,a.nopretty?null:2)};f.postRequest=function(a){var b=a.format,c,e=a.url,h=a.filename||"pqGrid";a.zip&&"xlsx"!=b?(b=new JSZip,b.file(h+"."+a.format,a.data),a=b.generate({type:"base64",compression:"DEFLATE"}),c=!0,b="zip"):(c=a.decodeBase?!0:!1,a=a.data);e&&l.ajax({url:e,type:"POST",cache:!1,data:{pq_ext:b,pq_data:a,pq_decode:c,pq_filename:h},success:function(a){e+=(0<e.indexOf("?")?"&":"?")+"pq_filename="+a;l(document.body).append("<iframe height='0' width='0' frameborder='0' src=\""+
e+'"></iframe>')}});return a};f.Export=function(a){var b=this.that,c=b.options,e,h,m,k=this.templates,f=c.groupModel;h="remote"==c.pageModel.type;e=b.rowIndxOffset;var g=b.iGenerateView,n=b.iMerge,l=b.colModel,p=l.length,r=b.headerCells,u=r.length,f=(this.curPage=f.on&&f.dataIndx.length||h)?b.pdata:c.dataModel.data,f=c.summaryData?f.concat(c.summaryData):f,v=f.length,c=a.url,w=a.render,x=!a.noheader,z=a.format;b._trigger("beforeExport",null,a);"xlsx"==z?(e=this.getXlsContent(l,p,r,u,f,v,h,e,n,w,g,
x),h=new JSZip,h.file("[Content_Types].xml",k.content_types),h.file("workbook.xml",k.workbook),h.file("worksheet.xml",k.worksheet.replace("<%=content%>",e)),e=h.folder("_rels"),e.file(".rels",k.rels),e.file("workbook.xml.rels",k.workbook_rels),c?(a.data=h.generate({type:"base64",compression:"DEFLATE"}),a.decodeBase=!0):m=h.generate({type:"blob",compression:"DEFLATE"})):a.data="json"==z?this.getJsonContent(a,f):"csv"==z?this.getCSVContent(a,l,p,r,u,f,v,h,e,n,w,g,x):this.getHtmlContent(a,l,p,r,u,f,
v,h,e,n,w,g,x);m=m?m:this.postRequest(a);b._trigger("exportData",null,a);return m}})(jQuery);
(function(l){var p=l.paramquery,f={options:{items:[],gridInstance:null}};l.widget("paramquery.pqToolbar",f);f=p.pqToolbar.prototype;f.refresh=function(){this.element.empty();this._create()};f._create=function(){var b=this.options,a=b.gridInstance,d={button:"click",select:"change",checkbox:"change",textbox:"change"},c,e,h=b.bootstrap,m=h.on,k=a.colModel,b=b.items,f=this.element;f.addClass("pq-toolbar");for(var g=0,n=b.length;g<n;g++){var B=b[g],t=B.type,r=B.value,u=B.icon,v=B.options||{},w=B.label,
x=(e=B.listener)?[e]:B.listeners,x=x||[function(){}];e=(e=B.cls)?e:"";e=(e=m&&"button"==t?h.btn+" "+e:e)?"class='"+e+"'":"";var z=B.style,z=z?"style='"+z+"'":"",A=B.attr,C=A?A:"",A=w&&"button"!=t?[e,C]:[e,C,z],A=A.join(" "),s;B.options=v;"textbox"==t?s=l([w?"<label "+z+">"+w:"","<input type='text' "+A+">",w?"</label>":""].join("")):"textarea"==t?s=l([w?"<label "+z+">"+w:"","<textarea "+A+"></textarea>",w?"</label>":""].join("")):"checkbox"==t?s=l([w?"<label "+z+">":"","<input type='checkbox' ",r?
"checked='checked' ":"",A,">",w?w+"</label>":""].join("")):"separator"==t?s=l("<span class='pq-separator' "+[C,z].join(" ")+"></span>"):"button"==t?(s="",m&&(s=u?"<span class='glyphicon "+u+"'></span>":""),s=l("<button type='button' "+A+">"+s+w+"</button>"),l.extend(v,{label:w?w:!1,icons:{primary:m?"":u}}),s.button(v)):"select"==t?("function"===typeof v&&(v=v.call(a,{colModel:k})),v=v||[],s=p.select({options:v,attr:A,prepend:B.prepend,groupIndx:B.groupIndx,valueIndx:B.valueIndx,labelIndx:B.labelIndx}),
s=l([w?"<label "+z+">"+w:"",s,w?"</label>":""].join(""))):"string"==typeof t?s=l(t):"function"==typeof t&&(s=t.call(a,{colModel:k,cls:e}),s=l(s));s.appendTo(f);"checkbox"!==t&&void 0!==r&&(w?l(s[0].children[0]).val(r):s.val(r));r=0;for(w=x.length;r<w;r++)for(c in e=x[r],u={},"function"==typeof e?u[d[t]]=e:u=e,u)s.on(c,this._onEvent(a,u[c],B))}};f._onEvent=function(b,a,d){return function(c){d.value="checkbox"==d.type?l(c.target).prop("checked"):l(c.target).val();a.call(b,c)}};f._destroy=function(){this.element.empty().removeClass("pq-toolbar").enableSelection()};
f._disable=function(){null==this.$disable&&(this.$disable=l("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};f._enable=function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};f._setOption=function(b,a){"disabled"==b&&(!0==a?this._disable():this._enable())};pq.toolbar=function(b,a){var d=l(b).pqToolbar(a);return d.data("paramqueryPqToolbar")||d.data("paramquery-pqToolbar")}})(jQuery);
(function(l){var p=l.paramquery,f=p.pqGrid.prototype.options,b={on:!1,dirtyClass:"pq-cell-dirty"};f.trackModel=f.trackModel||b;f=(p.cUCData=function(a){this.that=a;this.udata=[];this.ddata=[];this.adata=[];this.options=a.options;var b=this;a.on("dataAvailable",function(a,e){"filter"!=e.source&&(b.udata=[],b.ddata=[],b.adata=[])})}).prototype=new p.cClass;f.add=function(a){var b=this.that,c=this.adata,e=this.ddata;a=a.rowData;for(var h=this.options.trackModel.dirtyClass,m=b.getRecId({rowData:a}),k=
0,f=c.length;k<f;k++){var g=c[k];if(null!=m&&g.recId==m)throw"primary key violation";if(g.rowData==a)throw"same data can't be added twice.";}k=0;for(f=e.length;k<f;k++)if(a==e[k].rowData){e.splice(k,1);return}var e=[],n;for(n in a)e.push(n);b.removeClass({rowData:a,dataIndx:e,cls:h});a={recId:m,rowData:a};c.push(a)};f.update=function(a){var b=this.that,c=this.options.trackModel.dirtyClass,e=a.rowData||b.getRowData(a),h=b.getRecId({rowData:e}),m=a.dataIndx,k=a.refresh,f=b.columns,g=b.getValueFromDataType;
a=a.row;var n=this.udata,p=n.slice(0),t=!1;if(null!=h){for(var r=0,u=n.length;r<u;r++){var v=n[r],w=v.oldRow;if(v.rowData==e){t=!0;for(m in a)n=f[m].dataType,u=a[m],u=g(u,n),v=w[m],v=g(v,n),w.hasOwnProperty(m)&&v===u?(n={rowData:e,dataIndx:m,refresh:k,cls:c},b.removeClass(n),delete w[m]):(n={rowData:e,dataIndx:m,refresh:k,cls:c},b.addClass(n),w.hasOwnProperty(m)||(w[m]=e[m]));l.isEmptyObject(w)&&p.splice(r,1);break}}if(!t){w={};for(m in a)w[m]=e[m],n={rowData:e,dataIndx:m,refresh:k,cls:c},b.addClass(n);
n={rowData:e,recId:h,oldRow:w};p.push(n)}this.udata=p}};f["delete"]=function(a){var b=this.that,c=a.rowIndx,e=a.rowIndxPage,h=b.rowIndxOffset,c=null==c?e+h:c,e="remote"==b.options.pageModel.type?null==e?c-h:e:c,h=this.adata,m=this.ddata;a=b.getRowData(a);for(var b=0,k=h.length;b<k;b++)if(h[b].rowData==a){h.splice(b,1);return}m.push({indx:e,rowData:a,rowIndx:c})};f.isDirty=function(a){var b=this.udata,c=this.adata,e=this.ddata,h=!1;if(a=this.that.getRowData(a))for(c=0;c<b.length;c++){if(a==b[c].rowData){h=
!0;break}}else if(b.length||c.length||e.length)h=!0;return h};f.getChangesValue=function(a){a=a||{};var b=this.that;a=a.all;for(var c=this.udata,e=this.adata,h=this.ddata,m=[],k=[],f=[],g=[],n=[],p=[],t=0,r=h.length;t<r;t++){var u=h[t],v=u.rowData,w={};n.push(v);for(var x in v)0!=x.indexOf("pq_")&&(w[x]=v[x]);p.push(w)}t=0;for(r=c.length;t<r;t++)if(u=c[t],h=u.oldRow,v=u.rowData,-1==l.inArray(v,n)&&-1==l.inArray(v,m)){w={};if(!1!==a)for(x in v)0!=x.indexOf("pq_")&&(w[x]=v[x]);else{for(x in h)w[x]=
v[x];w[b.options.dataModel.recIndx]=u.recId}m.push(v);k.push(w);f.push(h)}t=0;for(r=e.length;t<r;t++){u=e[t];v=u.rowData;w={};for(x in v)0!=x.indexOf("pq_")&&(w[x]=v[x]);g.push(w)}return{updateList:k,addList:g,deleteList:p,oldList:f}};f.getChanges=function(){for(var a=this.udata,b=this.adata,c=this.ddata,e=l.inArray,h=[],m=[],k=[],f=[],g=0,n=c.length;g<n;g++){var p=c[g],p=p.rowData;f.push(p)}g=0;for(n=a.length;g<n;g++)p=a[g],c=p.oldRow,p=p.rowData,-1==e(p,f)&&-1==e(p,h)&&(h.push(p),m.push(c));g=0;
for(n=b.length;g<n;g++)p=b[g],p=p.rowData,k.push(p);return{updateList:h,addList:k,deleteList:f,oldList:m}};f.getChangesRaw=function(){var a=this.adata,b=this.ddata,c={updateList:[],addList:[],deleteList:[]};c.updateList=this.udata;c.addList=a;c.deleteList=b;return c};f.commitAdd=function(a,b){for(var c=this.that,e=c.colModel,h=e.length,m=this.adata,k=l.inArray,f=m.length,g=c.getValueFromDataType,c=[],n=a.length,p=[],t=0;t<n;t++)for(var r=a[t],u=0;u<f;u++){var v=m[u].rowData,w=!0;if(-1==k(v,p)){for(var x=
0;x<h;x++){var z=e[x],A=z.dataType,C=z.dataIndx;if(!z.hidden&&C!=b&&(z=v[C],z=g(z,A),C=r[C],C=g(C,A),z!==C)){w=!1;break}}if(w){u={};w={};u[b]=r[b];w[b]=v[b];c.push({type:"update",rowData:v,oldRow:w,newRow:u});p.push(v);break}}}e=[];for(u=0;u<f;u++)v=m[u].rowData,-1==k(v,p)&&e.push(m[u]);this.adata=e;return c};f.commitUpdate=function(a,b){for(var c=this.that,e=this.options.trackModel.dirtyClass,h=this.udata,m=h.length,k=a.length,f=[],g=0;g<m;g++){var n=h[g],p=n.rowData,n=n.oldRow;if(-1==l.inArray(p,
f))for(var t=0;t<k;t++)if(p[b]==a[t][b]){f.push(p);for(var r in n)c.removeClass({rowData:p,dataIndx:r,cls:e})}}c=[];for(g=0;g<m;g++)p=h[g].rowData,-1==l.inArray(p,f)&&c.push(h[g]);this.udata=c;return[]};f.commitDelete=function(a,b){for(var c=this.ddata,e=c.length,h=this.udata,m,k,f;e--;){m=c[e].rowData;k=m[b];f=a.length;if(!f)break;for(;f--;)if(k==a[f][b]){a.splice(f,1);c.splice(e,1);for(k=h.length;k--;)h[k].rowData==m&&h.splice(k,1);break}}};f.commitUpdateAll=function(){for(var a=this.that,b=this.options.trackModel.dirtyClass,
c=this.udata,e=0,h=c.length;e<h;e++){var m=c[e],k=m.oldRow,m=m.rowData,f;for(f in k)a.removeClass({rowData:m,dataIndx:f,cls:b})}this.udata=[]};f.commitAddAll=function(){this.adata=[]};f.commitDeleteAll=function(){for(var a=this.ddata,b=this.udata,c=b.length,e,h=a.length,m=0;0<c&&m<h;m++){for(e=a[m].rowData;c--;)b[c].rowData==e&&b.splice(c,1);c=b.length}a.length=0};f.commit=function(a){var b=this.that,c=a?a.history:null,c=null==c?!1:c,e=[],e=[],h=[],m=b.options.dataModel.recIndx;if(null==a)this.commitAddAll(),
this.commitUpdateAll(),this.commitDeleteAll();else{var k=a.type;a=a.rows;"add"==k?a?e=this.commitAdd(a,m):this.commitAddAll():"update"==k?a?h=this.commitUpdate(a,m):this.commitUpdateAll():"delete"==k&&(a?this.commitDelete(a,m):this.commitDeleteAll())}e=e.concat(h);e.length&&(b._digestData({source:"commit",checkEditable:!1,track:!1,history:c,rowList:e}),b.refreshView())};f.rollbackAdd=function(a,b){for(var c=this.adata,e=[],h=0,m=c.length;h<m;h++)e.push({type:"delete",rowData:c[h].rowData});this.adata=
[];return e};f.rollbackDelete=function(a,b){for(var c=this.ddata,e=[],h=c.length-1;0<=h;h--){var m=c[h];e.push({type:"add",rowIndx:m.rowIndx,newRow:m.rowData})}this.ddata=[];return e};f.rollbackUpdate=function(a,b){for(var c=this.that,e=this.options.trackModel.dirtyClass,h=this.udata,m=[],k=0,f=h.length;k<f;k++){var g=h[k],n=g.rowData,l={},p=g.oldRow;if(null!=g.recId){var g=[],r;for(r in p)l[r]=n[r],g.push(r);c.removeClass({rowData:n,dataIndx:g,cls:e,refresh:!1});m.push({type:"update",rowData:n,newRow:p,
oldRow:l})}}this.udata=[];return m};f.rollback=function(a){var b=this.that,c=b.options.pageModel,e=a&&null!=a.refresh?a.refresh:!0;a=a&&null!=a.type?a.type:null;var h=[],h=[],m=[],k=[],f=b.options.dataModel.data;if(null==a||"update"==a)m=this.rollbackUpdate(c,f);if(null==a||"delete"==a)h=this.rollbackDelete(c,f);if(null==a||"add"==a)k=this.rollbackAdd(c,f);h=h.concat(k,m);b._digestData({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,rowList:h});e&&b.refreshView()};p=p.pqGrid.prototype;
p.getChanges=function(a){this.blurEditor({force:!0});if(a){var b=a.format;if(b){if("byVal"==b)return this.iUCData.getChangesValue(a);if("raw"==b)return this.iUCData.getChangesRaw()}}return this.iUCData.getChanges()};p.rollback=function(a){this.blurEditor({force:!0});this.iUCData.rollback(a)};p.isDirty=function(a){return this.iUCData.isDirty(a)};p.commit=function(a){this.iUCData.commit(a)};p.updateRow=function(a){for(var b=a.rowList||[{rowIndx:a.rowIndx,newRow:a.newRow||a.row,rowData:a.rowData,rowIndxPage:a.rowIndxPage}],
c=[],e=0,h=b.length;e<h;e++){var m=this.normalize(b[e]),k=m.newRow,f=m.rowData,g={};if(f){for(var n in k)g[n]=f[n];m.oldRow=g;m.type="update";c.push(m)}}if(!c.length||!1===this._digestData({source:a.source||"update",history:a.history,checkEditable:a.checkEditable,track:a.track,allowInvalid:a.allowInvalid,rowList:c}))return!1;!1!==a.refresh&&(1<c.length?this.refresh():this.refreshRow({rowIndx:c[0].rowIndx}))};p.getRecId=function(a){a.dataIndx=this.options.dataModel.recIndx;a=this.getCellData(a);return null==
a?null:a};p.getCellData=function(a){var b=a.rowData||this.getRowData(a);a=a.dataIndx;return b?b[a]:null};p.getRowData=function(a){if(!a)return null;var b=a.rowData;if(null!=b)return b;b=a.recId;if(null==b){var b=a.rowIndx,b=null!=b?b:a.rowIndxPage+this.rowIndxOffset,c=this.get_p_data()[b];return c}c=this.options.dataModel;a=c.recIndx;for(var e=c.data,h=0,m=e.length;h<m;h++)if(c=e[h],c[a]==b)return c;return null};p.deleteRow=function(a){for(var b=a.rowList||[{rowIndx:a.rowIndx,rowIndxPage:a.rowIndxPage}],
c=[],e=0,h=b.length;e<h;e++){var m=this.normalize(b[e]);m.oldRow=m.rowData;m.type="delete";c.push(m)}if(!c.length)return!1;this._digestData({source:a.source||"delete",history:a.history,track:a.track,rowList:c});!1!==a.refresh&&this.refreshView()};p.addRow=function(a){var b=a.rowList||[{rowIndx:a.rowIndx,rowIndxPage:a.rowIndxPage,newRow:a.newRow||a.rowData}],c=[],e=this.options.dataModel,h=e.data;null==h&&(e.data=[],h=e.data);for(var e=0,m=b.length;e<m;e++){var k=this.normalize(b[e]);k.type="add";
c.push(k)}if(!c.length||!1===this._digestData({source:a.source||"add",history:a.history,track:a.track,checkEditable:a.checkEditable,rowList:c}))return!1;!1!==a.refresh&&this.refreshView();a=c[0].rowIndx;return null==a?h.length-1:a}})(jQuery);
(function(l){var p=function(a){this.focusSelection=null};p.prototype.inViewRow=function(a){var b=this.that,c=b.finalV;return a<b.options.freezeRows?!0:a>=b.initV&&a<=c};var f=function(a){this.that=a;this.options=a=a.options;this.selection=[];this.hclass=" pq-state-select "+(a.bootstrap.on?"":"ui-state-highlight")};l.paramquery.cRows=f;var b=function(a){var b=a.options;this.that=a;this.selection=[];this.hclass="pq-state-select "+(b.bootstrap.on?"":"ui-state-highlight")};l.paramquery.cCells=b;b=b.prototype=
new p;p=f.prototype=new p;p.isSelected=function(a){return(a=a.rowData||this.that.getRowData(a))?!0===a.pq_rowselect:null};p.selectRange=function(a){var b=a.range,c=b.r1,b=b.r2;a=a.evt;var e=[];if(c>b)var h=c,c=b,b=h;for(;c<=b;c++)e.push({rowIndx:c});this.add({rows:e,evt:a})};b.removeAll=function(a){var b=this.that;a=b.get_p_data();var c=this.hclass;if(a&&a.length)for(b.$tbl&&b.$tbl.children().children().children().removeClass(c),b=0,c=a.length;b<c;b++){var e=a[b];e&&delete e.pq_cellselect}};p.removeAll=
function(a){a=a||{};var b=this.that,c=a.all,e=this.hclass,h=b.get_p_data();if(h&&h.length)for(a.refresh&&b.$tbl&&b.$tbl.children().children().removeClass(e),h=c?h:b.pdata,a=0,b=h.length;a<b;a++)(c=h[a])&&delete c.pq_rowselect};b.isSelected=function(a){var b=this.that,c=a.rowData||b.getRowData(a),e=a.dataIndx;a=a.colIndx;if(null==a&&null==e||null==c)return null;e=null==e?b.colModel[a].dataIndx:e;return!0==(c.pq_cellselect&&c.pq_cellselect[e])};p.getSelection=function(){for(var a=this.that,b=a.selection().address(),
c=[],e=0,h=b.length;e<h;e++){var m=b[e];if("row"==m.type)for(var k=m.r2,m=m.r1;m<=k;m++){var f=a.getRowData({rowIndx:m});c.push({rowIndx:m,rowData:f})}}return c};b.getSelection=function(){for(var a=this.that,b=a.selection(),c=a.colModel,b=b.address(),e=[],h=0,m=b.length;h<m;h++){var k=b[h],f=k.type;if("block"==f||"cell"==f||"column"==f)for(var f=k.r2,g=k.c1,n=k.c2,k=k.r1;k<=f;k++)for(var l=a.getRowData({rowIndx:k}),p=g;p<=n;p++)e.push({rowIndx:k,rowData:l,colIndx:p,dataIndx:c[p].dataIndx})}return e};
b.inViewCell=function(a,b){var c=this.that,e=c.options.freezeCols;return this.inViewRow(a)?b<e||b>=c.initH&&b<=c.finalH:!1};b._add=function(a){var b=this.that;a=b.normalize(a);var c=a.rowIndxPage,e=a.rowData,h,m=a.colIndx,k=a.dataIndx,f=this.isSelected({rowData:e,dataIndx:k});if(null==f)return!1;var g=b.iMerge.ismergedCell(a.rowIndx,m)||this.inViewCell(c,m);!1===f&&(g&&(b=b.getCell({rowIndxPage:c,colIndx:m}))&&b.addClass(this.hclass),h=(e.pq_cellselect=e.pq_cellselect||{})[k]=!0);if(h)return a};p._add=
function(a){var b=this.that,c=b.normalize(a),e=c.rowIndxPage;a=c.rowData;var h=this.isSelected({rowData:a});c.rowIndxPage=e;if(null==h)return!1;c=this.inViewRow(e);!1===h&&(!a.pq_hidden&&c&&(b=b.getRow({rowIndxPage:e}),b.length&&b.addClass(this.hclass)),a.pq_rowselect=!0)};b.add=function(a){this._add(a)};p.add=function(a){var b=a.rows;if(b&&"function"==typeof b.push){a=0;for(var c=b.length;a<c;a++){var e=b[a];e.trigger=!1;this._add(e)}}else this._add(a)};p._remove=function(a){var b=this.that,c=b.normalize(a);
a=c.rowIndx;var e=c.rowIndxPage,h=c.rowData,c=c.$tr;if(this.isSelected({rowData:h}))return this.inViewRow(e)&&(c=b.getRow({rowIndxPage:e}))&&(c.removeClass(this.hclass),c.removeAttr("tabindex")),h.pq_rowselect=!1,{rowIndx:a,rowData:h}};p.remove=function(a){var b=a.rows;if(b&&"function"==typeof b.push){a=0;for(var c=b.length;a<c;a++){var e=b[a];e.trigger=!1;this._remove(e)}}else this._remove(a)};b.selectBlock=function(a){var b=this.that,c=this.hclass,e=a.range,h=e.r1,m=e.c1,k=e.r2,e=e.c2,f=b.initH,
g=b.finalH,n=b.options.freezeCols,p=[],t=b.colModel,r=[];a=a.remove?!0:!1;for(var u=m;u<=e;u++)p[u]=t[u].dataIndx;for(;h<=k;h++)if(t=b.normalize({rowIndx:h}),u=t.rowData,t=t.rowIndxPage,u){var v=u.pq_cellselect=u.pq_cellselect||{};if(this.inViewRow(t))for(u=m;u<=e;u++){var w=p[u];if(a&&v[w]||!a&&!v[w]){if(u<n||u>=f&&u<=g){var x=b.getCell({rowIndxPage:t,colIndx:u});x.length&&r.push(x[0])}v[w]=a?void 0:!0}}else for(u=m;u<=e;u++)w=p[u],v[w]=a?void 0:!0}if(r.length)l(r)[a?"removeClass":"addClass"](c)}})(jQuery);
(function(l){var p=!0;l(function(){var b=l("<input type='checkbox' style='position:fixed;left:-50px;top:-50px;'/>").appendTo(document.body);b[0].indeterminate=!0;b.on("change",function(){p=!1});b.click();b.remove()});var f=(l.paramquery.cCheckBoxColumn=function(b,a){var d=this;this.that=b;this.options=b.options;this.column=a;a.cb=l.extend({},{all:!1,header:!1,select:!1,check:!0,uncheck:!1},a.cb);a._render=function(c){var b=c.rowData;if(!b.pq_gtitle&&!b.pq_gsummary)return"<input type='checkbox' "+
(a.cb.check===c.cellData?"checked":"")+" />"};this.dataIndx=a.dataIndx;var c=b.element,e=b.eventNamespace;b.on("dataAvailable",function(){b.one("dataReady",function(){return d._onDataReady()})}).on("dataReady",function(){d.setValCBox()});c.on("change"+e,function(a){var c=a.target;if("checkbox"==c.type&&l(c).closest(".pq-grid")[0]==this)return d.onCheckBoxChange(a)});b.on("cellKeyDown",function(a,c){return d.onCellKeyDown(a,c)});b.on("refreshHeader",function(a,c){return d.refreshHeader(a,c)})}).prototype=
new l.paramquery.cClass;f.hasHeaderChkBox=function(){return this.column.cb.header};f.setValCBox=function(){if(this.hasHeaderChkBox()){var b=this.that,a=this.options,d=this.dataIndx,c=this.column.cb,e=c.all,h=b.rowIndxOffset,h="remote"!=a.pageModel.type&&e?0:h,a=e?a.dataModel.data:b.pdata,e=null,m=0,k=0;if(a){for(var f=0,g=0,n=a.length;g<n;g++){var l=a[g],p=g+h;b.isEditableRow({rowIndx:p})&&b.isEditableCell({rowIndx:p,dataIndx:d})&&(f++,l[d]===c.check?m++:k++)}m==f&&f?e=!0:k==f&&(e=!1);this.$inp&&
this.$inp.pqval({val:e})}}};f.onHeaderChange=function(b){for(var a=l(b.target),d=this.that,c=this.column,e=c.dataIndx,h=d.options,m=c.cb,f=m.all,q=f?h.dataModel.data:d.pdata,g=d.rowIndxOffset,g="remote"!=h.pageModel.type&&f?0:g,h=[],c={column:c,dataIndx:e,source:"header"},a=a[0].checked,f=0,n=q.length;f<n;f++){var p=f+g,t=q[f],r={},u={};r[e]=a?m.check:m.uncheck;u[e]=t[e];h.push({rowIndx:p,rowData:t,newRow:r,oldRow:u,type:"update"})}e={rowList:h,source:"checkbox"};e.history=e.track=m.select?!1:null;
c.check=a;c.rows=h;if(!1===d._trigger("beforeCheck",b,c)||!1===d._digestData(e))return d.refreshHeader(),!1;d.refresh({header:!1});h=c.rows=e.rowList;d._trigger("check",b,c);m.select&&d.selection({type:"row",method:a?"add":"remove",rows:h})};f.refreshHeader=function(b,a){var d=this;if(this.hasHeaderChkBox()){var c=this.that;if(c.pdata&&(c=c.getCellHeader({dataIndx:this.dataIndx}))){var e=this.$inp=c.find("input");this.setValCBox();if(p)e.on("click",function(a){null==e.data("pq_value")&&(e[0].checked=
!0,e.data("pq_value",!0),d.onHeaderChange(a))});e.on("change",function(a){d.onHeaderChange(a)})}}};f._onDataReady=function(){var b=this.that,a=this.options,d=a.dataModel.data,a="remote"==a.pageModel.type?b.rowIndxOffset:0,c=this.column,e=c.cb,h=c.dataIndx;if(null!=h&&d){for(var m=[],f=0,q=d.length;f<q;f++){var g=d[f];g[h]===e.check&&m.push({rowIndx:f+a,rowData:g})}if(!1!==b._trigger("check",null,{rows:m,column:c,dataIndx:h,source:"dataAvailable"})&&e.select){for(f=0;f<q;f++)g=d[f],g[h]===e.check&&
(g.pq_rowselect=!0);b.selection().refresh()}}this.setValCBox()};f.rowSelect=function(b,a){var d=this.that,c=a.rows,e=a.rowData,h=this.dataIndx;if(c)for(var m=0,f=c.length;m<f;m++){var e=c[m],q=e.rowIndx,e=e.rowData;e[h]=!0;d.refreshCell({rowIndx:q,dataIndx:h})}else e&&(e[h]=!0,q=a.rowIndx,d.refreshCell({rowIndx:q,dataIndx:h}));this.setValCBox()};f.rowUnSelect=function(b,a){var d=this.that,c=a.rows,e=a.rowData,h=this.dataIndx;if(c)for(var m=0,f=c.length;m<f;m++){var e=c[m],q=e.rowIndx,e=e.rowData;
e[h]=!1;d.refreshCell({rowIndx:q,dataIndx:h})}else e&&(e[h]=!1,q=a.rowIndx,d.refreshCell({rowIndx:q,dataIndx:h}));this.setValCBox()};f.onCheckBoxChange=function(b){var a=this.that,d=this.column.cb,c=l(b.target),e=c.closest(".pq-grid-cell");if(e.length){var e=a.getCellIndices({$td:e}),e=a.normalize(e),h=e.rowData,m=e.rowIndx,f=e.dataIndx;if(f==this.dataIndx){var c=c[0].checked,q={},g={};q[f]=c?d.check:d.uncheck;g[f]=h[f];h=[{rowData:h,rowIndx:m,oldRow:g,newRow:q,type:"update"}];e.check=c;e.rows=h;
if(!1===a._trigger("beforeCheck",b,e))return a.refreshCell({rowIndx:m,dataIndx:f}),!1;h={source:"checkbox",rowList:h};h.history=h.track=d.select?!1:null;if(!1===a._digestData(h))return a.refreshCell({rowIndx:m,dataIndx:f}),!1;a.refreshRow({rowIndx:m});h=e.rows=h.rowList;a._trigger("check",b,e);d.select&&a.selection({type:"row",method:c?"add":"remove",rows:h});this.setValCBox()}}};f.onCellKeyDown=function(b,a){if(a.dataIndx==this.dataIndx&&(13==b.keyCode||32==b.keyCode))return l(b.originalEvent.target).find("input").click(),
!1}})(jQuery);
(function(){for(var l=0,p=["moz","webkit"],f=0;!window.requestAnimationFrame&&f<p.length;f++)window.requestAnimationFrame=window[p[f]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[p[f]+"CancelAnimationFrame"]||window[p[f]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var a=(new Date).getTime(),a=Math.max(0,16-(a-l));return window.setTimeout(function(){l=(new Date).getTime();b()},a)});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(b){clearTimeout(b)})})();
(function(l){function p(b){this.that=b;var a=this;this.borderBottomExtra=this.borderBottom=this.borderLeftExtra=this.borderLeft=this.borderTopExtra=this.borderTop=this.borderRightExtra=this.borderRight=this.scrollLeft=this.scrollTop=0;this.maxBorder=5E3;this.rowht=b.options.rowHeight;this.colwd=60;b.on("contMouseDown",function(b,c){return a._onContMouseDown(b,c)}).on("mouseDrag",function(b,c){return a._onMouseDrag(b,c)}).on("mouseStop",function(b,c){return a._onMouseStop(b,c)}).on("mousePQUp",function(b,
c){return a._onMousePQUp(b,c)}).on("rowMouseDown",function(b,c){return a._onRowMouseDown(b,c)}).on("cellMouseDown",function(b,c){return a._onCellMouseDown(b,c)}).on("refresh",function(a,c){setTimeout(function(){b.element&&b.focus()},0)}).on("cellMouseEnter",function(b,c){return a._onCellMouseEnter(b,c)}).on("rowMouseEnter",function(b,c){return a._onRowMouseEnter(b,c)})}l.paramquery.cMouseSelection=p;var f=p.prototype=new l.paramquery.cClass;f.inViewPort=function(b){var a=this.that.iRefresh,d=a.getEContHt(),
a=a.getEContWd()+1;b=b[0];var c=this.scrollLeft;if(d>=b.offsetTop+b.offsetHeight+this.marginTop)if("TD"==b.nodeName.toUpperCase()){if(a>=b.offsetLeft+b.offsetWidth+c)return!0}else return!0};f._onCellMouseDown=function(b,a){var d=this.that,c=a.rowIndx,e=d.iSelection,h=a.colIndx,m=d.options.selectionModel,f=m.mode;if("cell"!=m.type)d.focus(a);else if(null!=h)return e=e.address()[0],b.shiftKey&&"single"!=f&&e?(f=e.firstR,e=e.firstC,d.range({r1:f,c1:e,r2:c,c2:h,firstR:f,firstC:e}).select()):(this.mousedown=
{r1:c,c1:h},d.range({r1:c,c1:h,firstR:c,firstC:h}).select()),d.focus(a),!0};f._onCellMouseEnter=function(b,a){var d=this.that,c=d.options.selectionModel,e=c.type,c=c.mode;if(this.mousedown&&"single"!=c){if("cell"==e){var e=this.mousedown,c=e.r1,h=e.c1,m=a.rowIndx,f=a.colIndx;if(c==m&&h==f||e.r2==m&&e.c2==f)return;this.mousedown.r2=m;this.mousedown.c2=f;d.scrollCell({rowIndx:m,colIndx:f});d.range({r1:c,c1:h,r2:m,c2:f,firstR:c,firstC:h}).select()}d.focus(a)}};f._onRowMouseEnter=function(b,a){var d=
this.that,c=d.options.selectionModel,e=c.mode;"row"==c.type&&this.mousedown&&"single"!=e&&(c=this.mousedown.r1,e=a.rowIndx,c==e?d.range({r1:c,firstR:c},!1).select():this.mousedown.r2!=e&&(this.mousedown.r2=e,d.scrollRow({rowIndx:e}),d.range({r1:c,r2:e,firstR:c},!1).select()))};f._onRowMouseDown=function(b,a){var d=this.that,c=a.rowIndx,e=d.iSelection,h=d.options.selectionModel,m=0<=b.originalEvent.target.className.indexOf("pq-grid-number-cell"),f=h.mode;if(("row"==h.type||h.row&&m)&&null!=c)return h=
d.iSelection.address(),b.shiftKey?((e=h.length)&&"row"==h[e-1].type&&(e=h[e-1],e.r1=e.firstR,e.r2=c,e.c1=e.c2=e.type=void 0),d.range(h).select()):(b.ctrlKey||b.metaKey)&&"single"!=f?e.add({r1:c,firstR:c}):(this.mousedown={r1:c,y1:b.pageY,x1:b.pageX},d.range({r1:c,firstR:c},!1).select()),m&&setTimeout(function(){d.focus({rowIndxPage:a.rowIndxPage,colIndx:d.getFirstVisibleCI(!0)})},0),!0};f._onContMouseDown=function(b,a){this.that.options.swipeModel.on&&(this._stopSwipe(!0),this.swipedown={x:b.pageX,
y:b.pageY});return!0};f._onMousePQUp=function(b,a){this.mousedown=null};f._stopSwipe=function(b){b&&(this.swipedownPrev=this.swipedown=null);window.clearInterval(this.intID);window.cancelAnimationFrame(this.intID);this.intID=null};f._onMouseStop=function(b,a){var d=this,c=this.that;if(this.swipedownPrev){var e=c.options.swipeModel,c=this.swipedownPrev,h=c.ts,m=(new Date).getTime()-h,f=b.pageX,q=b.pageY,g=f-c.x,n=q-c.y;if(Math.sqrt(g*g+n*n)/m>e.ratio){var l=0,p=e.repeat;d._stopSwipe();var r=function(){l+=
e.speed;p--;d._onMouseDrag({pageX:f+l*g/m,pageY:q+l*n/m});0<p?d.intID=window.requestAnimationFrame(r):d._stopSwipe(!0)};r()}else d.swipedown=null,d.swipedownPrev=null}};f._onMouseDrag=function(b,a){var d=this.that.options;if(this.swipedown){var c=this.swipedown,e=c.x,h=c.y,m=b.pageX,f=b.pageY;this.swipedownPrev={x:e,y:h,ts:(new Date).getTime()};var q=d.scrollModel.smooth;if(!d.virtualY||q)this.scrollVertSmooth(h,f),this.syncScrollBarVert();if(!d.virtualX||q)this.scrollHorSmooth(e,m),this.syncScrollBarHor();
c.x=m;c.y=f}return!0};f.updateTableY=function(b){if(0==b)return!1;var a=this.that,d=this.getTableForVertScroll(),a=a.iRefresh.getEContHt();if(!d||!d.length)return!1;var c=d.data("offsetHeight")-1,e=this.scrollTop-b;this.setScrollTop(0>e?0:0>b&&0<a-c+e?c-a:e,d,a);return!0};f.setScrollTop=function(b,a,d){0<=b&&(this.scrollTop=b=Math.round(b),a.parent("div").scrollTop(b))};f.getScrollLeft=function(b){return this.scrollLeft};f.getScrollTop=function(b){return this.scrollTop};f.setScrollLeft=function(b,
a,d,c){0<=b&&(this.scrollLeft=b=Math.round(b),d=d?d.parent():l(),d=d.add(a?a.parent("div"):l()),d.scrollLeft(b))};f.scrollVertSmooth=function(b,a){b!=a&&this.updateTableY(a-b)};f.scrollHorSmooth=function(b,a){if(b!=a){var d=this.that,c=d.options,e=a-b,h=this.getTableForHorScroll(),f=this.getTableHeaderForHorScroll(),d=d.iRefresh.getEContWd();if(h||f){var k=h?h:f,c=c.virtualX?this.getScrollWidth(k):k.data("scrollWidth"),e=this.scrollLeft-e;this.setScrollLeft(0>e?0:0>c-d-e?c-d:e,h,f,d)}}};f.syncViewWithScrollBarVert=
function(b){if(null!=b){var a=this.that,d=this.getTableForVertScroll();if(d&&d.length){a.options.editModel.indices&&a.blurEditor({force:!0});var c=d.data("offsetHeight"),a=a.iRefresh.getEContHt();if((b*=c-a)||0===b)0>b&&(b=0),this.setScrollTop(b,d,a)}}};f.syncViewWithScrollBarHor=function(b){if(null!=b){var a=this.that,d=this.getTableForHorScroll(),c=this.getTableHeaderForHorScroll();if(d||c){var e=a.options;e.editModel.indices&&a.blurEditor({force:!0});var h=d?d:c,e=e.virtualX?this.getScrollWidth(h):
h.data("scrollWidth"),a=a.iRefresh.getEContWd();b*=e-a;e&&a&&(0>b&&(b=0),this.setScrollLeft(b,d,c,a))}}};f.resetMargins=function(){this.scrollTop=this.scrollLeft=0};f.syncHeaderViewWithScrollBarHor=function(b){if(null!=b){var a=this.that,d=this.getTableHeaderForHorScroll();if(d){var c=a.options,e=c.freezeCols;c.editModel.indices&&a.blurEditor({force:!0});var c=d.data("scrollWidth"),h=a.iRefresh.getEContWd();b=a.calcWidthCols(e,b+e);c&&h&&(0>b&&(b=0),d.css("marginLeft",-b))}}};f.syncScrollBarVert=
function(){var b=this.that,a=this.getTableForVertScroll();if(a&&a.length){var a=a.data("offsetHeight"),d=b.iRefresh.getEContHt(),a=this.scrollTop/(a-d);0<=a&&1>=a&&b.vscroll.widget().hasClass("pq-sb-vert")&&b.vscroll.option("ratio",a)}};f.syncScrollBarHor=function(){var b=this.that,a=b.options,d=this.getTableForHorScroll(),c=this.getTableHeaderForHorScroll();if(d||c)d=d?d:c,a=a.virtualX?this.getScrollWidth(d):d.data("scrollWidth"),d=b.iRefresh.getEContWd(),a=this.scrollLeft/(a-d),0<=a&&1>=a&&b.hscroll.widget().hasClass("pq-sb-horiz")&&
b.hscroll.option("ratio",a)};f.getTableForVertScroll=function(){var b=this.that,a=b.pqpanes;if((b=b.$tbl)&&b.length)return a.h&&a.v?b=l([b[2],b[3]]):a.v?b=l([b[0],b[1]]):a.h&&(b=l(b[1])),b};f.getTableForHorScroll=function(){var b=this.that,a=b.pqpanes,d=[],c=b.$tbl;if(c&&c.length)return a.h&&a.v?d.push(c[1],c[3]):a.v?d.push(c[1]):a.h?d.push(c[0],c[1]):d.push(c[0]),b.tables.length&&(b=b.tables[0].$tbl,a.v?d.push(b[1]):d.push(b[0])),l(d)};f.getTableHeaderForHorScroll=function(){var b=this.that,a=b.pqpanes;
if((b=b.$tbl_header)&&b.length)return b=a.vH?l(b[1]):l(b[0]),b.parent()};f.scrollRowNonVirtual=function(b){var a=this.that,d=a.options,c=b.rowIndxPage,e=b.rowIndx;b=a.iRefresh.getEContHt();c=null==c?e-a.rowIndxOffset:c;d=parseInt(d.freezeRows);if(!(c<d)){var d=a.get$Tbl(c),h=a.getRow({rowIndxPage:c})[0];h&&(a=d[0].offsetTop+1,c=h.offsetHeight,e=this.getScrollTop(),h=h.offsetTop-1,0>a+h-e?(a=a+h+-1,this.setScrollTop(0>a?0:a,d,b),this.syncScrollBarVert()):h+c-e>b&&(this.setScrollTop(c+h-b,d,b),this.syncScrollBarVert()))}};
f.scrollColumnNonVirtual=function(b){var a=this.that,d=b.colIndx,d=null==d?a.getColIndx({dataIndx:b.dataIndx}):d,c=a.options.freezeCols;if(!(d<c)){b=a._calcRightEdgeCol(d).width;var d=a._calcRightEdgeCol(d-1).width,c=a._calcRightEdgeCol(c-1).width,e=this.getTableForHorScroll(),h=this.getTableHeaderForHorScroll(),a=a.iRefresh.getEContWd(),f=this.scrollLeft;b-f>a?(this.setScrollLeft(b-a,e,h,a),this.syncScrollBarHor()):d-c<f&&(this.setScrollLeft(d-c,e,h,a),this.syncScrollBarHor())}}})(jQuery);
(function(l){var p=null,f=!1,b="",a=l.paramquery.pqGrid.prototype,d=a.options,c={on:!0,header:!0,zIndex:1E4},e={on:!0},h={on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"};d.pasteModel=d.pasteModel||h;d.copyModel=d.copyModel||c;d.cutModel=d.cutModel||e;a._setGlobalStr=function(a){b=a};a.canPaste=function(){return b?!0:!1};a.copy=function(){p=new m(this);p.copy();p=null};a.paste=function(a){p=new m(this);p.paste(a);p=null};a.cut=function(){p=new m(this);p.copy({cut:!0,source:"cut"});
p=null};a.clear=function(){this.iSelection.clear()};var m=function(a,c){this.that=a},a=m.prototype;a.createClipBoard=function(){var a=l("#pq-grid-excel-div"),a=this.that.options.copyModel,c=l("#pq-grid-excel");0==c.length&&(a=l("<div id='pq-grid-excel-div'  style='position:fixed;top:20px;left:20px;height:1px;width:1px;overflow:hidden;z-index:"+a.zIndex+";'/>").appendTo(document.body),c=l("<textarea id='pq-grid-excel' autocomplete='off' spellcheck='false' style='overflow:hidden;height:10000px;width:10000px;opacity:0' />").appendTo(a),
c.css({opacity:0}));c.select()};a.destroyClipBoard=function(){this.clearClipBoard();var a=this.that,c=l(window).scrollTop(),b=l(window).scrollLeft();a.focus();var a=l(window).scrollTop(),e=l(window).scrollLeft();c==a&&b==e||window.scrollTo(b,c)};a.clearClipBoard=function(){l("#pq-grid-excel").val("")};a.copy=function(a){return this.that.iSelection.copy(a)};a.paste=function(a){a=a||{};var c=this.that,e=a.dest,d=a.clip,h=d?d.length?d.val():"":b,h=h.replace(/\n$/,""),d=h.split("\n"),f=d.length,m,k=c.colModel,
p=c.readCell,x=c.options.pasteModel,z="row",A=!1,C=k.length;if(x.on&&0!=h.length&&0!=f){h={rows:d};if(!1===c._trigger("beforePaste",null,h))return!1;var s=x.type,y,E,D,z=(e?c.range(e):c.selection())._areas;(D=z.length?z[0]:null)&&c.getRowData({rowIndx:D.r1})?(z="row"==D.type?"row":"cell",y=D.r1,E=D.r2,e=D.c1,D=D.c2):(z="cell",D=e=E=y=0);var F,K;"replace"==s?(F=y,K=E-y+1<f?"extend":"repeat"):"append"==s?(F=E+1,K="extend"):"prepend"==s&&(F=y,K="extend");var I,f="extend"==K?f:E-y+1,J;y=0;a=a.rowList||
[];for(var P=E=0;P<f;P++){var O=d[y],N=P+F,G="replace"==s?c.getRowData({rowIndx:N}):null,L=G?{}:null,H={};void 0===O&&"repeat"===K&&(y=0,O=d[y]);y++;var M=O.split("\t");if(!m)if("cell"==z){m=M.length;I=D-e+1<M.length?"extend":"repeat";m="extend"==I?m:D-e+1;if(isNaN(m))throw"lenH NaN. assert failed.";m+e>C&&(m=C-e)}else m=C,e=0;var T=0,Q=0,O=0;J=m;for(var W=M.length,Q=0;Q<J;Q++){T>=W&&(T=0);var R=k[Q+e],X=M[T],U=R.dataIndx;!1===R.copy?(O++,"extend"==I&&J+e<C&&J++):(T++,H[U]=X,L&&(L[U]=p(G,R)))}!1==
l.isEmptyObject(H)&&(M="update",null==G&&(A=!0,M="add"),a.push({newRow:H,rowIndx:N,rowData:G,oldRow:L,type:M}),E++)}c._digestData({rowList:a,source:"paste",allowInvalid:x.allowInvalid,validate:x.validate});c[A?"refreshView":"refresh"]();x.select&&("cell"==z?c.range({r1:F,c1:e,r2:F+E-1,c2:"extend"==I?e+m-1+O:D}).select():c.range({r1:F,r2:F+E-1}).select());c._trigger("paste",null,h)}};l(document).unbind(".pqExcel").bind("keydown.pqExcel",function(a){if(a.ctrlKey||a.metaKey){var c=l(a.target);if(c.hasClass("pq-grid-row")||
c.hasClass("pq-grid-cell")||c.is("#pq-grid-excel")||c.hasClass("pq-grid-cont")){var b=c.closest(".pq-grid");if(p||c.length&&b.length){if(!p){try{var e=b.pqGrid("getInstance").grid;if(e.option("selectionModel.native"))return!0}catch(d){return!0}p=new m(e,c);p.createClipBoard()}"67"==a.keyCode||"99"==a.keyCode?p.copy({clip:l("#pq-grid-excel")}):"88"==a.keyCode?p.copy({cut:!0,clip:l("#pq-grid-excel")}):"86"==a.keyCode||"118"==a.keyCode?(f=!0,p.clearClipBoard(),window.setTimeout(function(){p&&(p.paste({clip:l("#pq-grid-excel")}),
p.destroyClipBoard(),p=null);f=!1},0)):(c=l("#pq-grid-excel"),c.length&&document.activeElement==c[0]&&p.that._onKeyPressDown(a))}}}else if(c=a.keyCode,b=l.ui.keyCode,c==b.UP||c==b.DOWN||c==b.LEFT||c==b.RIGHT||c==b.PAGE_UP||c==b.PAGE_DOWN){if(k)return!1;c=l(a.target);if(c.hasClass("pq-grid-row")||c.hasClass("pq-grid-cell"))k=!0}}).bind("keyup.pqExcel",function(a){var c=a.keyCode;f||!p||a.ctrlKey||a.metaKey||-1==l.inArray(c,[17,91,93,224])||(p.destroyClipBoard(),p=null);k&&(a=l(a.target),a.hasClass("pq-grid-row")||
a.hasClass("pq-grid-cell")||(k=!1))});var k=!1})(jQuery);
(function(l){var p=l.paramquery.pqGrid.prototype.options,f={on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0};p.historyModel=p.historyModel||f;p=(l.paramquery.cHistory=function(b){var a=this;this.that=b;this.options=b.options;this.records=[];this.id=this.counter=0;b.on("keyDown",function(b,c){return a._onKeyDown(b,c)}).on("dataAvailable",function(b,c){"filter"!=c.source&&a.reset()})}).prototype=new l.paramquery.cClass;p._onKeyDown=function(b,a){var d=b.ctrlKey||b.metaKey;if(d&&"90"==b.keyCode)return this.undo(),
!1;if(d&&"89"==b.keyCode)return this.redo(),!1};p.resetUndo=function(){if(0==this.counter)return!1;this.counter=0;this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})};p.reset=function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[];this.id=this.counter=0;this.that._trigger("history",null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})};p.increment=function(){var b=this.records,a=b.length;
this.id=a?b[a-1].id+1:0};p.push=function(b){var a=this.canRedo(),d=this.records,c=this.counter;d.length>c&&d.splice(c,d.length-c);d[c]=l.extend({id:this.id},b);this.counter++;b=this.that;var e,h;1==this.counter&&(e=!0);a&&this.counter==d.length&&(h=!1);b._trigger("history",null,{type:"add",canUndo:e,canRedo:h,num_undo:this.counter,num_redo:0})};p.canUndo=function(){return 0<this.counter?!0:!1};p.canRedo=function(){return this.counter<this.records.length?!0:!1};p.processCol=function(b,a){var d=this.that;
if(b.length){var c="add"==b.type;d[(a?c:!c)?"addColumn":"deleteColumn"]({colList:b,history:!1})}};p.undo=function(){var b=this.canRedo(),a=this.that,d=!1,c=this.options.historyModel,e=this.records;if(0<this.counter)this.counter--;else return!1;for(var h=e[this.counter],e=(e=h.rowList)?e:[],h=(h=h.colList)?h:[],f=[],k=0,l=e.length;k<l;k++){var g=e[k],n=g.newRow,p=g.rowData,t=g.type,r=g.oldRow,g=g.rowIndx;"update"==t?(g=a.getRowIndx({rowData:p}).rowIndx,f.push({type:t,rowIndx:g,rowData:p,oldRow:n,newRow:r})):
"add"==t?(d=!0,f.push({type:"delete",rowData:n})):"delete"==t&&(d=!0,f.push({type:"add",rowIndx:g,newRow:p}))}h.length?this.processCol(h):(a._digestData({history:!1,source:"undo",checkEditable:c.checkEditable,checkEditableAdd:c.checkEditableAdd,allowInvalid:c.allowInvalid,rowList:f}),a[d?"refreshView":"refresh"]({source:"undo"}));var u,v;!1===b&&(u=!0);0==this.counter&&(v=!1);a._trigger("history",null,{canUndo:v,canRedo:u,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter});
return!0};p.redo=function(){var b=this.canUndo(),a=this.that,d=this.options.historyModel,c=this.counter,e=this.records;if(c==e.length)return!1;for(var h=!1,f=e[c],c=(c=f.rowList)?c:[],f=(f=f.colList)?f:[],k=[],l=0,g=c.length;l<g;l++){var n=c[l],p=n.newRow,t=n.rowData,r=n.type,u=n.oldRow,n=n.rowIndx;"update"==r?(n=a.getRowIndx({rowData:t}).rowIndx,k.push({type:r,rowIndx:n,rowData:t,oldRow:u,newRow:p})):"add"==r?(h=!0,k.push({type:"add",rowIndx:n,newRow:p})):"delete"==r&&(h=!0,k.push({type:"delete",
rowData:t}))}f.length?this.processCol(f,!0):(a._digestData({history:!1,source:"redo",checkEditable:d.checkEditable,checkEditableAdd:d.checkEditableAdd,allowInvalid:d.allowInvalid,rowList:k}),a[h?"refreshView":"refresh"]({source:"redo"}));this.counter<e.length&&this.counter++;var v,w;!1==b&&(v=!0);this.counter==this.records.length&&(w=!1);a._trigger("history",null,{canUndo:v,canRedo:w,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};l.paramquery.pqGrid.prototype.history=
function(b){return this.iHistory[b.method](b)}})(jQuery);
(function(l){var p=l.paramquery;p.filter=function(){var a={begin:{text:"Begins With",TR:!0,string:!0},between:{text:"Between",TR:!0,string:!0,date:!0,number:!0},notbegin:{text:"Does not begin with",TR:!0,string:!0},contain:{text:"Contains",TR:!0,string:!0},notcontain:{text:"Does not contain",TR:!0,string:!0},equal:{text:"Equal To",TR:!0,string:!0,bool:!0},notequal:{text:"Not Equal To",TR:!0,string:!0},empty:{text:"Empty",TR:!1,string:!0,bool:!0},notempty:{text:"Not Empty",TR:!1,string:!0,bool:!0},
end:{text:"Ends With",TR:!0,string:!0},notend:{text:"Does not end with",TR:!0,string:!0},less:{text:"Less Than",TR:!0,number:!0,date:!0},lte:{text:"Less than or equal",TR:!0,number:!0,date:!0},range:{TR:!0,string:!0,number:!0,date:!0},regexp:{TR:!0,string:!0,number:!0,date:!0},great:{text:"Great Than",TR:!0,number:!0,date:!0},gte:{text:"Greater than or equal",TR:!0,number:!0,date:!0}};return{conditions:a,getAllConditions:function(){var b=[],c;for(c in a)b.push(c);return b}(),getConditions:function(b){var c=
[],e;for(e in a)a[e][b]&&c.push(e);return c},getTRConditions:function(){var b=[],c;for(c in a)a[c].TR&&b.push(c);return b}(),getWTRConditions:function(){var b=[],c;for(c in a)a[c].TR||b.push(c);return b}()}}();p.filter.rules={};p.filter.rules.en={begin:"Begins With",between:"Between",notbegin:"Does not begin with",contain:"Contains",notcontain:"Does not contain",equal:"Equal To",notequal:"Not Equal To",empty:"Empty",notempty:"Not Empty",end:"Ends With",notend:"Does not end with",less:"Less Than",
lte:"Less than or equal",great:"Great Than",gte:"Greater than or equal"};var f=function(a){this.that=a;a.on("load",function(){var b=a.options.dataModel.dataUF;b&&(b.length=0)})};p.cFilterData=f;var b=f.prototype;f.conditions={equal:function(a,b){if(a==b)return!0},contain:function(a,b){if(-1!=a.indexOf(b))return!0},notcontain:function(a,b){if(-1==a.indexOf(b))return!0},empty:function(a){if(0==a.length)return!0},notempty:function(a){if(0<a.length)return!0},begin:function(a,b){if(0==(a+"").indexOf(b))return!0},
notbegin:function(a,b){if(0!=a.indexOf(b))return!0},end:function(a,b){var c=a.lastIndexOf(b);if(-1!=c&&c+b.length==a.length)return!0},notend:function(a,b){var c=a.lastIndexOf(b);if(-1==c||c+b.length!=a.length)return!0},regexp:function(a,b){if(b.test(a))return b.lastIndex=0,!0},notequal:function(a,b){if(a!=b)return!0},great:function(a,b){if(a>b)return!0},gte:function(a,b){if(a>=b)return!0},between:function(a,b,c){if(a>=b&&a<=c)return!0},range:function(a,b){if(-1!=l.inArray(a,b))return!0},less:function(a,
b){if(a<b)return!0},lte:function(a,b){if(a<=b)return!0}};f.convert=function(a,b){a=null==a?"":a;"string"==b?a=l.trim(a).toUpperCase():"date"==b?a=Date.parse(a):"integer"==b?a=parseInt(a):"float"==b?a=parseFloat(a):"bool"==b&&(a=String(a).toLowerCase());return a};b.isMatchCellSingle=function(a,b){var c=a.dataType,e=a.value,h=a.value2,m=a.cbFn,k=b[a.dataIndx],k="regexp"==a.condition?null==k?"":k:f.convert(k,c);return m(k,e,h)?!0:!1};b.isMatchRow=function(a,b,c){if(0==b.length)return!0;for(var e=0;e<
b.length;e++){var h=this.isMatchCell(b[e],a);if("OR"==c&&h)return!0;if("AND"==c&&!h)return!1}if("AND"==c)return!0;if("OR"==c)return!1};b.getQueryStringFilter=function(){var a=this.that,b=a.options,c=b.stringify,b=b.filterModel,e=b.mode,a=this.getFilterData({CM:a.colModel,location:"remote"}),h="";b&&b.on&&a&&(a.length?(b={mode:e,data:a},h=!1===c?b:JSON.stringify(b)):h="");return h};b.filterLocalData=function(a){a=a||{};var b=this.that,c=a.apply;a=this.getFilterData({CM:!1===c?a.CM:b.colModel});var e=
b.options,h=e.dataModel,f=b.iSort,k=h.data,l=h.dataUF,g=e.filterModel,n=g.multiple,e=g?g.mode:null;k||(k=h.data=[]);l||(l=h.dataUF=[]);!1===c&&(k=k.slice());if(l.length)k.push.apply(k,l),0==f.readSorter().length&&f.sortLocalData(k),l=h.dataUF=[];else if(a.length)f.saveOrder();else return{data:k,dataUF:l};this.isMatchCell=n?this.isMatchCellMultiple:this.isMatchCellSingle;if(g.on&&e&&a&&a.length&&k.length)for(h=k.length-1;0<=h;h--)this.isMatchRow(k[h],a,e)||l.push(k.splice(h,1)[0]);!1!==c&&(b._queueATriggers.filter=
{ui:{type:"local",filter:a}});return{data:k,dataUF:l}};b.getFilterData=function(a){var b=a.CM;if(!b)throw"CM N/A";var c=b.length,e=a.location;a=this.that.options.filterModel.multiple;for(var h=p.filter.getAllConditions,f=p.filter.getTRConditions,k=[],q=p.cFilterData,g=function(a,c,b){return"function"==typeof a?!0:"between"==a?null!=c&&""!==c||null!=b&&""!==b?!0:!1:-1!=l.inArray(a,h)?null!=c&&""!==c||-1==l.inArray(a,f)?!0:!1:!0},n=function(a,c){return"remote"==e?(null==a?"":a).toString():q.convert(a,
c)},B=0;B<c;B++){var t=b[B],r=t.dataIndx,u=t.dataType,u=u&&"function"!=typeof u?u:"string",v=t.filter;if(a){if((v=t.filterModel)&&v.on){for(var w=[],x=v.mode,z=v.filters,t=0;t<z.length;t++){var v=z[t],A=v.value,C=v.condition;g(C,A)&&(A=n(A,u),w.push({value:A,condition:C}))}k.push({dataIndx:r,mode:x,dataType:u,filters:w})}}else if(v&&v.on&&(A=v.value,w=v.value2,C=v.condition,g(C,A,w))){if("between"==C)""===A||null==A?(C="lte",A=n(w,u)):""===w||null==w?(C="gte",A=n(A,u)):(A=n(A,u),w=n(w,u));else if("regexp"==
C)if("remote"==e)A=A.toString();else{if("string"==typeof A)try{var s=v.modifiers,s=s?s:"gi",A=new RegExp(A,s)}catch(y){A=/.*/}}else if("range"==C)if(null==A)continue;else if("string"==typeof A)A=n(A,u),A=A.split(/\s*,\s*/);else{if(A&&"function"==typeof A.push){if(0==A.length)continue;A=A.slice();t=0;for(v=A.length;t<v;t++)A[t]=n(A[t],u)}}else A=n(A,u);k.push({dataIndx:r,value:A,value2:w,condition:C,dataType:u,cbFn:"remote"==e?"":"function"==typeof C?C:q.conditions[C]})}}return k}})(jQuery);
(function(l){l=(l.paramquery.cSort=function(f){this.that=f;this.sorters=[];this.tmpPrefix="pq_tmp_";this.cancel=!1}).prototype;l.cancelSort=function(){this.cancel=!0};l.resumeSort=function(){this.cancel=!1};l.readSorter=function(){var f=this.that,b=f.options,a=b.groupModel,d,f=f.columns,c=0,e,h,m=[];if(a.on)for(d=a.dataIndx,e=d.length,h=a.dir;c<e;c++)a=d[c],m.push({dataIndx:a,dir:h[c]?h[c]:"up"});d=b.sortModel;b=d.sorter;d=d.single;if(b&&(e=b.length)){for(;e--;)null==f[b[e].dataIndx]&&b.splice(e,
1);d&&b.length&&(b=[b[0]]);m=m.concat(b)}return m=pq.arrayUnique(m,"dataIndx")};l.setSingle=function(f){this.single=f};l.getSingle=function(){return this.single};l.readSingle=function(){return this.that.options.sortModel.single};l.writeSingle=function(f){this.that.options.sortModel.single=f};l.setCancel=function(f){this.cancel=f};l.getCancel=function(){return this.cancel};l.readCancel=function(){return this.that.options.sortModel.cancel};l.writeCancel=function(f){this.that.options.sortModel.cancel=
f};l.writeSorter=function(f){var b=this.that.options,a=b.sortModel,d=b.groupModel,b=d.dataIndx,c=d.dir;if(d.on){for(d=0;d<b.length;d++){var e=f[d];if(b[d]!=e.dataIndx)throw"gDataIndx!=sorter.dataIndx";c[d]=e.dir}f.splice(0,b.length)}a.sorter=f};l.refreshSorter=function(f){f=f||{};var b=f.sorter,a=b[0].dataIndx,d=b[0].dir,c=f.single,b=f.cancel,e=this.that.options.groupModel,h=e.dataIndx,m=e.on?h.length:0,k=-1;f=this.readSorter();if(null==c)throw"sort single N/A";if(e.on)for(e=0;e<m;e++)h[e]==a&&(k=
e);-1<k?f[k].dir="up"===f[k].dir?"down":"up":null!=a&&(c?f[m]&&f[m].dataIndx==a?(a=f[m].dir,a="up"===a?"down":b&&"down"===a?"":"up",""===a?f.length--:f[m].dir=a):f[m]={dataIndx:a,dir:d?d:"up"}:(m=this.inSorters(f,a),-1<m?(a=f[m].dir,"up"==a?f[m].dir="down":b&&"down"==a?f.splice(m,1):1==f.length?f[m].dir="up":f.splice(m,1)):f.push({dataIndx:a,dir:"up"})));return f};l.saveOrder=function(f){var b=this.that.options.dataModel;f=b.data;if(!(!f||!f.length||b.dataUF&&b.dataUF.length||this.getSorter().length&&
null!=f[0].pq_order))for(var b=0,a=f.length;b<a;b++)f[b].pq_order=b};l.getQueryStringSort=function(){if(this.cancel)return"";var f=this.sorters,b=this.that.options.stringify;return f.length?!1===b?f:JSON.stringify(f):""};l.getSorter=function(){return this.sorters};l.setSorter=function(f){this.sorters=f.slice(0)};l.inSorters=function(f,b){for(var a=-1,d=0;d<f.length;d++)if(f[d].dataIndx==b){a=d;break}return a};l.sortLocalData=function(f){for(var b=this.that,a=b.colModel,d=this.sorters,c=0;c<d.length;c++){var e=
d[c],h=b.getColIndx({dataIndx:e.dataIndx}),h=a[h],m=h.sortType;e.dataType=h.dataType;e.sortType=m}d.length||(d=[{dataIndx:"pq_order",dir:"up",dataType:"integer"}]);return this._sortLocalData(d,f)};l._sortLocalData=function(f,b){if(null==b)return[];if(0==b.length||!f||!f.length)return b;var a=this,d=a.tmpPrefix,c=a.that.options.sortModel,e=c.useCache,h=c.ignoreCase;(function(){for(var c=[],k=[],l=[],g=f.length,n=0;n<g;n++){var B=f[n],t=B.dataIndx,r="up"==B.dir?1:-1,u=B.sortType,B=(B=B.dataType)?B:
"string",B="string"==B&&h?"stringi":B,v=e&&"date"==B,w=v?d+t:t;k[n]=w;l[n]=r;c[n]=u?function(a,c){return function(b,e,d,h){return c(b,e,d,h,a)}}(u,p.sort_sortType):"integer"==B?p.sort_number:"float"==B?p.sort_number:"function"==typeof B?function(a,c){return function(b,e,d,h){return c(b,e,d,h,a)}}(B,p.sort_dataType):"date"==B?p["sort_date"+(v?"_fast":"")]:"bool"==B?p.sort_bool:"stringi"==B?p.sort_locale:p.sort_string;v&&a.useCache(b,B,t,w)}b=b.sort(function(a,b){for(var e=0,d=0;d<g&&(e=c[d](a,b,k[d],
l[d]),0==e);d++);return e});v&&setTimeout(a.removeCache(f,b),0)})();return b};l.useCache=function(f,b,a,d){b=p["get_"+b];for(var c=f.length;c--;){var e=f[c];e[d]=b(e[a])}};l.removeCache=function(f,b){var a=this.tmpPrefix;return function(){for(var d=f.length;d--;){var c=a+f[d].dataIndx,e=b.length;if(e&&b[0].hasOwnProperty(c))for(;e--;)delete b[e][c]}}};var p={get_date:function(f){var b;return f?isNaN(b=Date.parse(f))?0:b:0},sort_number:function(f,b,a,d){f=f[a];b=b[a];return((f?1*f:0)-(b?1*b:0))*d},
sort_date:function(f,b,a,d){f=f[a];b=b[a];f=f?Date.parse(f):0;b=b?Date.parse(b):0;return(f-b)*d},sort_date_fast:function(f,b,a,d){return(f[a]-b[a])*d},sort_dataType:function(f,b,a,d,c){return c(f[a],b[a])*d},sort_sortType:function(f,b,a,d,c){return c(f,b,a)*d},sort_string:function(f,b,a,d){f=f[a];b=b[a];a=0;f=f?f:"";b=b?b:"";f>b?a=1:f<b&&(a=-1);return a*d},sort_locale:function(f,b,a,d){f=f[a];b=b[a];return(f?f:"").localeCompare(b?b:"")*d},sort_bool:function(f,b,a,d){f=f[a];b=b[a];a=0;if(f&&!b||!1===
f&&null===b)a=1;else if(b&&!f||!1===b&&null===f)a=-1;return a*d}};pq.sortObj=p})(jQuery);
(function(l){function p(a){this.that=a;this.mc=null;var c=this,b=a.options;this.DM=b.dataModel;a.on("dataReady columnOrder groupShowHide",function(a,d){b.mergeCells&&"pager"!==d.source&&c.init()})}function f(a,c,b){var h=0,f=a.length;for(b=b>f?f:b;c<b;c++)!0!==a[c].hidden&&h++;return h}function b(a,c,b){var h=0,f=a.length;for(b=b>f?f:b;c<b;c++)!0!==a[c].pq_hidden&&h++;return h}l.paramquery.cMerge=p;var a=p.prototype=new l.paramquery.cClass;a.init=function(){for(var a=this.that,c=a.colModel,e=a.options.mergeCells||
[],h=a.get_p_data(),m=[],k=[],l=0,g=e.length;l<g;l++){var n=e[l],p=n.r1,t=p,r=h[p],u=n.c1,v=u,w=c[u],x=n.rc,z=n.cc;if(w&&r){if(w.hidden)a:{for(v=u;v<u+z;v++){w=c[v];if(!w){v=-1;break a}if(!w.hidden)break a}v=void 0}w=f(c,u,u+z);if(r.pq_hidden)a:{for(t=p;t<p+x;t++){r=h[t];if(!r){t=-1;break a}if(!r.pq_hidden)break a}t=void 0}r=b(h,p,p+x);if(!(1>r||1>w))for(m.push({r1:p,c1:u,rc:x,cc:z,e_rc:r,e_cc:w}),k[t]=k[t]||[],k[t][v]={show:!0,rowspan:r,colspan:w,o_rowspan:x,o_colspan:z,style:n.style,cls:n.cls,attr:n.attr,
r1:p,c1:u,v_r1:t,v_c1:v},n={show:!1,r1:p,c1:u,v_r1:t,v_c1:v},r=p;r<p+x;r++)for(k[r]=k[r]||[],w=u;w<u+z;w++)if(r!=t||w!=v)k[r][w]=n}}a._mergeCells=0<k.length;this.mc=k;this.mc2=m};a.isHidden=function(a,c){var b,h=this.mc;return h&&h[a]&&(b=h[a][c])&&!b.show?!0:!1};a.setData=function(a,c,b){var h,f=this.mc;f[a]&&(h=f[a][c])&&(h.data=b)};a.getData=function(a,c,b){var h,f=this.mc;if(f[a]&&(h=f[a][c]))return(a=h.data)?a[b]:null};a.removeData=function(a,c,b){var h,f=this.mc;f&&f[a]&&(h=f[a][c])&&(a=h.data)&&
(a[b]=null)};a.ismergedCell=function(a,c){var b=this.mc,h;return b&&b[a]&&(h=b[a][c])?(b=b[h.v_r1][h.v_c1],a==b.r1&&c==b.c1?{rowspan:b.o_rowspan,colspan:b.o_colspan}:!0):!1};a.isRootCell=function(a,c,b){var h=this.mc,f;if(h&&h[a]&&(f=h[a][c])){if("o"==b)return a==f.r1&&c==f.c1;var k=f.v_r1;f=f.v_c1;if("a"==b)return b=h[k][f],b.a_r1==a&&b.a_c1==c;if(k==a&&f==c)return b=h[k][f],{rowspan:b.rowspan,colspan:b.colspan}}};a.getRootCell=function(a,c,b){var h=this.that,f=this.mc,k;if(f&&f[a]&&(k=f[a][c])){"a"==
b?(a=k.v_r1,c=k.v_c1,b=f[a][c],b.a_r1&&(a=b.a_r1,c=b.a_c1)):"o"==b?(a=k.r1,c=k.c1):(a=k.v_r1,c=k.v_c1);b=h.colModel[c];var f=h.rowIndxOffset,l=a-f;0>l&&(l=0,a=f);return{rowIndxPage:l,colIndx:c,column:b,dataIndx:b.dataIndx,rowData:h.pdata[l],rowIndx:a,rowspan:k.rowspan,colspan:k.colspan}}return h.normalize({rowIndx:a,colIndx:c})};a.inflateRange=function(a,c,b,h){var f=this.that,k=!1,l=f.options,l=l.groupModel.on?f.rowIndxOffset+f.pdata.length-1:l.dataModel.data.length-1,f=f.colModel.length-1,g=this.mc2;
if(!g)return[a,c,b,h];var n=0,p=g.length;a:for(;n<p;n++){var t=g[n],r=t.r1,u=t.c1,v=r+t.rc-1,t=u+t.cc-1,v=v>l?l:v,t=t>f?f:t,w=r<=b&&v>b,x=u<c&&t>=c,z=u<=h&&t>h;if((r<a&&v>=a||w)&&t>=c&&u<=h||(x||z)&&v>=a&&r<=b){k=!0;a=r<a?r:a;c=u<c?u:c;b=v>b?v:b;h=t>h?t:h;break a}}return k?this.inflateRange(a,c,b,h):[a,c,b,h]};l.paramquery.pqGrid.prototype.calcVisibleRows=b;a.renderCell=function(a){var c=this.that,e=a.rowIndx,h=a.rowIndxPage,m=a.colIndx,k,l=this.mc,g;if(l[e]&&(g=l[e][m])){var n=g.v_r1,p=g.v_c1;k=
g.r1;var t=g.c1,r=c.options,u=c.colModel,v=c.rowIndxOffset,w=r.freezeCols,x=(r=r.freezeRows)?r+v:0,z=c.initH,A=c.initV;if(g.show||m==p&&h==A&&n>=x||m==p&&e==A&&n>=x||e==n&&m==z&&p>=w||e==A&&m==z&&p>=w&&n>=x){var C=k-v,h=c.pdata,c=c.get_p_data(),s=f(u,0,w);g=b(h,0,r);k={rowData:c[k],rowIndx:k,colIndx:t,column:u[t],rowIndxPage:C};l=l[n][p];t=l.colspan;C=l.rowspan;w&&m<w&&m+t>s?(p=t-f(u,w,z),u=f(u,m,w),t=Math.max(p,u)):t-=f(u,p,m);r&&e<x&&e+C>g+v?(n=C-b(h,r,A),v=b(h,e-v,r),C=Math.max(n,v)):C-=b(c,n,
e);l.a_r1=e;l.a_c1=m;k.rowspan=C;k.colspan=t;k.style=l.style;k.attr=l.attr;k.cls=l.cls}else return null}return k?k:a};a.getMergeCells=function(a,c,b){for(var h=this.that,f=h.options.mergeCells,k,l,h=h.rowIndxOffset,g=h+b,n=[],p=f?f.length:0,t=0;t<p;t++)if(b=f[t],k=b.r1,l=b.c1,!c||k>=h&&k<g)c&&(k-=h),k+=a,n.push({r1:k,c1:l,r2:k+b.rc-1,c2:l+b.cc-1});return n}})(jQuery);
(function(){var l=window.pq=window.pq||{};l.extend=function(a,b,d){var f=function(){};f.prototype=a.prototype;var f=b.prototype=new f,k=a.prototype,l;for(l in d){var g=k[l],n=d[l];f[l]=g?function(a,c){return function(){this._super=function(){return a.apply(this,arguments)};var b=c.apply(this,arguments);this._super=void 0;return b}}(g,n):n}f.constructor=b;f._base=a;f._bp=function(a){var c=arguments;Array.prototype.shift.call(c);return k[a].apply(this,c)}};var p=l.Range=function(a,b,d,f){if(null==a)throw"invalid param";
this.that=a;if(!1==this instanceof p)return new p(a,b,d,f);this._type=d?d:"range";this.init(b,f)},f=p.prototype;f._areas=[];f.init=function(a,b){b=!1!==b;if(a)if("function"==typeof a.push)for(var d=0,f=a.length;d<f;d++)this.init(a[d],b);else if(d=this._normal(a,b))f=this._areas,f.length?f.push(d):this._areas=[d]};f.address=function(){this.dirty&&this.refresh();return this._areas};f.areas=function(a){this.dirty&&this.refresh();var b=this.that,d=this._areas,d=null==a?d:d[a];return l.Range(b,d,"area")};
f.merge=function(a){a=a||{};var b=this.that,d=b.options.mergeCells,f,k,l=this._areas[0];l&&(f=l.r2-l.r1+1,k=l.c2-l.c1+1,1<f||1<k)&&(l.rc=f,l.cc=k,d.push(l),!1!==a.refresh&&b.refreshView())};f.unmerge=function(a){a=a||{};var b=this.that,d=b.options.mergeCells,f=this._areas[0];if(f){for(var k=0;k<d.length;k++){var l=d[k];if(l.r1==f.r1&&l.c1==f.c1){d.splice(k,1);break}}!1!==a.refresh&&b.refreshView()}};f.hide=function(a){a=a||{};for(var b=this.that,d=b.colModel,f=b.get_p_data(),k=this._areas,l=0,g=k.length;l<
g;l++){var n=k[l],p=n.type,t=n.r1,r=n.r2,u=n.c1,n=n.c2;if("column"==p)for(p=u;p<=n;p++)d[p].hidden=!0;else if("row"==p)for(p=t;p<=r;p++)f[p].pq_hidden=!0}!1!==a.refresh&&b.refreshView()};f.unhide=function(a){a=a||{};for(var b=this.that,d=b.colModel,f=b.get_p_data(),k=this._areas,l=0,g=k.length;l<g;l++){var n=k[l],p=n.type,t=n.r1,r=n.r2,u=n.c1,n=n.c2;if("column"==p)for(p=u;p<=n;p++)d[p].hidden=!1;else if("row"==p)for(p=t;p<=r;p++)f[p].pq_hidden=!1}!1!==a.refresh&&b.refreshView()};f.select=function(){var a=
this.that,b=a.iSelection,d=b._areas[0],f=this._areas,k=f[0];if(!k)return this;var l=k.r1,g=k.c1;if(b.dirty||1!=f.length||"block"!=f[0].type||!d||"cell"!=d.type&&"block"!=d.type||l!=d.r1||g!=d.c1)for(b.removeAll({trigger:!1}),l=0,g=f.length;l<g;l++)b.add(f[l],!1);else{var n=d.r1,p=d.c1,t=d.r2,d=d.c2,r=k.r2,k=k.c2,a=a.iCells;if(r==t&&k==d)return this;k>d?a.selectBlock({range:{r1:l,c1:d+1,r2:r,c2:k}}):k<d&&a.selectBlock({range:{r1:Math.max(l,n),c1:k+1,r2:Math.max(r,t),c2:d},remove:!0});r>t?a.selectBlock({range:{r1:t+
1,c1:g,r2:r,c2:k}}):r<t&&a.selectBlock({range:{r1:r+1,c1:Math.max(g,p),r2:t,c2:Math.max(k,d)},remove:!0});b._areas=f}b._trigger();return this};f.resize=function(a,b){var d=this._areas[0];return p(this.that,{r1:d.r1,c1:d.c1,rc:a,cc:b})};f.cut=function(a){a=a||{};a.cut=!0;return this.copy(a)};f.copy=function(a){a=a||{};this.dirty&&this.refresh();var b=this.that,d=a.dest,f=a.cut?!0:!1,k=null==a.copy?!0:a.copy,l=a.source||(f?"cut":"copy"),g=null==a.history?!0:a.history,n=null==a.allowInvalid?!0:a.allowInvalid,
p=[],t=[],r=b.get_p_data(),u=b.colModel,v=b.readCell,w=b.iMerge,x=this._areas;if(x.length){var z=this._areas[0],A=z.type,C=z.r1,s=z.c1,y="cell"==A?C:z.r2,z="cell"==A?s:z.c2,E=0;do{for(;C<=y;C++){for(var D=[],F=r[C],K={},I={},J=s;J<=z;J++){var P=u[J],O=P.dataIndx;if(!1!==P.copy){var N=F[O];k&&D.push(v(F,P,w,C,J));f&&(K[O]=void 0,I[O]=N)}}f&&p.push({rowIndx:C,rowData:F,oldRow:I,newRow:K,type:"update"});D=D.join("\t");t.push(D)}E++;z=x[E];if("row"==A&&z&&"row"==z.type)C=z.r1,s=z.c1,y=z.r2,z=z.c2;else break}while(1);
k&&(D=t.join("\n"),a.clip?(a=a.clip,a.val(D),a.select()):b._setGlobalStr(D));d?b.paste({dest:d,rowList:p,history:g,allowInvalid:n}):f&&!1!==b._digestData({rowList:p,source:l,history:g,allowInvalid:n})&&b.refresh({source:"cut"})}};f.clear=function(){return this.copy({copy:!1,cut:!0,source:"clear"})};f.add=function(a){this.init(a)};f._countArea=function(a){var b=a.r1,d=a.c1,f=a.r2,k=a.c2;return"cell"==a.type?1:(f-b+1)*(k-d+1)};f.count=function(){this.dirty&&this.refresh();for(var a="range"==this._type,
b=this._areas,d=0,f=b.length,k=0;k<f;k++)d+=a?this._countArea(b[k]):1;return d};f.rows=function(a){this.dirty&&this.refresh();var b=this.that,d=[],f=this._areas[0];if(f){var k=f.r1,p=f.c1,g=f.r2,n=f.c2,f=f.type,g=null==a?g:k+a;for(a=null==a?k:k+a;a<=g;a++)d.push({r1:a,c1:p,r2:a,c2:n,type:f})}return l.Range(b,d,"row")};f.columns=function(a){this.dirty&&this.refresh();var b=this.that,d=[],f=this._areas[0];if(f){var k=f.r1,p=f.c1,g=f.r2,n=f.c2,f=f.type,n=null==a?n:p+a;for(a=null==a?p:p+a;a<=n;a++)d.push({r1:k,
c1:a,r2:g,c2:a,type:f})}return l.Range(b,d,"column")};f.cell=function(a,b){this.dirty&&this.refresh();var d=this.that,f=[],k=this._areas[0];k&&(f=k.r1+a,k=k.c1+b,f=[f,k,f,k]);return l.Range(d,f,"cell")};f.item=function(a){this.dirty&&this.refresh();for(var b=0,d=!1,f=this._areas,k=0,l=f.length;k<l;k++){var g=f[k],n=this._countArea(g);if(b+n>a){d=!0;a-=b;break}else b+=n}if(d){if(g)var p=g.r1,t=g.c1,b=g.c2-t+1,p=p+Math.floor(a/b),t=t+a%b;return{r1:p,c1:t}}};f._normal=function(a,b){if(a.type)return a;
if("function"==a.push){for(var d=[],f=0,k=a.length;f<k;f++){var l=this._normal(a[f],b);l&&d.push(l)}return d}var d=this.that,g=d.get_p_data().length-1,n=d.colModel.length-1,f=a.r1,k=a.c1,f=f>g?g:f,k=k>n?n:k,p=a.rc,t=a.cc,l=a.r2,r=a.c2,l=p?f+p-1:l>g?g:l,r=t?k+t-1:r>n?n:r;if(0>n||0>g)return null;f>l&&(p=f,f=l,l=p);k>r&&(p=k,k=r,r=p);if(null!=f||null!=k)return null==f?(f=0,l=g,r=null==r?k:r,g="column"):null==k?(k=0,l=null==l?f:l,r=n,g="row"):null==l?(g="cell",l=f,r=k):g="block",b&&(d=d.iMerge.inflateRange(f,
k,l,r),f=d[0],k=d[1],l=d[2],r=d[3]),a.r1=f,a.c1=k,a.r2=l,a.c2=r,a.type=a.type||g,a};f.value=function(a){a=a||{};a=a.val;this.dirty&&this.refresh();var b=this.that,d=b.colModel,f=[],k=this._areas;if(void 0===a&&k.length){var l=k[0],g=l.r1,n=l.c1;return b.getCellData({rowIndx:g,colIndx:n})}for(var p=0;p<k.length;p++)for(var l=k[p],g=l.r1,n=l.c1,t=l.r2,l=l.c2;g<=t;g++){for(var r=b.normalize({rowIndx:g}),u=r.rowData,r=r.rowIndx,v={},w={},x=n;x<=l;x++){var z=d[x].dataIndx;w[z]=a;v[z]=u[z]}f.push({rowData:u,
rowIndx:r,type:"update",newRow:w,oldRow:v})}f.length&&(b._digestData({rowList:f,source:"range"}),b.refresh())};var b=l.Selection=function(a,d){if(null==a)throw"invalid param";if(!1==this instanceof b)return new b(a,d);this.that=a;var f=this;a.on("dataReady columnOrder addColumn deleteColumn",function(a,b){"pager"!=b.source&&f.renew()});this._base(a,d)},a={renew:function(){var a=this._areas,b=a.length;if(1==b){if(a=a[0],a=this._adjust(a))this.removeAll({trigger:!1}),this.add(a,!1)}else 1<b&&(this.dirty=
!0)},isDirty:function(){return this.dirty}},d=function(a){a.shiftKey&&"pqGrid:mousePQUp"!=a.type||(this._trigger("selectEnd",null,{selection:this.selection()}),this.off("mousePQUp",d),this.off("keyUp",d))};a._trigger=function(){var a=this.that;this.dirty&&this.refresh();a._trigger("selectChange",null,{selection:this});a.off("mousePQUp",d);a.off("keyUp",d);a.on("mousePQUp",d);a.on("keyUp",d)};a.removeAll=function(a){a=a||{};var b=this.that;b.iCells.removeAll({refresh:!0});b.iRows.removeAll({refresh:!0,
all:!0});this._areas=[];!1!==a.trigger&&this._trigger()};f.indexOf=function(a){this.dirty&&this.refresh();a=this._normal(a);var b=a.type,d=a.r1,f=a.c1,k=a.r2;a=a.c2;for(var l=this._areas,g=0,n=l.length;g<n;g++){var p=l[g],t=p;if(b==p.type&&d>=t.r1&&k<=t.r2&&f==t.c1&&a==t.c2)return g}return-1};a.add=function(a,b){var d=this.that,f=this._normal(a,!0),k=d.iCells,d=d.iRows,l=f.r1,g=f.c1,n=f.r2,p=f.type;0<=this.indexOf(f)||("row"==p?(k=this._areas,k.length&&(k=k[k.length-1],p=k.type,"row"==p&&l<=k.r2&&
(this.dirty=!0)),n>l?d.selectRange({range:f}):d.add({rowIndx:l})):"column"==p||"block"==p?k.selectBlock({range:f}):"cell"==p&&k.add({rowIndx:l,colIndx:g}),this._super(f),!1!==b&&this._trigger())};a._adjust=function(a){var b=this.that,d=b.get_p_data().length-1,b=b.colModel.length-1,f=a.r1,k=a.c1,l=a.r2,g=a.c2,l=l>d?d:l,g=g>b?b:g;if(0>b||0>d||f>l||k>g)return null;a.r1=f;a.r2=l;a.c1=k;a.c2=g;return a};f.removeRow=function(a,b){var d=a.r1,f=a.r2,k=this._areas,l=this._areas[b],g=l.r1,n=l.r2;d==g&&f==n?
k.splice(b,1):d>g?(l.r2=d-1,f<n&&(d=this._normal({r1:f+1,r2:n}),k.splice(b+1,0,d))):f<n&&(d>g&&(d=this._normal({r1:f+1,r2:n}),k.splice(b,0,d)),l.r1=f+1)};a.removeRow=function(a,b){var d=this.that,f=this._normal(a),k=this.indexOf(f);-1<k&&"row"==f.type&&f.r1==f.r2&&(d.iRows.remove({rowIndx:f.r1}),this._super(a,k),!1!==b&&this._trigger())};a.selectAll=function(a){a=a||{};var b=this.that,d=a.all,f=d?0:b.rowIndxOffset,k=b.colModel.length-1,l=f+(d?b.options.dataModel.data.length-1:b.pdata.length-1);"cell"==
a.type?(a={r1:f,c1:0},a.r2=l,a.c2=k,b.range(a).select()):(a={r1:f},a.r2=l,d||this.removeRows({all:!1,trigger:!1}),b.iRows.selectRange({range:a}),b=d?[]:this._areas,b.push({r1:f,c1:0,r2:l,c2:k,type:"row"}),this._areas=b,this._trigger());return this};a.removeRows=function(a){a=a||{};var b=a.all;this.that.iRows.removeAll({refresh:!0,all:a.all});b?this._areas=[]:this.refresh();!1!==a.trigger&&this._trigger()};a.refresh=function(){for(var a=this.that,b=[],d=a.colModel.length-1,a=a.get_p_data(),f=0,k=a.length;f<
k;f++){var l=a[f],g;l&&(l.pq_cellselect=void 0,l.pq_rowselect?g?g.r2=f:g={r1:f,r2:f,c1:0,c2:d,type:"row"}:g&&(b.push(g),g=null))}g&&b.push(g);this.dirty=!1;this._areas=b};l.extend(p,b,a)})();
$(function(){function l(b,a,d,c){b.push("<li data-option='",d,"' class='pq-menu-item'>","<label>","<input type='checkbox' ",a[d]?"checked":"","/>",c["strGroup_"+d],"</label></li>")}var p=$.paramquery;pq.aggregate={sum:function(b){for(var a=0,d=b.length,c;d--;)c=b[d],null!=c&&(a+=c-0);return a},avg:function(b,a){return this.sum(b,a,!0)/b.length},max:function(b,a){var d;d=a.dataType;"float"==d||"integer"==d?d=Math.max.apply(Math,b):"date"==d?(b.sort(function(a,b){a=Date.parse(a);b=Date.parse(b);isNaN(a)&&
(a=0);isNaN(b)&&(b=0);return b-a}),d=b[0]):(b.sort(),d=b[b.length-1]);return d},min:function(b,a){var d;d=a.dataType;var c,e;if("integer"==d||"float"==d)d=Math.min.apply(Math,b);else if("date"==d){e=b.length;for(d=[];e--;)(c=b[e])&&d.push({dateO:c,dateP:Date.parse(c)});d.sort(function(a,b){return a.dateP-b.dateP});d=d.length?d[0].dateO:void 0}else b.sort(),d=b[0];return d},count:function(b){return b.length}};var f=(p.cGroupView=function(b){this.that=b;b.options.groupModel.on&&this.init()}).prototype;
f.init=function(){var b,a,d,c;this._init||(this.mc=[],this.tree=[],this.summaryData=[],c=this.that,b=c.options,a=b.groupModel,b=b.bootstrap,d=(b=b.on)?"glyphicon ":"ui-icon ",this.groupRemoveIcon="pq-group-remove "+d+(b?"glyphicon-remove":"ui-icon-close"),this.toggleIcon="pq-group-toggle "+d,c.on("cellClick",this.onCellClick(this)).on("cellKeyDown",this.onCellKeyDown(this,a)).on(!0,"cellMouseDown",this.onCellMouseDown()).on("change",this.onChange(this,a)).on("dataReady",this.onDataReady(this,c)).on("beforeSortDone",
this.onBeforeSort(this,c)).on("columnDragDone",this.onColumnDrag(this)).on("columnOrder",this.onColumnOrder(this)),this._init=!0)};f.onCellClick=function(b){return function(a,d){d.rowData.pq_gtitle&&$(a.originalEvent.target).hasClass("pq-group-icon")&&b.toggle(d.rowIndxPage)}};f.onChange=function(b,a){return function(){b.saveState(a.refreshOnChange)}};f.onCellMouseDown=function(){return function(b,a){a.rowData.pq_gtitle&&$(b.originalEvent.target).hasClass("pq-group-icon")&&b.stopImmediatePropagation()}};
f.onCellKeyDown=function(b,a){return function(d,c){if(c.rowData.pq_gtitle&&0<=$.inArray(c.dataIndx,a.dataIndx)&&d.keyCode==$.ui.keyCode.ENTER)return b.toggle(c.rowIndxPage),!1}};f.showRows=function(){for(var b=this.that.options.dataModel.data,a=0,d=b.length;a<d;a++)b[a].pq_hidden=!1};f.removeGroup=function(b,a){for(var d=this.that.options.groupModel.dataIndx,c=0;c<d.length;c++)if(b==d[c]){d.splice(c,1);break}d.length||(this.showRows(),this.mc.length=0);!1!==a&&this.refreshFull()};f.addGroup=function(b,
a){var d=this.that.options.groupModel;d.dataIndx=d.dataIndx||[];null!=b&&-1==$.inArray(b,d.dataIndx)&&(d.dataIndx.push(b),this.refreshFull())};f._initHeadSortable=function(){this.$header.sortable({axis:"x",distance:3,tolerance:"pointer",cancel:".pq-group-menu",stop:this.onSortable(this,this.that.options)})};f.onColumnDrag=function(b){return function(a,d){var c=d.column.colModel;c&&c.length?b.acceptDrop=!1:b._initHeadDroppable()}};f._initHeadDroppable=function(){var b=this,a=b.that,d=b.$header;d&&
(d.droppable({accept:function(a){return b.acceptDrop},tolerance:"pointer",hoverClass:"pq-drop-hover",drop:b.onDrop(a,b)}),b.acceptDrop=!0)};f.onDrop=function(b,a){return function(d,c){var e=1*c.draggable.attr("pq-col-indx");a.addGroup(b.colModel[e].dataIndx);a.acceptDrop=!1}};f.onSortable=function(b,a){return function(){for(var d=[],c=a.groupModel,e=c.dataIndx,f=[],m=!1,k=$(this).find(".pq-group-item"),l=0;l<k.length;l++){var g=$(k[l]),n=g.data("indx"),g=g.data("dir");e[l]!=n&&(m=!0);d.push(n);f.push(g)}m&&
(c.dataIndx=d,c.dir=f,b.refreshFull())}};f._initHeader=function(b,a){if(this.$header){var d=this.$header,c=d.find(".pq-group-item");d.data("uiSortable")||this._initHeadSortable();c.length||d.append("<span class='pq-group-placeholder'>"+b.strGroup_header+"</span>");a.headerMenu&&this._initHeaderMenu()}};f.createHeader=function(){for(var b=this,a=b.that,d=b.$header,c=a.options,e=c.bootstrap,f=a.columns,m=e.on,k=c.groupModel,l=k.dataIndx,g=l.length;g--;)null==f[l[g]]&&l.splice(g,1);g=l.length;if(k.header&&
k.on){d?d.empty():(d=b.$header=$("<div class='pq-group-header ui-helper-clearfix' ></div>").appendTo(a.$top),d.on("click",".pq-group-item",function(a){a=$(a.target);var c=$(this).data("indx");a.hasClass("pq-group-remove")?b.removeGroup(c):b.groupToggle(c)}));if(g){for(var a=[],n=0;n<g;n++){var p=l[n],t=f[p],r=m?e.groupModel.icon:k.icon;a.push("<div class='pq-group-item' data-indx='",p,"' data-dir='",k.dir[n],"'>","<span class='",b.toggleIcon,k.collapsed[n]?r[1]:r[0],"' ></span>",t.pqtitle||("string"==
typeof t.title?t.title:p),"<span class='",b.groupRemoveIcon,"' ></span></div>")}d[0].innerHTML=a.join("")}b._initHeader(c,k)}else d&&(d.remove(),b.$header=null)};f._initHeaderMenu=function(){for(var b=this.that,a=b.options,d=this.$header,c=["<ul class='pq-group-menu'><li>",b.BS_on?"<span class='glyphicon glyphicon-chevron-left'></span>":"","<ul>"],e=a.groupModel,f=e.menuItems,m=0,k=f.length;m<k;m++)l(c,e,f[m],a);c.push("</ul></li></ul>");d=$(c.join("")).appendTo(d);d.menu({icons:{submenu:"ui-icon-carat-1-w"},
position:{my:"right top",at:"left top"}});d.change(function(c){if("INPUT"==c.target.nodeName){c=$(c.target).closest("li").data("option");var d={};d[c]=!a.groupModel[c];d.refresh=!0;b.groupOption(d)}})};f.setOption=function(){this._init&&(this.refreshColumns(),this.summaryData.length=0,this.tree.length=0,this._initmerge())};f.onDataReady=function(b,a){return function(){b.tree.length=0;var d=a.options.groupModel;d.on&&(d.dataIndx.length?(b.refreshColumns(),b._groupData(),b._initcollapsed(),b._initmerge()):
d.grandSummary&&(b.refreshColumns(),b._groupData()));b.createHeader()}};f.onColumnOrder=function(b){return function(){b._initmerge()}};f.pq_gc_=function(){return"pq_gc_"};f.onBeforeSort=function(b,a){return function(d){if(!d.isDefaultPrevented()){var c=a.options,e=c.groupModel;if(e.on){d=a.columns;for(var f=[],c=c.dataModel.data||[],l=[],k,p,g=e.dataIndx,n=g.length;n--;){var B=g[n];k=d[B];var t=k.groupChange;if(t)for(f.push(k),e=b.pq_gc_()+B,l.push(e),k.sortType=b.sortType(e),p=c.length;p--;)k=c[p],
k[e]=t(k[B])}a.one("sort",function(){if(n=f.length)for(;n--;)f[n].sortType=void 0})}}}};f.sortType=function(b){return function(a,d,c){return a[b]!=d[b]?a[c]-d[c]:0}};f.groupToggle=function(b){var a=this.that.options.groupModel,d=a.collapsed;b=$.inArray(b,a.dataIndx);d[b]=!d[b];this.trigger(null,b);this.refreshView()};f.expandIndx=function(b){var a=this.that,d=!0==b.close;b=b.indx.split(",");var c=b.length,e=this.tree,f,l,k;f=0;var p,a=a.pdata;if(!(c>e.length)){for(var g=0;g<c;g++){p=1*b[g]+f;f=e[g][p];
if(!f){if(0==g)return;break}f=f.rip;if(!d||d&&g==c-1)l=a[f],l.pq_close!=d&&(k=l,l.pq_close=d);l=e[g+1];var n=void 0;if(l){do n=l[p].rip,p++;while(n<f);f=p-1}else f=void 0}k&&(this.trigger(k),this.saveState(!0))}};f._editorSummary=function(b,a){var d=b.summaryOptions;return function(b){var e=b.rowData;if(e.pq_gsummary||e.pq_gtitle){var e=pq.aggregate,f=b.column,l=f.summary,l=l?l.edit:null,k=f.dataType,f=[""];if(-1<$.inArray(b.dataIndx,a.dataIndx)||!a.summaryEdit&&!l||!1===l)return!1;"integer"==k||
"float"==k?k="number":"date"!==k&&(k="string");l=d[k].split(",");b=$.inArray;for(var p in e)-1<b(p,l)&&f.push(p);return 1==f.length?!1:{type:"select",prepend:a.prepend,options:a.options||f,valueIndx:a.valueIndx,labelIndx:a.labelIndx,init:a.init||function(a){var b=a.column.summary,c;b||(b=a.column.summary={});c=b.type;setTimeout(function(){a.$cell.find("select").val(c)},100)},getData:a.getData||function(a){var b=a.column;a=a.$cell.find("select").val();b.summary.type=a;this.one("beforeValidate",function(a,
b){b.allowInvalid=!0;b.track=!1;b.history=!1});return a}}}}};f._renderTitle=function(b,a){var d=this.that,c=b.bootstrap,e=c.on,c=e?c.groupModel.icon:a.icon,f=e?["glyphicon "+c[0],"glyphicon "+c[1]]:["ui-icon "+c[0],"ui-icon "+c[1]];return function(b){var c=b.rowData,e,g,l;if(c.pq_gtitle&&null!=b.cellData)return e=c.pq_close,g=c.pq_level,l=a.title,l=l[g]?l[g]:a.titleDefault,l="function"===typeof l?l.call(d,b):l.replace("{0}",b.cellData).replace("{1}",c.pq_items),{text:(b.Export?"":"<span class='pq-group-icon "+
f[e?1:0]+"'></span>")+l,cls:"pq-group-title-cell"}}};f._renderSummary=function(b){var a=this.that;return function(d){var c=d.rowData,e,f;if(c.pq_gsummary||c.pq_gtitle){c=d.column;e=c.summary.type;f=b.summaryTitle[e];if("function"==typeof f)return f.call(a,d);e=d.formatVal;null==e&&(e=d.cellData,e=null==e?"":e);"number"!=typeof e||c.format||parseInt(e)===e||(e=e.toFixed(2));return f?f.replace("{0}",e):e}}};f.refreshColumns=function(){for(var b=this.that,a=b.options,d=a.groupModel,c=d.on,e=d.fixCols,
f,l,k,p,g=d.dataIndx,n=g.length,B=a.colModel,t=B.length;t--;)k=B[t],k._render&&(k._render==k._renderGT?(delete k._renderGT,delete k._render):k._render==k._renderGS&&(delete k._renderGS,delete k._render)),k._nodrag&&(delete k._nodrag,delete k._nodrop),c&&(p=k.summary)&&p.type&&(l=l||this._renderSummary(a),k._render=k._renderGS=l);a.geditor=c?this._editorSummary(a,d):void 0;if(c)for(t=n-1;0<=t;t--)k=b.getColumn({dataIndx:g[t]}),f=f||this._renderTitle(a,d),k._renderGT=k._render=f;if(e&&c)for(t=0;t<n;t++)a=
b.getColIndx({dataIndx:g[t]}),k=B[a],k._nodrag=k._nodrop=!0,a!=t&&(b.iDragColumns.moveColumn(a,t,!0),b.iColModel.init())};f.refreshFull=function(){this.refreshColumns();this.that.sort()};f.refreshView=function(){this.that.refreshView()};f.expandAll=function(b){b=b||{};b=!0==b.close;var a=this.that.options.groupModel,d=a.collapsed,a=a.dataIndx,c;for(c=0;c<a.length;c++)d[c]=b;this.trigger(null,null,!0);this.refreshFull()};f.showHideRows=function(b,a,d,c){for(var e=[],f=this.that.pdata,l=f.length;b<
l;b++){var k=f[b];if(k.pq_gsummary)if(k.pq_level<a)break;else k.pq_hidden=d;else if(k.pq_gtitle){var p=k.pq_close;p&&e.push({indx:b,level:k.pq_level});if(k.pq_level<=a)break;else k.pq_hidden=c&&!p?!0:d}else k.pq_hidden=d}return e};f.trigger=function(b,a,d){var c=this.that,e=c.options.groupModel,f={};b?(a=b.pq_level,d=b[e.dataIndx[a]],b=b.pq_close,f={level:a,close:b,group:d}):d?(b=e.collapsed[0],f={all:!0,close:b}):null!=a&&(b=e.collapsed[a],f={level:a,close:b});c._trigger("group",null,f)};f.toggle=
function(b){b=this.that.pdata[b];b.pq_close=b.pq_close?!1:!0;this.trigger(b);this.saveState(!0)};f.saveState=function(b){var a=this.that,d=a.options.groupModel;if(d.on&&d.dataIndx.length){for(var d=a.pdata,c=d.length,e=Array(c),f=0;f<c;f++)e[f]=d[f];this.pdata=e;b&&a.refreshView()}};f._initmerge=function(){for(var b=this.that,a=b.options,d=a.groupModel.merge,c=this.tree,e=b.rowIndxOffset,f,l,k,p,g,n=b.colModel.length,B=[],t=b.pdata,r=0;r<c.length;r++){f=c[r];k=b.getColIndx({dataIndx:a.groupModel.dataIndx[r]});
for(var u=0,v=f.length;u<v;u++){l=f[u];p=l.rip;if(null==p)break;d?(l=l.rip2,g=l-p,l=p+e,B.push({r1:l,rc:g,c1:k,cc:1})):(l=p+e,p=t[p],p.pq_close||B.push({r1:l,rc:1,c1:k,cc:n-r-k}))}}B.length?(this.mc=a.mergeCells=B,b.iMerge.init()):this.mc.length&&(this.mc.length=0,b.iMerge.init())};f._initcollapsed=function(){var b=this.that,a=b.options.groupModel.merge,d=this.pdata,b=b.pdata,c,e,f,l;if(b){for(var k=0,p=b.length;k<p;k++)c=b[k],e=c.pq_gtitle,void 0!==e&&(e=c.pq_level,l=null,d&&(f=(f=d[k])?f.pq_close:
null,null!=f&&(l=c.pq_close=f)),null==l&&(l=c.pq_close),l?this.showHideRows(k+1,e,!0):a&&(c.pq_hidden=!0));delete this.pdata}};f._groupChange=function(b){var a=$.trim,d=this.pq_gc_();return function(c,e,f){if(f.groupChange)return c=c[d+e],null!=c?c:"";c=a(c[e]);return b?c.toUpperCase():c}};f._groupData=function(){var b=this.that,a=pq.aggregate,d=b.pdata,c=b.options,e=c.groupModel,f=e.merge,l=e.grandSummary,k=$.inArray,p=b.colModel,g=p.length,n=this._groupChange(e.ignoreCase),B=d.length,t=e.dataIndx,
r=t.length,u=e.collapsed||[],v=[],w={},x=b.columns,z=[],A,e=e.showSummary||[],C=[];if(d&&0<B){for(var s=r-1;0<=s;s--)e[s]=null!=e[s]?e[s]:!1,u[s]=null!=u[s]?u[s]:!1,C[s]=(C[s+1]?C[s+1]:0)+e[s],z[s]=x[t[s]];for(A=0;A<g;A++){var y=p[A],E=y.dataIndx,D=y.summary;D&&D.type&&-1==k(E,t)&&(v.push({column:y}),w[E]=Array(B-1))}A=v.length;k=[];p=[];g=[];x=[];for(s=0;s<r;s++)x[s]=null,g[s]="",p[s]=[];for(var F=0;F<=B;F++){for(var K=d[F],E=!1,I=null,s=0;s<r;s++){g[s]=F<B?n(K,t[s],z[s]):"";if(x[s]!=g[s]||F==B)E=
!0,null==I&&(I=s);if(E){var y=p[s],J=y[y.length-1];J&&(J.rip2=k.length+C[s]);y.push({rowIndx:F,title:g[s]})}}if(E){if(0<F)for(s=r-1;s>=I;s--){for(var J={},y=p[s],P=y.length-2?y[y.length-2].rip:s,O=y.length-2?y[y.length-2].rowIndx:0,N=y[y.length-1].rowIndx,G=0;G<A;G++){var y=v[G].column,D=y.summary,D=D.type,E=y.dataIndx,L="",L=w[E].slice(O,N),L=a[D](L,y);J[E]=L}if(e[s]){var y={pq_gsummary:!0,pq_level:s,pq_rowcls:"pq-summary-row"},H;for(H in J)y[H]=J[H];k.push(y)}y=k[P];for(H in J)y[H]=J[H];f&&(y.pq_rowcls=
"pq-summary-row");y.pq_items=N-O}if(F==B)break;for(s=0;s<r;s++)x[s]=g[s];for(s=I;s<r;s++)y={pq_gtitle:!0,pq_level:s,pq_close:u[s]},y[t[s]]=g[s],E=k.push(y),y=p[s],y[y.length-1].rip=E-1}if(F==B)break;K.pq_hidden=!1;k.push(K);for(s=0;s<A;s++)y=v[s].column,E=y.dataIndx,w[E][F]=K[E]}this.tree=p;b.pdata=k}else b.dataGM=null;if(l){J={pq_grandsummary:!0,pq_gsummary:!0};for(G=0;G<A;G++)y=v[G].column,D=y.summary,D=D.type,E=y.dataIndx,L=w[E],L=a[D](L,y),J[E]=L;this.summaryData=c.summaryData=[J]}else this.summaryData.length=
0};p=p.pqGrid.prototype;p.group=function(b){this.iGroupView[b.indx?"expandIndx":"expandAll"](b)};p.groupOption=function(b){var a=b.dataIndx,d=a?a.length:0,a=!1,c=this.iGroupView,e=this.options,f=e.groupModel,l=f.dataIndx,k=b.on||null==b.on&&f.on;k&&c.init();k&&(d||l.length)&&(a=!0);if(f.on&&l.length&&(!1===b.on||0===d))for(d=e.dataModel.data,e=0,l=d.length;e<l;e++)d[e].pq_hidden=!1;$.extend(f,b);c.setOption();if(!1!==b.refresh)this[a?"sort":"refreshView"]()}});
